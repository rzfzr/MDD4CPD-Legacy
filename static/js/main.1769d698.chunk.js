(this.webpackJsonpmdd4=this.webpackJsonpmdd4||[]).push([[0],{434:function(t,e,n){},435:function(t,e,n){},466:function(t,e,n){},721:function(t,e,n){},723:function(t,e,n){"use strict";n.r(e);var i=n(99),o=n.n(i),r=(n(434),n(435),n(29)),a=n(0),s=n.n(a),c=n(64),l=n(751),d=n(748),u=n(749),p=n(410),h=n.n(p),b=n(414),g=n.n(b),j=n(411),O=n.n(j),m=n(413),f=n.n(m),v=n(415),x=n.n(v),y=n(412),k=n.n(y),P=n(1);function C(){var t=window.location.pathname,e=Object(a.useState)(t),n=Object(r.a)(e,2),i=n[0],o=n[1];return Object(P.jsx)(l.a,{position:"fixed",color:"primary",style:{top:"auto",bottom:0},children:Object(P.jsxs)(d.a,{value:i,onChange:function(t,e){o(e)},showLabels:!0,children:["location.pathname",Object(P.jsx)(u.a,{component:c.b,label:"Home",to:"/mdd4/",icon:Object(P.jsx)(h.a,{})}),Object(P.jsx)(u.a,{component:c.b,label:"Models",to:"/mdd4/models",icon:Object(P.jsx)(O.a,{})}),Object(P.jsx)(u.a,{component:c.b,label:"Transformations",to:"/mdd4/transformations",icon:Object(P.jsx)(k.a,{})}),Object(P.jsx)(u.a,{component:c.b,label:"Palette",to:"/mdd4/palette",icon:Object(P.jsx)(f.a,{})}),Object(P.jsx)(u.a,{component:c.b,label:"Editor",to:"/mdd4/editor",icon:Object(P.jsx)(g.a,{})}),Object(P.jsx)(u.a,{component:c.b,label:"Settings",to:"/mdd4/settings",icon:Object(P.jsx)(x.a,{})})]})})}var w,E,S=n(9),M=n(37),I=n(49),D=n(19),N=n(20),A=n(28),T=n(27),F=n(12),z=n(417),L=n.n(z),B=n(416);(E||(E={})).Tray=F.default.div(w||(w=Object(M.a)(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tfont-size:0.6em;\n\t\tpadding: 2px 0px;\n\t\tmargin:\t 5px 10px ;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 100px;\n\t\tmargin-bottom: 2px;\n\t\tcursor: pointer;\n\t\tbackground: rgb(20, 20, 20);\n\t"])),(function(t){return t.color}));var W,H,K,R=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var t=this;return Object(P.jsxs)(E.Tray,{color:this.props.node.color||"red",draggable:!0,onDragStart:function(e){e.dataTransfer.setData("storm-diagram-node",JSON.stringify(t.props.node)),e.dataTransfer.setDragImage(new Image,10,10)},className:"tray-item",children:[this.props.node.name,Object(P.jsx)("a",{"data-tip":!0,"data-for":"tip-"+this.props.node.name,children:Object(P.jsx)(L.a,{style:{fontSize:"1rem"}})}),Object(P.jsx)(B.a,{id:"tip-"+this.props.node.name,type:"light",place:"bottom",children:Object(P.jsxs)("div",{style:{width:"300px",height:"300px",backgroundColor:"white",border:"solid",fontSize:"1.3em"},children:[Object(P.jsx)("div",{style:{width:"100%",borderBottom:"solid 3px",fontSize:"2em"},children:this.props.node.name}),Object(P.jsxs)("div",{style:{width:"100%",borderBottom:"solid 2px"},children:["Library=",this.props.node.extras.library]}),this.props.node.ins&&this.props.node.ins.length>0&&this.props.node.ins.map((function(t){return Object(P.jsx)("div",{children:Object(P.jsx)("p",{children:t})},t)})),this.props.node.outs&&this.props.node.outs.length>0&&this.props.node.outs.map((function(t){return Object(P.jsx)("div",{children:Object(P.jsx)("p",{children:t})},t)}))]})})]})}}]),n}(a.Component),V=n(30),G=n(33),q=n(22),J=n(10),U=n(17),Y=n(53),Q=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(D.a)(this,n),e.call(this,Object(V.a)({type:"default",width:t.width||3,color:t.color||"gray",selectedColor:t.selectedColor||"rgb(0,192,255)",curvyness:50},t))}return Object(N.a)(n,[{key:"calculateControlOffset",value:function(t){return t.getOptions().alignment===U.PortModelAlignment.RIGHT?[this.options.curvyness||0,0]:t.getOptions().alignment===U.PortModelAlignment.LEFT?[-(this.options.curvyness||0),0]:t.getOptions().alignment===U.PortModelAlignment.TOP?[0,-(this.options.curvyness||0)]:[0,this.options.curvyness||0]}},{key:"getSVGPath",value:function(){if(2===this.points.length){var t,e,n=new Y.BezierCurve;if(n.setSource(this.getFirstPoint().getPosition()),n.setTarget(this.getLastPoint().getPosition()),n.setSourceControl(this.getFirstPoint().getPosition().clone()),n.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort)(t=n.getSourceControl()).translate.apply(t,Object(I.a)(this.calculateControlOffset(this.getSourcePort())));if(this.targetPort)(e=n.getTargetControl()).translate.apply(e,Object(I.a)(this.calculateControlOffset(this.getTargetPort())));return n.getSVGCurve()}}},{key:"serialize",value:function(){return Object(V.a)(Object(V.a)({},Object(G.a)(Object(q.a)(n.prototype),"serialize",this).call(this)),{},{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor})}},{key:"deserialize",value:function(t){Object(G.a)(Object(q.a)(n.prototype),"deserialize",this).call(this,t),this.options.color=t.data.color,this.options.width=t.data.width,this.options.curvyness=t.data.curvyness,this.options.selectedColor=t.data.selectedColor}},{key:"setWidth",value:function(t){this.options.width=t,this.fireEvent({width:t},"widthChanged")}},{key:"setColor",value:function(t){this.options.color=t,this.fireEvent({color:t},"colorChanged")}}]),n}(U.LinkModel),X=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(t,i,o){return Object(D.a)(this,n),i&&(t={in:!!t,name:i,label:o}),t=t,e.call(this,Object(V.a)({label:t.label||t.name,alignment:t.in?U.PortModelAlignment.LEFT:U.PortModelAlignment.RIGHT,type:"default"},t))}return Object(N.a)(n,[{key:"deserialize",value:function(t){Object(G.a)(Object(q.a)(n.prototype),"deserialize",this).call(this,t),this.options.in=t.data.in,this.options.label=t.data.label}},{key:"serialize",value:function(){return Object(V.a)(Object(V.a)({},Object(G.a)(Object(q.a)(n.prototype),"serialize",this).call(this)),{},{in:this.options.in,label:this.options.label})}},{key:"canLinkToPort",value:function(t){return!0}},{key:"createLinkModel",value:function(){return new Q}}]),n}(U.PortModel),Z=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return Object(D.a)(this,n),"string"===typeof i&&(i={name:i,color:o}),(t=e.call(this,Object(V.a)({type:"default",name:"Untitled",color:"rgb(0,192,255)"},i))).portsIn=void 0,t.portsOut=void 0,t.extras=void 0,t.portsOut=[],t.portsIn=[],t}return Object(N.a)(n,[{key:"doClone",value:function(t,e){e.portsIn=[],e.portsOut=[],Object(G.a)(Object(q.a)(n.prototype),"doClone",this).call(this,t,e)}},{key:"removePort",value:function(t){Object(G.a)(Object(q.a)(n.prototype),"removePort",this).call(this,t),t.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(t),1):this.portsOut.splice(this.portsOut.indexOf(t),1)}},{key:"addPort",value:function(t){return Object(G.a)(Object(q.a)(n.prototype),"addPort",this).call(this,t),t.getOptions().in?-1===this.portsIn.indexOf(t)&&this.portsIn.push(t):-1===this.portsOut.indexOf(t)&&this.portsOut.push(t),t}},{key:"addInPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new X({in:!0,name:t,label:t,alignment:U.PortModelAlignment.LEFT});return e||this.portsIn.splice(0,0,n),this.addPort(n)}},{key:"addOutPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new X({in:!1,name:t,label:t,alignment:U.PortModelAlignment.RIGHT});return e||this.portsOut.splice(0,0,n),this.addPort(n)}},{key:"addExtras",value:function(t){return this.extras=t,this.extras}},{key:"deserialize",value:function(t){var e=this;Object(G.a)(Object(q.a)(n.prototype),"deserialize",this).call(this,t),this.options.name=t.data.name,this.options.color=t.data.color,this.portsIn=J.map(t.data.portsInOrder,(function(t){return e.getPortFromID(t)})),this.portsOut=J.map(t.data.portsOutOrder,(function(t){return e.getPortFromID(t)})),this.extras=t.data.extras}},{key:"serialize",value:function(){return Object(V.a)(Object(V.a)({},Object(G.a)(Object(q.a)(n.prototype),"serialize",this).call(this)),{},{name:this.options.name,color:this.options.color,portsInOrder:J.map(this.portsIn,(function(t){return t.getID()})),portsOutOrder:J.map(this.portsOut,(function(t){return t.getID()})),extras:this.extras})}},{key:"getInPorts",value:function(){return this.portsIn}},{key:"getOutPorts",value:function(){return this.portsOut}}]),n}(U.NodeModel),$=n(14),tt=n(63);!function(t){t.Container=F.default.div(W||(W=Object(M.a)(["\n\t\theight: 100%;\n\t\tbackground-color: ",";\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\tmin-height: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"])),(function(t){return t.background}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color})),t.Expand=Object(tt.css)(H||(H=Object(M.a)(["\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\theight: 100%;\n\t\t}\n\t"])))}(K||(K={}));var et=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(tt.Global,{styles:K.Expand}),Object(P.jsx)(K.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)",children:this.props.children})]})}}]),n}(a.Component),nt=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(t,i,o,r,a){var s,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];Object(D.a)(this,n),(s=e.call(this,{type:"MyEditable",name:t,color:i})).portsIn=[],s.portsOut=[],s.content=void 0,s.extras=void 0,s.selectableOptions=void 0,s.extras=o,r.forEach((function(t){s.addInPort(t)})),a.forEach((function(t){s.addOutPort(t)}));var l=!!c&&"userName",d="Condition"===t?t:a[0].substring(0,-1!==a[0].indexOf(" ")?a[0].indexOf(" "):a[0].length);switch(console.log("creating",d),d){case"bool":s.content={name:l,value:"true"},s.selectableOptions=["true","false"];break;case"port":s.content={name:l,value:"0"},s.selectableOptions=Array.from(Array(10).keys()).map((function(t){return t.toString()}));break;case"int":s.content={name:l,value:"0"},s.selectableOptions=["something","went wrong"];break;case"Condition":s.content={name:l,value:"=="},s.selectableOptions=["==","!=","<",">","<=",">=","<=>"];break;default:s.content={name:l,value:"value"},s.selectableOptions=["something","went wrong"]}return s}return Object(N.a)(n,[{key:"doClone",value:function(t,e){e.portsIn=[],e.portsOut=[],Object(G.a)(Object(q.a)(n.prototype),"doClone",this).call(this,t,e)}},{key:"removePort",value:function(t){Object(G.a)(Object(q.a)(n.prototype),"removePort",this).call(this,t),t.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(t),1):this.portsOut.splice(this.portsOut.indexOf(t),1)}},{key:"addPort",value:function(t){return Object(G.a)(Object(q.a)(n.prototype),"addPort",this).call(this,t),t.getOptions().in?-1===this.portsIn.indexOf(t)&&this.portsIn.push(t):-1===this.portsOut.indexOf(t)&&this.portsOut.push(t),t}},{key:"addInPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new X({in:!0,name:t,label:t,alignment:U.PortModelAlignment.LEFT});return e||this.portsIn.splice(0,0,n),this.addPort(n)}},{key:"addOutPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new X({in:!1,name:t,label:t,alignment:U.PortModelAlignment.RIGHT});return e||this.portsOut.splice(0,0,n),this.addPort(n)}},{key:"addExtras",value:function(t){return this.extras=t,this.extras}},{key:"deserialize",value:function(t){var e=this;Object(G.a)(Object(q.a)(n.prototype),"deserialize",this).call(this,t),this.options.name=t.data.name,this.options.color=t.data.color,this.portsIn=J.map(t.data.portsInOrder,(function(t){return e.getPortFromID(t)})),this.portsOut=J.map(t.data.portsOutOrder,(function(t){return e.getPortFromID(t)})),this.extras=t.data.extras,this.content=t.data.content,this.selectableOptions=t.data.selectableOptions}},{key:"serialize",value:function(){return Object(V.a)(Object(V.a)({},Object(G.a)(Object(q.a)(n.prototype),"serialize",this).call(this)),{},{name:this.options.name,color:this.options.color,portsInOrder:J.map(this.portsIn,(function(t){return t.getID()})),portsOutOrder:J.map(this.portsOut,(function(t){return t.getID()})),extras:this.extras,content:this.content,selectableOptions:this.selectableOptions})}},{key:"getInPorts",value:function(){return this.portsIn}},{key:"getOutPorts",value:function(){return this.portsOut}}]),n}(U.NodeModel),it=[{name:"Arduino Uno",color:"green",extras:{type:"controller",analogPorts:6,digitalPorts:14},ins:[],outs:["setup()","loop()"]},{name:"Arduino Nano",color:"green",extras:{type:"controller",analogPorts:6,digitalPorts:22},ins:[],outs:["setup()","loop()"]},{name:"Arduino Mega",color:"green",extras:{type:"controller",analogPorts:16,digitalPorts:54},ins:[],outs:["setup()","loop()"]},{name:"Arduino Leonardo",color:"green",extras:{type:"controller",analogPorts:12,digitalPorts:20},ins:[],outs:["setup()","loop()"]},{name:"Arduino Flora",color:"green",extras:{type:"controller",analogPorts:4,digitalPorts:8},ins:[],outs:["setup()","loop()"]},{name:"Digital I/O",color:"cyan",extras:{type:"built-in"},ins:["void digitalWrite(int pin, int value)","void pinMode(int pin, int mode)"],outs:["int digitalRead(int pin)"]},{name:"Analog I/O",color:"cyan",extras:{type:"built-in"},ins:["void analoglWrite(int pin, int value)","void pinMode(int pin, int mode)","void analogReference(int type)"],outs:[]},{name:"Time",color:"cyan",extras:{type:"built-in"},ins:["void delay(int ms)","void delayMicroseconds(int us)"],outs:["unsigned long micros()","unsigned long millis()"]},{name:"Math",color:"cyan",extras:{type:"built-in"},ins:["void delay(int ms)"],outs:["int abs(int x)","int constrain(int x, int a, int b)","int map(int value, int fromLow, int fromHigh, int toLow, int toHigh)","any? max(any x, any y)","any? min(any x, any y)","double pow(float base, float exponent)","double sq(any x)","double sqrt(any x)"]},{name:"Digital Port",color:"white",extras:{type:"port"},ins:[],outs:["port"]},{name:"Analog Port",color:"white",extras:{type:"port"},ins:[],outs:["port"]},{name:"Function",extras:{type:"logic"},color:"grey",outs:["call"],ins:["trigger"]},{name:"Condition",extras:{type:"logic"},color:"grey",outs:["True","False"],ins:["trigger","x","y"]},{name:"Loop",extras:{type:"logic"},color:"grey",outs:["True","False"],ins:["startValue","stopValue"]},{name:"Led",color:"red",extras:{type:"component",library:"Setter.h"},ins:["setValue()"],outs:[]},{name:"Temperature Sensor",color:"blue",extras:{type:"component",library:"Getter.h"},ins:[],outs:["getValue()"]},{name:"TwoWire Interface",color:"blue",extras:{type:"component",library:"Wire.h"},ins:["void begin()","void beginTransmission()","void setClock()","void onReceive()","void onRequest()"],outs:["byte requestFrom()","byte endTransmission()","byte write()","byte available()","byte read()"]},{name:"Button",color:"blue",extras:{type:"component",library:"Getter.h"},ins:["setValue(bool)"],outs:[]},{name:"PWM Servo",color:"orange",extras:{type:"component",library:"Adafruit_PWMServoDriver.h"},ins:["void begin(uint8_t prescale=0)","void sleep()","void wakeup()","void setExtClk(uint8_t prescale)","void setPWMFreq(float freq)","void setOutputMode(bool totempole)","void setPWM(uint8_t num, uint16_t on, uint16_t off)","void setPin(uint8_t num, uint16_t val, bool invert=false)","void writeMicroseconds(uint8_t num, uint16_t Microseconds)","void setOscillatorFrequency(uint32_t freq)"],outs:["uint8_t getPWM(uint8_t num)","uint8_t readPrescale()","uint32_t getOscillatorFrequency()"]},{name:"Servo",color:"orange",extras:{type:"component",library:"Servo.h"},ins:["void detach()","void write(int)","void writeMicroseconds(int)"],outs:["uint8_t attach(int)","uint8_t attach(int, int, int)","int read()","int readMicroseconds()","bool attached()"]},{name:"Stepper",color:"orange",extras:{type:"component",library:"Stepper.h"},ins:["Stepper(int, int, int)","Stepper(int, int, int, int, int)","Stepper(int, int, int, int, int, int)","void setSpeed(long whatSpeed)","void step(int number_of_steps)"],outs:["int version(void)"]},{name:"Variable Integer",color:"pink",extras:{type:"variable"},ins:["void setValue(int)"],outs:["int getValue()"]},{name:"Variable Boolean",color:"pink",extras:{type:"variable"},ins:["void setValue(bool)"],outs:["bool"]},{name:"Constant Integer",color:"pink",extras:{type:"constant"},ins:[],outs:["int"]},{name:"Constant Boolean",color:"pink",extras:{type:"constant"},ins:[],outs:["bool"]}],ot=n(194),rt=n.n(ot),at=(n(466),n(262)),st=n(418),ct=function(){var t=Object(a.useRef)(null),e=Object(a.useState)(""),n=Object(r.a)(e,2),i=n[0],o=n[1],c=Object(a.useCallback)((function(t){o(t.slice(0,-1))}),[]);return Object(st.a)(t,c,{disabled:!1,indentation:2}),Object(P.jsx)(at.a,Object(V.a)(Object(V.a)({},at.b),{},{code:i,language:"jsx",children:function(e){var n=e.className,i=e.style,o=e.tokens,r=(e.getLineProps,e.getTokenProps);return Object(P.jsx)("pre",{className:n,style:i,ref:t,children:o.map((function(t,e){return Object(P.jsxs)(s.a.Fragment,{children:[t.filter((function(t){return!t.empty})).map((function(t,e){return Object(P.jsx)("span",Object(V.a)({},r({token:t,key:e})))})),"\n"]},e)}))})}}))};function lt(t){var e=t.model,n="Initializing Generator";if("{}"===e||""===e);else try{n=function(t){var e="";if(0===Object.keys(t).length)return"// Empty Diagram!";var n=[];Object.entries(t.layers[0].models).forEach((function(t){n.push(t[1])}));var i=[],o=[],r=[],a=[],s=[],c=[],l=[],d=[];if(Object.entries(t.layers[1].models).forEach((function(t){var e=t[1];switch(i.push(e),e.extras.type){case"component":e.instance=e.name.toLowerCase().replace(" ","")+r.filter((function(t){return t.extras.library===e.extras.library})).length,r.push(e),s.includes(e.extras.library)||s.push(e.extras.library);break;case"controller":a.push(e);break;case"logic":o.push(e);break;case"variable":break;case"constant":e.content.name=e.content.name.toUpperCase(),c.push(e)}})),0===i.length)return"// You need at least one Node!";if(0===a.length)return"// You need an Arduino!";if(a.length>1)return"// Only one Arduino allowed!";var u=a[0],p=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){e+=t})),e+="\n"},h=function(){for(var t="",n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];i.forEach((function(e){t+=e})),e=t+"\n"+e},b=function(t){return n.find((function(e){return e.id===t}))},g=function(t,e){try{return i.find((function(e){return e.id===t})).ports.find((function(t){return t.id===e}))}catch(n){return"// Loose end"}},j=function(t){return i.find((function(e){return e.id===t}))},O=function(t,e){try{var n=t.ports.find((function(t){return t.name===e})).links[0],i=b(n),o=g(i.source,i.sourcePort),r=f(o);return["variable","port"].includes(r.extras.type)?r.content.value:["component"].includes(r.extras.type)?r.instance+"."+o.name:p("Unknown extras.type")}catch(a){return"/* Lacking Value */"}},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"True";try{var n=t.ports.find((function(t){return t.name===e})).links[0],i=b(n);return g(i.target,i.targetPort)}catch(o){return{label:"// Lacking Outcome"}}},f=function(t){return i.find((function(e){return e.id===t.parentNode}))},v=function(t){var e=t.substring(t.indexOf(" ")+1,-1!==t.indexOf("(")?t.indexOf("("):t.length),n=t.substring(t.indexOf("("),t.indexOf(")")-1).split(","),i=e;return n.forEach((function(t){if(!t.includes("=")){var e=String(t.split(" ").slice(-1));i+=e}})),i},x=function t(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];"constant"===e.extras.type?i.push(e.content.name):i.push(e.content.value),e.ports.forEach((function(n){n.links.forEach((function(n){var o=b(n),r=g(o.target,o.targetPort),a=j(r.parentNode);a.id===e.id||("built-in"===a.extras.type?p(v(r.name.split("(").shift())+"("+i+");"):a.instance?p(a.instance+"."+v(r.name.split("(").shift())+"("+i+");"):t.apply(void 0,[a].concat(i)))}))}))},y=function(t){var e,n=b(t),i=g(n.target,n.targetPort),o=j(i.parentNode),r=g(n.source,n.sourcePort),a=j(r.parentNode);if("built-in"===(null===o||void 0===o||null===(e=o.extras)||void 0===e?void 0:e.type))p(v(i.name)+"()");else if("Function"===(null===o||void 0===o?void 0:o.name))p(o.content.value,"(",");");else if("Condition"===(null===o||void 0===o?void 0:o.name)){var s=O(o,"x"),c=O(o,"y"),u=m(o),h=f(u),y=m(o,"False"),k=f(y);p("if (",s," "+o.content.value+" ",c,") {"),h?x(h):p("/* Lacking code to be executed if conditional is true */"),k&&(p("} else {"),x(k)),p("}\n")}else{var P,C;["variable","constant"].includes(null===o||void 0===o||null===(P=o.extras)||void 0===P?void 0:P.type)?(console.log("varr"),x(o)):["port"].includes(null===o||void 0===o||null===(C=o.extras)||void 0===C?void 0:C.type)?(console.log("found port",o),o.name.includes("Digital")?(console.log("it was digital"),l.push(o.content.value)):(console.log("it was analog"),d.push(o.content.value)),x(o)):(null===o||void 0===o?void 0:o.instance)?p(o.instance+"."+v(i.name)+"()"):p(a.instance+"."+v(r.name)+"()")}};return s.length>0&&(p("// Libraries"),s.forEach((function(t){p("#include <"+t+">")})),p(""),p("// Objects"),s.forEach((function(t){r.forEach((function(e){e.extras.library===t&&p(e.name+" "+e.instance)}))}))),o.filter((function(t){return"Function"===t.name})).length>0&&(p("// Functions"),o.forEach((function(t){"Function"===t.name&&(p("void ",t.content.value,"() {"),t.ports.find((function(t){return"right"===t.alignment})).links.forEach((function(t){y(t)})),p("}"))}))),c.length>0&&(p("// Constants"),c.forEach((function(t){p("#define ".concat(t.content.name," ").concat(t.content.value," //").concat(t.name))})),p("")),p("// Micro-controller's Lifecycle"),u.ports.forEach((function(t){p("void ",t.label,"{"),t.links.forEach((function(t){y(t)})),p("}\n")})),h(""),h("Digital ports ".concat(l.length,"/").concat(u.extras.digitalPorts," ").concat(l.length>0?"(".concat(l,")"):""),"*/"),h("Analog ports ".concat(d.length,"/").concat(u.extras.analogPorts," ").concat(d.length>0?"(".concat(d,")"):""," ")),h("/* Code generated for ",u.name),function(t){var e=[],n=0;return t.split("\n").forEach((function(t){t.includes("}")&&n--,e.push("    ".repeat(n)+t),t.includes("{")&&n++})),e.join("\n")}(e)}(JSON.parse(e))}catch(i){console.log("erro",i)}return Object(a.useEffect)((function(){rt.a.highlightAll()}),[t]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{className:"Code",children:Object(P.jsx)("pre",{children:Object(P.jsx)("code",{className:"language-clike",children:n})})}),Object(P.jsx)(ct,{})]})}var dt,ut,pt,ht,bt,gt=n(750),jt=n(467).default;function Ot(t){var e=Object(a.useState)("{}"),n=Object(r.a)(e,2),i=n[0],o=n[1],s=a.useState(!1),c=Object(r.a)(s,2),l=c[0],d=c[1],u=t.app.getDiagramEngine().getModel().serialize(),p=JSON.stringify(u),h=Object(I.a)(new Set(it.map((function(t){return t.extras.type}))));return p!==i&&o(p),Object(P.jsxs)("div",{className:"float-container",children:[Object(P.jsx)("div",{className:"float-child-left",children:Object(P.jsx)(bt.Body,{children:Object(P.jsxs)(bt.Content,{style:{width:"100%",height:"100%"},children:[Object(P.jsxs)("div",{children:[Object(P.jsx)(jt,{speed:1,className:"area",contentClassName:"content",horizontal:!1,style:{height:"88vh"},smoothScrolling:!0,verticalScrollbarStyle:{backgroundColor:"white"},children:h.map((function(t){return Object(P.jsxs)("div",{style:{border:"dashed white 1px",marginBottom:"20px"},children:[Object(P.jsxs)("h6",{style:{margin:"0px 0px 0px 0px"},children:[t+"s",":"]}),it.filter((function(e){return e.extras.type===t})).map((function(t){return Object(P.jsx)(R,{node:t},t.name)}))]},t)}))}),Object(P.jsxs)("div",{style:{marginBottom:"0px"},children:[Object(P.jsx)(gt.a,{variant:"contained",size:"small",onClick:function(){localStorage.setItem("model",JSON.stringify(u)),console.log("Saved")},children:"Save"}),Object(P.jsx)(gt.a,{variant:"contained",size:"small",onClick:function(){t.app.getActiveDiagram().deserializeModel(JSON.parse(localStorage.getItem("model")||"{}"),t.app.getDiagramEngine()),console.log("Loaded"),o(p),setTimeout((function(){d(!l)}),10)},children:"Load"})]})]}),Object(P.jsx)(bt.Layer,{onDrop:function(e){var n=JSON.parse(e.dataTransfer.getData("storm-diagram-node"));if(n){var i={};"variable"===n.extras.type||"constant"===n.extras.type?i=new nt(n.name,n.color,n.extras,n.ins,n.outs):"port"===n.extras.type||"logic"===n.extras.type?i=new nt(n.name,n.color,n.extras,n.ins,n.outs,!1):((i=new Z(n.name,n.color)).extras=n.extras,n.outs.forEach((function(t){i.addOutPort(t)})),n.ins.forEach((function(t){i.addInPort(t)}))),i.setPosition(t.app.getDiagramEngine().getRelativeMousePoint(e)),t.app.getDiagramEngine().getModel().addNode(i)}d(!l)},onDragOver:function(t){t.preventDefault()},onClick:function(t){d(!l)},children:Object(P.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(P.jsx)(et,{children:Object(P.jsx)($.CanvasWidget,{engine:t.app.getDiagramEngine()})})})})]})})}),Object(P.jsx)("div",{className:"float-child-right",children:Object(P.jsx)(lt,{model:i})})]})}!function(t){t.Body=F.default.div(dt||(dt=Object(M.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%;\n\t"]))),t.Header=F.default.div(ut||(ut=Object(M.a)(["\n\t\tdisplay: flex;\n\t\tbackground: rgb(30, 30, 30);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial, sans-serif;\n\t\tpadding: 10px;\n\t\talign-items: center;\n\t"]))),t.Content=F.default.div(pt||(pt=Object(M.a)(["\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]))),t.Layer=F.default.div(ht||(ht=Object(M.a)(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"])))}(bt||(bt={}));var mt,ft,vt=a.memo(Ot),xt=n(86),yt=n.n(xt),kt=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(D.a)(this,n),(t=e.call(this,Object(V.a)(Object(V.a)({},i),{},{type:"editable-label"}))).value=void 0,t.value=i.value||"",t}return Object(N.a)(n,[{key:"serialize",value:function(){return Object(V.a)(Object(V.a)({},Object(G.a)(Object(q.a)(n.prototype),"serialize",this).call(this)),{},{value:this.value})}},{key:"deserialize",value:function(t){Object(G.a)(Object(q.a)(n.prototype),"deserialize",this).call(this,t),this.value=t.data.value}}]),n}(xt.LabelModel),Pt=n(419);!function(t){t.Label=F.default.div(mt||(mt=Object(M.a)(["\n\t\tuser-select: none;\n\t\tpointer-events: auto;\n\t"])))}(ft||(ft={}));var Ct,wt,Et,St,Mt,It,Dt=function(t){var e=a.useState(t.model.value),n=Object(r.a)(e,2),i=n[0],o=n[1];return Object(P.jsxs)(ft.Label,{children:[Object(P.jsx)("input",{value:i,onChange:function(e){var n=e.target.value;o(n),t.model.value=n}}),Object(P.jsx)("button",{onClick:function(){return Object(Pt.action)("model eventDidFire")("You clicked the button")},children:"Click me!"})]})},Nt=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){return Object(D.a)(this,n),e.call(this,"editable-label")}return Object(N.a)(n,[{key:"generateModel",value:function(){return new kt}},{key:"generateReactWidget",value:function(t){return Object(P.jsx)(Dt,{model:t.model})}}]),n}($.AbstractReactFactory),_t=n(103),At=(n(721),n(421)),Tt=n.n(At),Ft=function(t){var e=t.content,n=t.onChange,i=t.onBlurOrEnter;return Object(P.jsx)(Tt.a,{autoFocus:!0,inputStyle:{padding:1,borderStyle:"dotted",borderWidth:1,borderColor:"black"},type:"text",value:e,onChange:n,onBlur:i,onKeyDown:function(t){13===t.keyCode&&i()}})},zt=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(t){var i;return Object(D.a)(this,n),(i=e.call(this,t)).state={},i}return Object(N.a)(n,[{key:"render",value:function(){return Object(P.jsx)("div",{children:this.props.beingEdited&&this.props.editingKey===this.props.elementKey?Object(P.jsx)(Ft,{content:this.props.content,onChange:this.props.onChange,onBlurOrEnter:this.props.onBlurOrEnter}):Object(P.jsx)("p",{style:{margin:0,padding:0,fontStyle:this.props.isAbstract?"italic":"normal"},children:this.props.content})})}}]),n}(a.Component),Lt=function(t){var e=t.content,n=t.onChange,i=t.onBlurOrEnter,o=t.options;return Object(P.jsx)("select",{name:"values",id:"values",value:e,onChange:n,onBlur:i,children:o.map((function(t,e){return Object(P.jsx)("option",{children:t},e)}))})},Bt=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(t){var i;return Object(D.a)(this,n),(i=e.call(this,t)).state={},i}return Object(N.a)(n,[{key:"render",value:function(){return Object(P.jsx)("div",{children:this.props.beingEdited&&this.props.editingKey===this.props.elementKey?Object(P.jsx)(Lt,{content:this.props.content,onChange:this.props.onChange,onBlurOrEnter:this.props.onBlurOrEnter,options:this.props.options}):Object(P.jsx)("p",{style:{margin:0,padding:0,fontStyle:this.props.isAbstract?"italic":"normal"},children:this.props.content})})}}]),n}(a.Component);!function(t){t.Node=F.default.div(Ct||(Ct=Object(M.a)(["\n\t\tbackground-color: ",";\n\t\tborder-radius: 5px;\n\t\tfont-family: sans-serif;\n\t\tcolor: white;\n\t\tborder: solid 2px black;\n\t\toverflow: visible;\n\t\tfont-size: 11px;\n\t\tborder: solid 2px ",";\n\t"])),(function(t){return t.background}),(function(t){return t.selected?"rgb(0,192,255)":"black"})),t.Title=F.default.div(wt||(wt=Object(M.a)(["\n\t\tbackground: rgba(0, 0, 0, 0.3);\n\t\tdisplay: flex;\n\t\twhite-space: nowrap;\n\t\tjustify-items: center;\n\t"]))),t.TitleName=F.default.div(Et||(Et=Object(M.a)(["\n\t\tflex-grow: 1;\n\t\tpadding: 5px 5px;\n\t"]))),t.Ports=F.default.div(St||(St=Object(M.a)(["\n\t\tdisplay: flex;\n\t\tbackground-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));\n\t"]))),t.PortsContainer=F.default.div(Mt||(Mt=Object(M.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t&:first-of-type {\n\t\t\tmargin-right: 10px;\n\t\t}\n\n\t\t&:only-child {\n\t\t\tmargin-right: 0px;\n\t\t}\n\t"])))}(It||(It={}));var Wt=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(t){var i;return Object(D.a)(this,n),(i=e.call(this,t)).divElement=void 0,i.generatePort=function(t){return Object(P.jsx)(xt.DefaultPortLabel,{engine:i.props.engine,port:t},t.getID())},i._editableObjectDoubleClick=function(t){i.state.editingSomething||i.setState({editingSomething:!0,editingKey:t})},i._contentOnChange=function(t){i.props.nodeModel.content[i.state.editingKey]=t.currentTarget.value,i.setState({content:t.currentTarget.value})},i._onBlurOrEnter=function(){i.setState({editingSomething:!1,editingKey:""})},i.state={content:{name:"",value:""},variableType:"",editingSomething:!1,editingKey:""},i._editableObjectDoubleClick=i._editableObjectDoubleClick.bind(Object(_t.a)(i)),i._contentOnChange=i._contentOnChange.bind(Object(_t.a)(i)),i._onBlurOrEnter=i._onBlurOrEnter.bind(Object(_t.a)(i)),i}return Object(N.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({content:this.props.nodeModel.content})}},{key:"render",value:function(){var t=this;return Object(P.jsxs)(It.Node,{"data-default-node-name":this.props.nodeModel.getOptions().name,selected:this.props.nodeModel.isSelected(),background:this.props.nodeModel.getOptions().color,children:[Object(P.jsxs)(It.Title,{children:[this.props.nodeModel.content.name&&Object(P.jsx)("div",{className:"editable-node",ref:function(e){return t.divElement=e},children:Object(P.jsx)("div",{className:"editable-border",children:Object(P.jsx)("div",{className:"editable-header",children:Object(P.jsx)("div",{onDoubleClick:function(){t._editableObjectDoubleClick("name")},children:Object(P.jsx)(zt,{elementKey:"name",editingKey:this.state.editingKey,beingEdited:this.state.editingSomething,content:this.props.nodeModel.content.name,onChange:this._contentOnChange,onBlurOrEnter:this._onBlurOrEnter})})})})}),Object(P.jsxs)(It.TitleName,{children:[this.props.nodeModel.getOptions().name,":"]}),Object(P.jsx)("div",{className:"editable-node",ref:function(e){return t.divElement=e},children:Object(P.jsx)("div",{className:"editable-border",children:Object(P.jsx)("div",{className:"editable-header",children:Object(P.jsx)("div",{onDoubleClick:function(){t._editableObjectDoubleClick("value")},children:"bool"===this.props.nodeModel.portsOut[0].options.name||"port"===this.props.nodeModel.portsOut[0].options.name||"Condition"===this.props.nodeModel.getOptions().name?Object(P.jsx)(Bt,{elementKey:"value",options:this.props.nodeModel.selectableOptions,editingKey:this.state.editingKey,beingEdited:this.state.editingSomething,content:this.props.nodeModel.content.value,onChange:this._contentOnChange,onBlurOrEnter:this._onBlurOrEnter}):Object(P.jsx)(zt,{elementKey:"value",editingKey:this.state.editingKey,beingEdited:this.state.editingSomething,content:this.props.nodeModel.content.value,onChange:this._contentOnChange,onBlurOrEnter:this._onBlurOrEnter})})})})})]}),Object(P.jsxs)(It.Ports,{children:[Object(P.jsx)(It.PortsContainer,{children:_.map(this.props.nodeModel.getInPorts(),this.generatePort)}),Object(P.jsx)(It.PortsContainer,{children:_.map(this.props.nodeModel.getOutPorts(),this.generatePort)})]})]})}}]),n}(a.Component),Ht=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){return Object(D.a)(this,n),e.call(this,"MyEditable")}return Object(N.a)(n,[{key:"generateModel",value:function(t){return new nt("name","pink","test",["t"],["t"])}},{key:"generateReactWidget",value:function(t){return Object(P.jsx)(Wt,{nodeModel:t.model,engine:this.engine})}}]),n}($.AbstractReactFactory),Kt=function(){function t(){Object(D.a)(this,t),this.activeModel=void 0,this.diagramEngine=void 0,this.diagramEngine=yt.a(),this.diagramEngine.getLabelFactories().registerFactory(new Nt),this.diagramEngine.getNodeFactories().registerFactory(new Ht),this.newModel()}return Object(N.a)(t,[{key:"newModel",value:function(){this.activeModel=new xt.DiagramModel,this.diagramEngine.setModel(this.activeModel)}},{key:"getActiveDiagram",value:function(){return this.activeModel}},{key:"getDiagramEngine",value:function(){return this.diagramEngine}}]),t}();function Rt(){var t=new Kt;return Object(P.jsx)(vt,{app:t})}var Vt=n.p+"static/media/flow.43bedc99.svg",Gt=n.p+"static/media/cym_s.cbee123b.svg";function qt(){return Object(P.jsxs)("div",{children:[Object(P.jsx)("h2",{children:"Welcome to MDD4CPS!"}),Object(P.jsx)("img",{src:Vt,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"100%"}}),Object(P.jsx)("img",{src:Gt,alt:"CYM-S",style:{maxHeight:"80vh",maxWidth:"100%"}})]})}var Jt=n.p+"static/media/cym_s_extended.79a380b4.svg",Ut=n.p+"static/media/cym_d.8652356e.svg";function Yt(){return Object(P.jsxs)("div",{children:[Object(P.jsx)("img",{src:Jt,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"100%"}}),Object(P.jsx)("img",{src:Ut,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"90%"}})]})}var Qt=n.p+"static/media/transformations.40b625af.png";function Xt(){return Object(P.jsx)("div",{children:Object(P.jsx)("img",{src:Qt,alt:"Transformations",style:{maxHeight:"80vh",maxWidth:"90%"}})})}function Zt(){return Object(a.useEffect)((function(){rt.a.highlightAll()}),[]),Object(P.jsx)("div",{children:it.map((function(t){return Object(P.jsxs)("div",{className:"grid-container",style:{display:"grid",gridTemplateColumns:" 1fr 1fr",gridGap:"20px"},children:[Object(P.jsx)("pre",{className:"grid-child ",children:Object(P.jsx)("code",{className:"language-clike",children:JSON.stringify(t,null,"\t")})}),Object(P.jsx)("div",{className:"grid-child",children:Object(P.jsxs)("div",{style:{maxWidth:"400px",border:"solid",fontSize:".9em",color:"black",margin:"60px 0px 25px 0",backgroundColor:"lightgrey"},children:[Object(P.jsx)("div",{style:{width:"100%",borderBottom:"solid 3px",fontSize:"1.2em"},children:t.name}),t.extras.library&&Object(P.jsxs)("div",{style:{width:"100%",borderBottom:"solid 2px"},children:["Library=",t.extras.library]}),t.ins&&t.ins.length>0&&t.ins.map((function(t){return Object(P.jsx)("div",{children:Object(P.jsx)("p",{children:t})},t)})),t.outs&&t.outs.length>0&&t.outs.map((function(t){return Object(P.jsx)("div",{children:Object(P.jsx)("p",{children:t})},t)}))]})})]},t.name)}))})}function $t(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h3",{children:"Planned Settings"}),Object(P.jsxs)("ul",{children:[Object(P.jsx)("li",{children:"Show/Hide copy button on code panel"}),Object(P.jsx)("li",{children:"Show/Hide all comments"}),Object(P.jsx)("li",{children:"Show/Hide all warnings"}),Object(P.jsx)("li",{children:"Show/Hide diagram overlay"}),Object(P.jsx)("li",{children:"Show/Hide palette expansion panels"}),Object(P.jsx)("li",{}),Object(P.jsx)("li",{children:"Enable code editing"}),Object(P.jsx)("li",{}),Object(P.jsx)("li",{children:"Enforce typings"}),Object(P.jsx)("li",{children:"Enforce lose ends"}),Object(P.jsx)("li",{children:"Enforce sequencial port usage"}),Object(P.jsx)("li",{children:"Remove link restrictions"}),Object(P.jsx)("li",{}),Object(P.jsx)("li",{children:"Reset all settings on this page"}),Object(P.jsx)("li",{children:"Reset custom palette"}),Object(P.jsx)("li",{children:"Erase all localStorage data"}),Object(P.jsx)("li",{}),Object(P.jsx)("li",{children:"Contact info"})]})]})}function te(){return Object(P.jsx)("div",{className:"App",children:Object(P.jsxs)("header",{className:"App-header",children:[Object(P.jsxs)(S.c,{children:[Object(P.jsx)(S.a,{path:"/mdd4/",element:Object(P.jsx)(qt,{})}),Object(P.jsx)(S.a,{path:"/mdd4/models",element:Object(P.jsx)(Yt,{})}),Object(P.jsx)(S.a,{path:"/mdd4/transformations",element:Object(P.jsx)(Xt,{})}),Object(P.jsx)(S.a,{path:"/mdd4/palette",element:Object(P.jsx)(Zt,{})}),Object(P.jsx)(S.a,{path:"/mdd4/editor",element:Object(P.jsx)(Rt,{})}),Object(P.jsx)(S.a,{path:"/mdd4/settings",element:Object(P.jsx)($t,{})})]}),Object(P.jsx)(C,{})]})})}o.a.render(Object(P.jsx)(c.a,{children:Object(P.jsx)(te,{})}),document.getElementById("root"))}},[[723,1,2]]]);
//# sourceMappingURL=main.1769d698.chunk.js.map