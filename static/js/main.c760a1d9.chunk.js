(this.webpackJsonpmdd4iot=this.webpackJsonpmdd4iot||[]).push([[0],{268:function(t,e,n){},269:function(t,e,n){},508:function(t,e,n){"use strict";n.r(e);var r=n(64),a=n.n(r),o=(n(268),n(66)),i=(n(269),n(0)),c=n(528),s=n(529),l=n(256),d=n.n(l),u=n(259),j=n.n(u),f=n(257),p=n.n(f),b=n(258),h=n.n(b),g=n(530),O=n(260),m=n.n(O),x=n(20),v=Object(x.b)({}),y=n(2);function w(){var t=Object(i.useState)("/"),e=Object(o.a)(t,2),n=e[0],r=e[1],a=v.location.pathname;return n!==a&&r(a),Object(y.jsx)(g.a,{position:"fixed",color:"primary",style:{top:"auto",bottom:0},children:Object(y.jsxs)(c.a,{value:n,onChange:function(t,e){r(e),v.push(e)},showLabels:!0,children:["location.pathname",Object(y.jsx)(s.a,{label:"Home",value:"/",icon:Object(y.jsx)(d.a,{})}),Object(y.jsx)(s.a,{label:"Models",value:"/models",icon:Object(y.jsx)(p.a,{})}),Object(y.jsx)(s.a,{label:"State",value:"/state",icon:Object(y.jsx)(h.a,{})}),Object(y.jsx)(s.a,{label:"Editor",value:"/editor",icon:Object(y.jsx)(j.a,{})}),Object(y.jsx)(s.a,{label:"Palette",value:"/palette",icon:Object(y.jsx)(m.a,{})})]})})}var D=n(14),k=Object(i.createContext)({model:{},setModel:function(t){}}),M=n(261),P=n.n(M);n(278);function N(t){var e="",n=[];Object.entries(t.layers[0].models).forEach((function(t){n.push(t[1])}));var r=[];Object.entries(t.layers[1].models).forEach((function(t){r.push(t[1])}));var a=r.find((function(t){return"Arduino"===t.name})),o=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e+=t})),e+="\n"},i=function(t){return n.find((function(e){return e.id===t}))},c=function(t,e){return r.find((function(e){return e.id===t})).ports.find((function(t){return t.id===e}))};return a.ports.forEach((function(t){o(t.label,"{\n"),t.links.forEach((function(t){var e,n=i(t),a=c(n.target,n.targetPort),s=(e=a.parentNode,r.find((function(t){return t.id===e})));if("Condition"===s.name){var l=function(t){var e=t.ports.find((function(t){return"value"===t.name})).links[0],n=i(e);return c(n.source,n.sourcePort)}(s),d=function(t){var e=t.ports.find((function(t){return"True"===t.name})).links[0],n=i(e);return c(n.target,n.targetPort)}(s);o("if (",l.name,a.name.replace("if",""),") {"),o(d.label),o("}\n")}})),o("}\n")})),function(t){var e=[],n=0;return t.split("\n").forEach((function(t){t.includes("}")&&n--,e.push("    ".repeat(n)+t),t.includes("{")&&n++})),e.join("\n")}(e)}function E(){var t=Object(i.useState)("Hello World"),e=Object(o.a)(t,2),n=e[0],r=e[1];return Object(i.useEffect)((function(){P.a.highlightAll(),setInterval((function(){try{r(N(JSON.parse(localStorage.getItem("model")||"{}")))}catch(t){console.log(t)}}),5e3)}),[]),Object(y.jsx)("div",{className:"Code",children:Object(y.jsx)("pre",{className:"line-numbers",children:Object(y.jsx)("code",{className:"language-clike",children:n})})})}var C,A,S=n(31),T=n(38),I=n(39),L=n(51),H=n(50),J=n(8),W=n(13);(A||(A={})).Tray=W.default.div(C||(C=Object(S.a)(["\n\t\tmin-width: 200px;\n\t\tbackground: rgb(20, 20, 20);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t"])));var B,V,F=function(t){Object(L.a)(n,t);var e=Object(H.a)(n);function n(){return Object(T.a)(this,n),e.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){return Object(y.jsx)(A.Tray,{children:this.props.children})}}]),n}(i.Component);!function(t){t.Tray=W.default.div(B||(B=Object(S.a)(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tpadding: 5px;\n\t\tmargin: 0px 10px;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 5px;\n\t\tmargin-bottom: 2px;\n\t\tcursor: pointer;\n\t"])),(function(t){return t.color}))}(V||(V={}));var z,R,G,U=function(t){Object(L.a)(n,t);var e=Object(H.a)(n);function n(){return Object(T.a)(this,n),e.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){var t=this;return Object(y.jsx)(V.Tray,{color:this.props.color||"red",draggable:!0,onDragStart:function(e){e.dataTransfer.setData("storm-diagram-node",JSON.stringify(t.props.model))},className:"tray-item",children:this.props.name})}}]),n}(i.Component),q=n(21),K=n.n(q),Q=n(9),X=n(57);!function(t){t.Container=W.default.div(z||(z=Object(S.a)(["\n\t\theight: 100%;\n\t\tbackground-color: ",";\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\tmin-height: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"])),(function(t){return t.background}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color})),t.Expand=Object(X.css)(R||(R=Object(S.a)(["\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\theight: 100%;\n\t\t}\n\t"])))}(G||(G={}));var Y,Z,$,_,tt,et=function(t){Object(L.a)(n,t);var e=Object(H.a)(n);function n(){return Object(T.a)(this,n),e.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(X.Global,{styles:G.Expand}),Object(y.jsx)(G.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)",children:this.props.children})]})}}]),n}(i.Component);!function(t){t.Body=W.default.div(Y||(Y=Object(S.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%;\n\t"]))),t.Header=W.default.div(Z||(Z=Object(S.a)(["\n\t\tdisplay: flex;\n\t\tbackground: rgb(30, 30, 30);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial, sans-serif;\n\t\tpadding: 10px;\n\t\talign-items: center;\n\t"]))),t.Content=W.default.div($||($=Object(S.a)(["\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]))),t.Layer=W.default.div(_||(_=Object(S.a)(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"])))}(tt||(tt={}));var nt=function(t){Object(L.a)(n,t);var e=Object(H.a)(n);function n(){return Object(T.a)(this,n),e.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){var t=this;return Object(y.jsx)(tt.Body,{children:Object(y.jsxs)(tt.Content,{style:{width:"100%",height:"100%"},children:[Object(y.jsxs)(F,{children:[Object(y.jsx)(U,{model:{type:"Arduino"},name:"Arduino",color:"green"}),Object(y.jsx)(U,{model:{type:"Condition"},name:"Condition",color:"grey"}),Object(y.jsx)(U,{model:{type:"LED"},name:"LED",color:"red"}),Object(y.jsx)(U,{model:{type:"TemperatureSensor"},name:"TemperatureSensor",color:"blue"})]}),Object(y.jsx)(tt.Layer,{onDrop:function(e){var n=JSON.parse(e.dataTransfer.getData("storm-diagram-node")),r=(J.keys(t.props.app.getDiagramEngine().getModel().getNodes()).length,null);"Arduino"===n.type?((r=new q.DefaultNodeModel("Arduino","green")).addOutPort("setup()"),r.addOutPort("loop()")):"Condition"===n.type?((r=new q.DefaultNodeModel("Condition","grey")).addInPort("if <= 20"),r.addInPort("value"),r.addOutPort("True")):"LED"===n.type?(r=new q.DefaultNodeModel("Led","red")).addInPort("setValue()"):"TemperatureSensor"===n.type&&(r=new q.DefaultNodeModel("TemperatureSensor","Blue")).addOutPort("getValue()");var a=t.props.app.getDiagramEngine().getRelativeMousePoint(e);r.setPosition(a),t.props.app.getDiagramEngine().getModel().addNode(r),t.forceUpdate()},onDragOver:function(t){t.preventDefault()},children:Object(y.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(y.jsx)(et,{children:Object(y.jsx)(Q.CanvasWidget,{engine:this.props.app.getDiagramEngine()})})})})]})})}}]),n}(i.Component),rt=function(){function t(){Object(T.a)(this,t),this.activeModel=void 0,this.diagramEngine=void 0,this.diagramEngine=K.a(),this.newModel()}return Object(I.a)(t,[{key:"newModel",value:function(){this.activeModel=new q.DiagramModel,this.diagramEngine.setModel(this.activeModel)}},{key:"getActiveDiagram",value:function(){return this.activeModel}},{key:"getDiagramEngine",value:function(){return this.diagramEngine}}]),t}(),at=function(){var t=new rt;return Object(y.jsx)(nt,{app:t})};function ot(){return Object(y.jsxs)("div",{className:"float-container",children:[Object(y.jsx)("div",{className:"float-child-left",children:Object(y.jsx)(at,{})}),Object(y.jsx)("div",{className:"float-child-right",children:Object(y.jsx)(E,{})})]})}function it(){return Object(y.jsx)("div",{children:Object(y.jsx)("h2",{children:"Welcome to MDD4IoT!"})})}var ct=n.p+"static/media/models.435be54c.png";function st(){return Object(y.jsx)("div",{children:Object(y.jsx)("img",{src:ct,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"100%"}})})}var lt=n.p+"static/media/state.da9f951e.png";function dt(){return Object(y.jsx)("div",{children:Object(y.jsx)("img",{src:lt,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"90%"}})})}function ut(){var t=K()(),e=function(){var t=new q.DiagramModel,e=new q.DefaultNodeModel("Arduino","green"),n=e.addOutPort("setup()");e.addOutPort("loop()"),e.setPosition(50,70);var r=new q.DefaultNodeModel("Condition","grey"),a=r.addInPort("if <= 20"),o=r.addInPort("value"),i=r.addOutPort("True");r.addOutPort("False"),r.setPosition(230,100);var c=new q.DefaultNodeModel("Led","red"),s=c.addInPort("setValue()");c.setPosition(400,70);var l=new q.DefaultNodeModel("TemperatureSensor","Blue"),d=l.addOutPort("getValue()");return l.setPosition(30,170),t.addAll(e,r,n.link(a),i.link(s),d.link(o),c,l),t}();return t.setModel(e),Object(i.useEffect)((function(){console.log("Rendering Diagram"),setInterval((function(){localStorage.setItem("model",JSON.stringify(e.serialize()))}),5e3)}),[]),Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(y.jsx)(Q.CanvasWidget,{className:"canvas",engine:t})})})}function jt(){return Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{children:"Caution!"}),Object(y.jsx)("div",{style:{width:"80vh",height:"60vh"},children:Object(y.jsx)(ut,{})})]})}function ft(){var t=Object(i.useState)({}),e=Object(o.a)(t,2),n=e[0],r=e[1],a=Object(i.useMemo)((function(){return{model:n,setModel:r}}),[n]);return Object(y.jsx)("div",{className:"App",children:Object(y.jsxs)("header",{className:"App-header",children:[Object(y.jsxs)(D.b,{history:v,children:[Object(y.jsx)(D.a,{path:"/",exact:!0,component:it}),Object(y.jsx)(D.a,{path:"/models",exact:!0,component:st}),Object(y.jsx)(D.a,{path:"/state",exact:!0,component:dt}),Object(y.jsx)(D.a,{path:"/palette",exact:!0,component:jt}),Object(y.jsx)(k.Provider,{value:a,children:Object(y.jsx)(D.a,{path:"/editor",component:ot})})]}),Object(y.jsx)(w,{})]})})}var pt=n(151);a.a.render(Object(y.jsx)(pt.a,{children:Object(y.jsx)(ft,{})}),document.getElementById("root"))}},[[508,1,2]]]);
//# sourceMappingURL=main.c760a1d9.chunk.js.map