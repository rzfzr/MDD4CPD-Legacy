(this.webpackJsonpmdd4=this.webpackJsonpmdd4||[]).push([[0],{432:function(t,e,n){},433:function(t,e,n){},465:function(t,e,n){},720:function(t,e,n){},722:function(t,e,n){"use strict";n.r(e);var o=n(99),i=n.n(o),r=(n(432),n(433),n(29)),a=n(72),s=n(0),c=n.n(s),l=n(747),d=n(748),u=n(409),p=n.n(u),h=n(413),b=n.n(h),g=n(410),j=n.n(g),O=n(411),f=n.n(O),m=n(750),v=n(412),x=n.n(v),y=n(1);function k(){var t=window.location.pathname,e=Object(s.useState)(t),n=Object(r.a)(e,2),o=n[0],i=n[1];return Object(y.jsx)(m.a,{position:"fixed",color:"primary",style:{top:"auto",bottom:0},children:Object(y.jsxs)(l.a,{value:o,onChange:function(t,e){i(e)},showLabels:!0,children:["location.pathname",Object(y.jsx)(d.a,{component:a.b,label:"Home",to:"/mdd4/",icon:Object(y.jsx)(p.a,{})}),Object(y.jsx)(d.a,{component:a.b,label:"Models",to:"/mdd4/models",icon:Object(y.jsx)(j.a,{})}),Object(y.jsx)(d.a,{component:a.b,label:"State",to:"/mdd4/state",icon:Object(y.jsx)(f.a,{})}),Object(y.jsx)(d.a,{component:a.b,label:"Palette",to:"/mdd4/palette",icon:Object(y.jsx)(x.a,{})}),Object(y.jsx)(d.a,{component:a.b,label:"Editor",to:"/mdd4/editor",icon:Object(y.jsx)(b.a,{})})]})})}var P,C,w=n(9),E=n(37),S=n(49),M=n(19),I=n(20),D=n(28),N=n(27),A=n(12),T=n(415),z=n.n(T),B=n(414);(C||(C={})).Tray=A.default.div(P||(P=Object(E.a)(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tfont-size:0.6em;\n\t\tpadding: 2px 0px;\n\t\tmargin:\t 5px 10px ;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 100px;\n\t\tmargin-bottom: 2px;\n\t\tcursor: pointer;\n\t\tbackground: rgb(20, 20, 20);\n\t"])),(function(t){return t.color}));var F,L,W,K=function(t){Object(D.a)(n,t);var e=Object(N.a)(n);function n(){return Object(M.a)(this,n),e.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){var t=this;return Object(y.jsxs)(C.Tray,{color:this.props.node.color||"red",draggable:!0,onDragStart:function(e){e.dataTransfer.setData("storm-diagram-node",JSON.stringify(t.props.node)),e.dataTransfer.setDragImage(new Image,10,10)},className:"tray-item",children:[this.props.node.name,Object(y.jsx)("a",{"data-tip":!0,"data-for":"tip-"+this.props.node.name,children:Object(y.jsx)(z.a,{style:{fontSize:"1rem"}})}),Object(y.jsx)(B.a,{id:"tip-"+this.props.node.name,type:"light",place:"bottom",children:Object(y.jsxs)("div",{style:{width:"300px",height:"300px",backgroundColor:"white",border:"solid",fontSize:"1.3em"},children:[Object(y.jsx)("div",{style:{width:"100%",borderBottom:"solid 3px",fontSize:"2em"},children:this.props.node.name}),Object(y.jsxs)("div",{style:{width:"100%",borderBottom:"solid 2px"},children:["Library=",this.props.node.extras.library]}),this.props.node.ins&&this.props.node.ins.length>0&&this.props.node.ins.map((function(t){return Object(y.jsx)("div",{children:Object(y.jsx)("p",{children:t})},t)})),this.props.node.outs&&this.props.node.outs.length>0&&this.props.node.outs.map((function(t){return Object(y.jsx)("div",{children:Object(y.jsx)("p",{children:t})},t)}))]})})]})}}]),n}(s.Component),H=n(30),R=n(33),V=n(22),G=n(10),q=n(17),J=n(53),U=function(t){Object(D.a)(n,t);var e=Object(N.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(M.a)(this,n),e.call(this,Object(H.a)({type:"default",width:t.width||3,color:t.color||"gray",selectedColor:t.selectedColor||"rgb(0,192,255)",curvyness:50},t))}return Object(I.a)(n,[{key:"calculateControlOffset",value:function(t){return t.getOptions().alignment===q.PortModelAlignment.RIGHT?[this.options.curvyness||0,0]:t.getOptions().alignment===q.PortModelAlignment.LEFT?[-(this.options.curvyness||0),0]:t.getOptions().alignment===q.PortModelAlignment.TOP?[0,-(this.options.curvyness||0)]:[0,this.options.curvyness||0]}},{key:"getSVGPath",value:function(){if(2===this.points.length){var t,e,n=new J.BezierCurve;if(n.setSource(this.getFirstPoint().getPosition()),n.setTarget(this.getLastPoint().getPosition()),n.setSourceControl(this.getFirstPoint().getPosition().clone()),n.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort)(t=n.getSourceControl()).translate.apply(t,Object(S.a)(this.calculateControlOffset(this.getSourcePort())));if(this.targetPort)(e=n.getTargetControl()).translate.apply(e,Object(S.a)(this.calculateControlOffset(this.getTargetPort())));return n.getSVGCurve()}}},{key:"serialize",value:function(){return Object(H.a)(Object(H.a)({},Object(R.a)(Object(V.a)(n.prototype),"serialize",this).call(this)),{},{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor})}},{key:"deserialize",value:function(t){Object(R.a)(Object(V.a)(n.prototype),"deserialize",this).call(this,t),this.options.color=t.data.color,this.options.width=t.data.width,this.options.curvyness=t.data.curvyness,this.options.selectedColor=t.data.selectedColor}},{key:"setWidth",value:function(t){this.options.width=t,this.fireEvent({width:t},"widthChanged")}},{key:"setColor",value:function(t){this.options.color=t,this.fireEvent({color:t},"colorChanged")}}]),n}(q.LinkModel),Y=function(t){Object(D.a)(n,t);var e=Object(N.a)(n);function n(t,o,i){return Object(M.a)(this,n),o&&(t={in:!!t,name:o,label:i}),t=t,e.call(this,Object(H.a)({label:t.label||t.name,alignment:t.in?q.PortModelAlignment.LEFT:q.PortModelAlignment.RIGHT,type:"default"},t))}return Object(I.a)(n,[{key:"deserialize",value:function(t){Object(R.a)(Object(V.a)(n.prototype),"deserialize",this).call(this,t),this.options.in=t.data.in,this.options.label=t.data.label}},{key:"serialize",value:function(){return Object(H.a)(Object(H.a)({},Object(R.a)(Object(V.a)(n.prototype),"serialize",this).call(this)),{},{in:this.options.in,label:this.options.label})}},{key:"canLinkToPort",value:function(t){return!0}},{key:"createLinkModel",value:function(){return new U}}]),n}(q.PortModel),Q=function(t){Object(D.a)(n,t);var e=Object(N.a)(n);function n(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return Object(M.a)(this,n),"string"===typeof o&&(o={name:o,color:i}),(t=e.call(this,Object(H.a)({type:"default",name:"Untitled",color:"rgb(0,192,255)"},o))).portsIn=void 0,t.portsOut=void 0,t.extras=void 0,t.portsOut=[],t.portsIn=[],t}return Object(I.a)(n,[{key:"doClone",value:function(t,e){e.portsIn=[],e.portsOut=[],Object(R.a)(Object(V.a)(n.prototype),"doClone",this).call(this,t,e)}},{key:"removePort",value:function(t){Object(R.a)(Object(V.a)(n.prototype),"removePort",this).call(this,t),t.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(t),1):this.portsOut.splice(this.portsOut.indexOf(t),1)}},{key:"addPort",value:function(t){return Object(R.a)(Object(V.a)(n.prototype),"addPort",this).call(this,t),t.getOptions().in?-1===this.portsIn.indexOf(t)&&this.portsIn.push(t):-1===this.portsOut.indexOf(t)&&this.portsOut.push(t),t}},{key:"addInPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Y({in:!0,name:t,label:t,alignment:q.PortModelAlignment.LEFT});return e||this.portsIn.splice(0,0,n),this.addPort(n)}},{key:"addOutPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Y({in:!1,name:t,label:t,alignment:q.PortModelAlignment.RIGHT});return e||this.portsOut.splice(0,0,n),this.addPort(n)}},{key:"addExtras",value:function(t){return this.extras=t,this.extras}},{key:"deserialize",value:function(t){var e=this;Object(R.a)(Object(V.a)(n.prototype),"deserialize",this).call(this,t),this.options.name=t.data.name,this.options.color=t.data.color,this.portsIn=G.map(t.data.portsInOrder,(function(t){return e.getPortFromID(t)})),this.portsOut=G.map(t.data.portsOutOrder,(function(t){return e.getPortFromID(t)})),this.extras=t.data.extras}},{key:"serialize",value:function(){return Object(H.a)(Object(H.a)({},Object(R.a)(Object(V.a)(n.prototype),"serialize",this).call(this)),{},{name:this.options.name,color:this.options.color,portsInOrder:G.map(this.portsIn,(function(t){return t.getID()})),portsOutOrder:G.map(this.portsOut,(function(t){return t.getID()})),extras:this.extras})}},{key:"getInPorts",value:function(){return this.portsIn}},{key:"getOutPorts",value:function(){return this.portsOut}}]),n}(q.NodeModel),X=n(14),Z=n(63);!function(t){t.Container=A.default.div(F||(F=Object(E.a)(["\n\t\theight: 100%;\n\t\tbackground-color: ",";\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\tmin-height: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"])),(function(t){return t.background}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color})),t.Expand=Object(Z.css)(L||(L=Object(E.a)(["\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\theight: 100%;\n\t\t}\n\t"])))}(W||(W={}));var $=function(t){Object(D.a)(n,t);var e=Object(N.a)(n);function n(){return Object(M.a)(this,n),e.apply(this,arguments)}return Object(I.a)(n,[{key:"render",value:function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(Z.Global,{styles:W.Expand}),Object(y.jsx)(W.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)",children:this.props.children})]})}}]),n}(s.Component),tt=function(t){Object(D.a)(n,t);var e=Object(N.a)(n);function n(t,o,i,r,a){var s;switch(Object(M.a)(this,n),(s=e.call(this,{type:"MyEditable",name:t,color:o})).portsIn=[],s.portsOut=[],s.content=void 0,s.extras=void 0,s.selectableOptions=void 0,s.extras=i,r.forEach((function(t){s.addInPort(t)})),a.forEach((function(t){s.addOutPort(t)})),console.log("creating",s.portsOut,t,a[0],o),a[0]){case"bool":s.content={name:"boolName",value:"true"},s.selectableOptions=["true","false"];break;case"int":s.content={name:"name",value:"0"},s.selectableOptions=Array.from(Array(10).keys()).map((function(t){return t.toString()}));break;default:s.content={name:"",value:""},s.selectableOptions=["something","went wrong"]}return s}return Object(I.a)(n,[{key:"doClone",value:function(t,e){e.portsIn=[],e.portsOut=[],Object(R.a)(Object(V.a)(n.prototype),"doClone",this).call(this,t,e)}},{key:"removePort",value:function(t){Object(R.a)(Object(V.a)(n.prototype),"removePort",this).call(this,t),t.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(t),1):this.portsOut.splice(this.portsOut.indexOf(t),1)}},{key:"addPort",value:function(t){return Object(R.a)(Object(V.a)(n.prototype),"addPort",this).call(this,t),t.getOptions().in?-1===this.portsIn.indexOf(t)&&this.portsIn.push(t):-1===this.portsOut.indexOf(t)&&this.portsOut.push(t),t}},{key:"addInPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Y({in:!0,name:t,label:t,alignment:q.PortModelAlignment.LEFT});return e||this.portsIn.splice(0,0,n),this.addPort(n)}},{key:"addOutPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Y({in:!1,name:t,label:t,alignment:q.PortModelAlignment.RIGHT});return e||this.portsOut.splice(0,0,n),this.addPort(n)}},{key:"addExtras",value:function(t){return this.extras=t,this.extras}},{key:"deserialize",value:function(t){var e=this;Object(R.a)(Object(V.a)(n.prototype),"deserialize",this).call(this,t),this.options.name=t.data.name,this.options.color=t.data.color,this.portsIn=G.map(t.data.portsInOrder,(function(t){return e.getPortFromID(t)})),this.portsOut=G.map(t.data.portsOutOrder,(function(t){return e.getPortFromID(t)})),this.extras=t.data.extras,this.content=t.data.content,this.selectableOptions=t.data.selectableOptions}},{key:"serialize",value:function(){return Object(H.a)(Object(H.a)({},Object(R.a)(Object(V.a)(n.prototype),"serialize",this).call(this)),{},{name:this.options.name,color:this.options.color,portsInOrder:G.map(this.portsIn,(function(t){return t.getID()})),portsOutOrder:G.map(this.portsOut,(function(t){return t.getID()})),extras:this.extras,content:this.content,selectableOptions:this.selectableOptions})}},{key:"getInPorts",value:function(){return this.portsIn}},{key:"getOutPorts",value:function(){return this.portsOut}}]),n}(q.NodeModel),et=[{name:"Arduino Uno",color:"green",extras:{type:"controller",analogPorts:6,digitalPorts:14},ins:[],outs:["setup()","loop()"]},{name:"Arduino Nano",color:"green",extras:{type:"controller",analogPorts:6,digitalPorts:22},ins:[],outs:["setup()","loop()"]},{name:"Arduino Mega",color:"green",extras:{type:"controller",analogPorts:16,digitalPorts:54},ins:[],outs:["setup()","loop()"]},{name:"Arduino Leonardo",color:"green",extras:{type:"controller",analogPorts:12,digitalPorts:20},ins:[],outs:["setup()","loop()"]},{name:"Arduino Flora",color:"green",extras:{type:"controller",analogPorts:4,digitalPorts:8},ins:[],outs:["setup()","loop()"]},{name:"Digital I/O",color:"cyan",extras:{type:"Built-in"},ins:["void digitalWrite(int pin, int value)","void pinMode(int pin, int mode)"],outs:["int digitalRead(int pin)"]},{name:"Analog I/O",color:"cyan",extras:{type:"Built-in"},ins:["void analoglWrite(int pin, int value)","void pinMode(int pin, int mode)","void analogReference(int type)"],outs:[]},{name:"Time",color:"cyan",extras:{type:"Built-in"},ins:["void delay(int ms)","void delayMicroseconds(int us)"],outs:["unsigned long micros()","unsigned long millis()"]},{name:"Math",color:"cyan",extras:{type:"Built-in"},ins:["void delay(int ms)"],outs:["int abs(int x)","int constrain(int x, int a, int b)","int map(int value, int fromLow, int fromHigh, int toLow, int toHigh)","any? max(any x, any y)","any? min(any x, any y)","double pow(float base, float exponent)","double sq(any x)","double sqrt(any x)"]},{name:"Digital Port",color:"white",extras:{type:"port"},ins:[],outs:["port"]},{name:"Analog Port",color:"white",extras:{type:"port"},ins:[],outs:["port"]},{name:"CustomFunction",extras:{type:"logic"},color:"grey",outs:["call"],ins:["trigger"]},{name:"Condition",extras:{type:"logic"},color:"grey",outs:["True","False"],ins:["trigger","x","y"]},{name:"Loop",extras:{type:"logic"},color:"grey",outs:["True","False"],ins:["startValue","stopValue"]},{name:"Led",color:"red",extras:{type:"component",library:"Setter.h"},ins:["setValue()"],outs:[]},{name:"Temperature Sensor",color:"blue",extras:{type:"component",library:"Getter.h"},ins:[],outs:["getValue()"]},{name:"TwoWire Interface",color:"blue",extras:{type:"component",library:"Wire.h"},ins:["void begin()","void beginTransmission()","void setClock()","void onReceive()","void onRequest()"],outs:["byte requestFrom()","byte endTransmission()","byte write()","byte available()","byte read()"]},{name:"Button",color:"blue",extras:{type:"component",library:"Getter.h"},ins:["setValue(bool)"],outs:[]},{name:"PWM Servo",color:"orange",extras:{type:"component",library:"Adafruit_PWMServoDriver.h"},ins:["void begin(uint8_t prescale=0)","void sleep()","void wakeup()","void setExtClk(uint8_t prescale)","void setPWMFreq(float freq)","void setOutputMode(bool totempole)","void setPWM(uint8_t num, uint16_t on, uint16_t off)","void setPin(uint8_t num, uint16_t val, bool invert=false)","void writeMicroseconds(uint8_t num, uint16_t Microseconds)","void setOscillatorFrequency(uint32_t freq)"],outs:["uint8_t getPWM(uint8_t num)","uint8_t readPrescale()","uint32_t getOscillatorFrequency()"]},{name:"Servo",color:"orange",extras:{type:"component",library:"Servo.h"},ins:["void detach()","void write(int)","void writeMicroseconds(int)"],outs:["uint8_t attach(int)","uint8_t attach(int, int, int)","int read()","int readMicroseconds()","bool attached()"]},{name:"Stepper",color:"orange",extras:{type:"component",library:"Stepper.h"},ins:["Stepper(int, int, int)","Stepper(int, int, int, int, int)","Stepper(int, int, int, int, int, int)","void setSpeed(long whatSpeed)","void step(int number_of_steps)"],outs:["int version(void)"]},{name:"Variable Integer",color:"pink",extras:{type:"variable"},ins:["void setValue(int)"],outs:["int getValue()"]},{name:"Variable Boolean",color:"pink",extras:{type:"variable"},ins:["void setValue(bool)"],outs:["bool"]},{name:"Constant Integer",color:"pink",extras:{type:"constant"},ins:[],outs:["int"]},{name:"Constant Boolean",color:"pink",extras:{type:"constant"},ins:[],outs:["bool"]}],nt=n(194),ot=n.n(nt),it=(n(465),n(261)),rt=n(416),at=function(){var t=Object(s.useRef)(null),e=Object(s.useState)(""),n=Object(r.a)(e,2),o=n[0],i=n[1],a=Object(s.useCallback)((function(t){i(t.slice(0,-1))}),[]);return Object(rt.a)(t,a,{disabled:!1,indentation:2}),Object(y.jsx)(it.a,Object(H.a)(Object(H.a)({},it.b),{},{code:o,language:"jsx",children:function(e){var n=e.className,o=e.style,i=e.tokens,r=(e.getLineProps,e.getTokenProps);return Object(y.jsx)("pre",{className:n,style:o,ref:t,children:i.map((function(t,e){return Object(y.jsxs)(c.a.Fragment,{children:[t.filter((function(t){return!t.empty})).map((function(t,e){return Object(y.jsx)("span",Object(H.a)({},r({token:t,key:e})))})),"\n"]},e)}))})}}))};function st(t){var e=t.model,n="Initializing Generator";return"{}"===e||""===e||(n=function(t){var e="";if(0===Object.keys(t).length)return"// Empty Diagram!";var n=[];Object.entries(t.layers[0].models).forEach((function(t){n.push(t[1])}));var o=[],i=[],r=[],a=[],s=[],c=[],l=[],d=[];if(Object.entries(t.layers[1].models).forEach((function(t){var e=t[1];switch(o.push(e),e.extras.type){case"component":e.instance=e.name.toLowerCase().replace(" ","")+r.filter((function(t){return t.extras.library===e.extras.library})).length,r.push(e),s.includes(e.extras.library)||s.push(e.extras.library);break;case"controller":a.push(e);break;case"logic":i.push(e);break;case"variable":break;case"constant":e.content.name=e.content.name.toUpperCase(),c.push(e)}})),0===o.length)return"// You need at least one Node!";if(0===a.length)return"// You need an Arduino!";if(a.length>1)return"// Only one Arduino allowed!";var u=a[0],p=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.forEach((function(t){e+=t})),e+="\n"},h=function(){for(var t="",n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];o.forEach((function(e){t+=e})),e=t+"\n"+e},b=function(t){return n.find((function(e){return e.id===t}))},g=function(t,e){try{return o.find((function(e){return e.id===t})).ports.find((function(t){return t.id===e}))}catch(n){return"// Loose end"}},j=function(t){return o.find((function(e){return e.id===t}))},O=function(t,e){try{var n=t.ports.find((function(t){return t.name===e})).links[0],o=b(n),i=g(o.source,o.sourcePort),r=m(i);return["variable","port"].includes(r.extras.type)?r.content.value:["component"].includes(r.extras.type)?r.instance+"."+i.name:p("Unknown extras.type")}catch(a){return"/* Lacking Value */"}},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"True";try{var n=t.ports.find((function(t){return t.name===e})).links[0],o=b(n);return g(o.target,o.targetPort)}catch(i){return{label:"// Lacking Outcome"}}},m=function(t){return o.find((function(e){return e.id===t.parentNode}))},v=function(t){var e=t.substring(t.indexOf(" ")+1,-1!==t.indexOf("(")?t.indexOf("("):t.length),n=t.substring(t.indexOf("("),t.indexOf(")")-1).split(","),o=e;return n.forEach((function(t){if(!t.includes("=")){var e=String(t.split(" ").slice(-1));o+=e}})),o},x=function t(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];"constant"===e.extras.type?o.push(e.content.name):o.push(e.content.value),e.ports.forEach((function(n){n.links.forEach((function(n){var i=b(n),r=g(i.target,i.targetPort),a=j(r.parentNode);a.id===e.id||(a.instance?p(a.instance+"."+v(r.name.split("(").shift())+"("+o+")"):t.apply(void 0,[a].concat(o)))}))}))},y=function(t){var e=b(t),n=g(e.target,e.targetPort),o=j(n.parentNode),i=g(e.source,e.sourcePort),r=j(i.parentNode);if("Function"===(null===o||void 0===o?void 0:o.name))console.log("fun",o),p(o.content.value,"(",");");else if("Condition"===(null===o||void 0===o?void 0:o.name)){var a=O(o,"x"),s=O(o,"y"),c=f(o),u=m(c),h=f(o,"False"),y=m(h);p("if (",a," "+o.content.value+" ",s,") {"),u?x(u):p("/* Lacking code to be executed if conditional is true */"),y&&(p("} else {"),x(y)),p("}\n")}else{var k,P;["variable","constant"].includes(null===o||void 0===o||null===(k=o.extras)||void 0===k?void 0:k.type)?x(o):["port"].includes(null===o||void 0===o||null===(P=o.extras)||void 0===P?void 0:P.type)?(console.log("found port",o),o.name.includes("Digital")?(console.log("it was digital"),l.push(o.content.value)):(console.log("it was analog"),d.push(o.content.value)),x(o)):(null===o||void 0===o?void 0:o.instance)?p(o.instance+"."+v(n.name)+"()"):p(r.instance+"."+v(i.name)+"()")}};return p("// Libraries"),s.forEach((function(t){p("#include <"+t+">")})),p(""),p("// Objects"),s.forEach((function(t){r.forEach((function(e){e.extras.library===t&&p(e.name+" "+e.instance)}))})),p("// Functions"),i.forEach((function(t){"Function"===t.name&&(p("void ",t.content.value,"() {"),t.ports.find((function(t){return"right"===t.alignment})).links.forEach((function(t){y(t)})),p("}"))})),p("// Constants"),c.forEach((function(t){p("#define ".concat(t.content.name," ").concat(t.content.value," //").concat(t.name))})),p(""),p("// Micro-controller Lifecycle"),u.ports.forEach((function(t){p(t.label,"{"),t.links.forEach((function(t){y(t)})),p("}\n")})),h(""),h("Digital ports ".concat(l.length,"/").concat(u.extras.digitalPorts," ").concat(l.length>0?"(".concat(l,")"):""),"*/"),h("Analog ports ".concat(d.length,"/").concat(u.extras.analogPorts," ").concat(d.length>0?"(".concat(d,")"):""," ")),h("/* Code generated for ",u.name),function(t){var e=[],n=0;return t.split("\n").forEach((function(t){t.includes("}")&&n--,e.push("    ".repeat(n)+t),t.includes("{")&&n++})),e.join("\n")}(e)}(JSON.parse(e))),Object(s.useEffect)((function(){ot.a.highlightAll()}),[t]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"Code",children:Object(y.jsx)("pre",{children:Object(y.jsx)("code",{className:"language-clike",children:n})})}),Object(y.jsx)(at,{})]})}var ct,lt,dt,ut,pt,ht=n(749),bt=n(466).default;function gt(t){var e=Object(s.useState)("{}"),n=Object(r.a)(e,2),o=n[0],i=n[1],a=s.useState(!1),c=Object(r.a)(a,2),l=c[0],d=c[1],u=t.app.getDiagramEngine().getModel().serialize(),p=JSON.stringify(u),h=Object(S.a)(new Set(et.map((function(t){return t.extras.type}))));return p!==o&&i(p),Object(y.jsxs)("div",{className:"float-container",children:[Object(y.jsx)("div",{className:"float-child-left",children:Object(y.jsx)(pt.Body,{children:Object(y.jsxs)(pt.Content,{style:{width:"100%",height:"100%"},children:[Object(y.jsxs)("div",{children:[Object(y.jsx)(bt,{speed:1,className:"area",contentClassName:"content",horizontal:!1,style:{height:"88vh"},smoothScrolling:!0,verticalScrollbarStyle:{backgroundColor:"white"},children:h.map((function(t){return Object(y.jsxs)("div",{style:{border:"dashed white 1px",marginBottom:"20px"},children:[Object(y.jsxs)("h6",{style:{margin:"0px 0px 0px 0px"},children:[t+"s",":"]}),et.filter((function(e){return e.extras.type===t})).map((function(t){return Object(y.jsx)(K,{node:t},t.name)}))]},t)}))}),Object(y.jsxs)("div",{style:{marginBottom:"0px"},children:[Object(y.jsx)(ht.a,{variant:"contained",size:"small",onClick:function(){var t=JSON.stringify(u);localStorage.setItem("model",t),console.log("Saved")},children:"Save"}),Object(y.jsx)(ht.a,{variant:"contained",size:"small",onClick:function(){t.app.getActiveDiagram().deserializeModel(JSON.parse(localStorage.getItem("model")||"{}"),t.app.getDiagramEngine()),i(p),d(!l),console.log("Loaded")},children:"Load"})]})]}),Object(y.jsx)(pt.Layer,{onDrop:function(e){var n=JSON.parse(e.dataTransfer.getData("storm-diagram-node"));if(n){var o={};"variable"===n.extras.type||"constant"===n.extras.type||"port"===n.extras.type||"logic"===n.extras.type?o=new tt(n.name,n.color,n.extras,n.ins,n.outs):((o=new Q(n.name,n.color)).extras=n.extras,n.outs.forEach((function(t){o.addOutPort(t)})),n.ins.forEach((function(t){o.addInPort(t)}))),o.setPosition(t.app.getDiagramEngine().getRelativeMousePoint(e)),t.app.getDiagramEngine().getModel().addNode(o)}d(!l)},onDragOver:function(t){t.preventDefault()},onClick:function(t){d(!l)},children:Object(y.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(y.jsx)($,{children:Object(y.jsx)(X.CanvasWidget,{engine:t.app.getDiagramEngine()})})})})]})})}),Object(y.jsx)("div",{className:"float-child-right",children:Object(y.jsx)(st,{model:o})})]})}!function(t){t.Body=A.default.div(ct||(ct=Object(E.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%;\n\t"]))),t.Header=A.default.div(lt||(lt=Object(E.a)(["\n\t\tdisplay: flex;\n\t\tbackground: rgb(30, 30, 30);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial, sans-serif;\n\t\tpadding: 10px;\n\t\talign-items: center;\n\t"]))),t.Content=A.default.div(dt||(dt=Object(E.a)(["\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]))),t.Layer=A.default.div(ut||(ut=Object(E.a)(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"])))}(pt||(pt={}));var jt,Ot,ft=s.memo(gt),mt=n(85),vt=n.n(mt),xt=function(t){Object(D.a)(n,t);var e=Object(N.a)(n);function n(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(M.a)(this,n),(t=e.call(this,Object(H.a)(Object(H.a)({},o),{},{type:"editable-label"}))).value=void 0,t.value=o.value||"",t}return Object(I.a)(n,[{key:"serialize",value:function(){return Object(H.a)(Object(H.a)({},Object(R.a)(Object(V.a)(n.prototype),"serialize",this).call(this)),{},{value:this.value})}},{key:"deserialize",value:function(t){Object(R.a)(Object(V.a)(n.prototype),"deserialize",this).call(this,t),this.value=t.data.value}}]),n}(mt.LabelModel),yt=n(417);!function(t){t.Label=A.default.div(jt||(jt=Object(E.a)(["\n\t\tuser-select: none;\n\t\tpointer-events: auto;\n\t"])))}(Ot||(Ot={}));var kt,Pt,Ct,wt,Et,St,Mt=function(t){var e=s.useState(t.model.value),n=Object(r.a)(e,2),o=n[0],i=n[1];return Object(y.jsxs)(Ot.Label,{children:[Object(y.jsx)("input",{value:o,onChange:function(e){var n=e.target.value;i(n),t.model.value=n}}),Object(y.jsx)("button",{onClick:function(){return Object(yt.action)("model eventDidFire")("You clicked the button")},children:"Click me!"})]})},It=function(t){Object(D.a)(n,t);var e=Object(N.a)(n);function n(){return Object(M.a)(this,n),e.call(this,"editable-label")}return Object(I.a)(n,[{key:"generateModel",value:function(){return new xt}},{key:"generateReactWidget",value:function(t){return Object(y.jsx)(Mt,{model:t.model})}}]),n}(X.AbstractReactFactory),Dt=n(103),Nt=(n(720),n(419)),_t=n.n(Nt),At=function(t){var e=t.content,n=t.onChange,o=t.onBlurOrEnter;return Object(y.jsx)(_t.a,{autoFocus:!0,inputStyle:{padding:1,borderStyle:"dotted",borderWidth:1,borderColor:"black"},type:"text",value:e,onChange:n,onBlur:o,onKeyDown:function(t){13===t.keyCode&&o()}})},Tt=function(t){Object(D.a)(n,t);var e=Object(N.a)(n);function n(t){var o;return Object(M.a)(this,n),(o=e.call(this,t)).state={},o}return Object(I.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{children:this.props.beingEdited&&this.props.editingKey===this.props.elementKey?Object(y.jsx)(At,{content:this.props.content,onChange:this.props.onChange,onBlurOrEnter:this.props.onBlurOrEnter}):Object(y.jsx)("p",{style:{margin:0,padding:0,fontStyle:this.props.isAbstract?"italic":"normal"},children:this.props.content})})}}]),n}(s.Component),zt=function(t){var e=t.content,n=t.onChange,o=t.onBlurOrEnter,i=t.options;return Object(y.jsx)("select",{name:"values",id:"values",value:e,onChange:n,onBlur:o,children:i.map((function(t,e){return Object(y.jsx)("option",{children:t},e)}))})},Bt=function(t){Object(D.a)(n,t);var e=Object(N.a)(n);function n(t){var o;return Object(M.a)(this,n),(o=e.call(this,t)).state={},o}return Object(I.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{children:this.props.beingEdited&&this.props.editingKey===this.props.elementKey?Object(y.jsx)(zt,{content:this.props.content,onChange:this.props.onChange,onBlurOrEnter:this.props.onBlurOrEnter,options:this.props.options}):Object(y.jsx)("p",{style:{margin:0,padding:0,fontStyle:this.props.isAbstract?"italic":"normal"},children:this.props.content})})}}]),n}(s.Component);!function(t){t.Node=A.default.div(kt||(kt=Object(E.a)(["\n\t\tbackground-color: ",";\n\t\tborder-radius: 5px;\n\t\tfont-family: sans-serif;\n\t\tcolor: white;\n\t\tborder: solid 2px black;\n\t\toverflow: visible;\n\t\tfont-size: 11px;\n\t\tborder: solid 2px ",";\n\t"])),(function(t){return t.background}),(function(t){return t.selected?"rgb(0,192,255)":"black"})),t.Title=A.default.div(Pt||(Pt=Object(E.a)(["\n\t\tbackground: rgba(0, 0, 0, 0.3);\n\t\tdisplay: flex;\n\t\twhite-space: nowrap;\n\t\tjustify-items: center;\n\t"]))),t.TitleName=A.default.div(Ct||(Ct=Object(E.a)(["\n\t\tflex-grow: 1;\n\t\tpadding: 5px 5px;\n\t"]))),t.Ports=A.default.div(wt||(wt=Object(E.a)(["\n\t\tdisplay: flex;\n\t\tbackground-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));\n\t"]))),t.PortsContainer=A.default.div(Et||(Et=Object(E.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t&:first-of-type {\n\t\t\tmargin-right: 10px;\n\t\t}\n\n\t\t&:only-child {\n\t\t\tmargin-right: 0px;\n\t\t}\n\t"])))}(St||(St={}));var Ft=function(t){Object(D.a)(n,t);var e=Object(N.a)(n);function n(t){var o;return Object(M.a)(this,n),(o=e.call(this,t)).divElement=void 0,o.generatePort=function(t){return Object(y.jsx)(mt.DefaultPortLabel,{engine:o.props.engine,port:t},t.getID())},o._editableObjectDoubleClick=function(t){o.state.editingSomething||o.setState({editingSomething:!0,editingKey:t})},o._contentOnChange=function(t){o.props.nodeModel.content[o.state.editingKey]=t.currentTarget.value,o.setState({content:t.currentTarget.value})},o._onBlurOrEnter=function(){o.setState({editingSomething:!1,editingKey:""})},o.state={content:{name:"",value:""},variableType:"",editingSomething:!1,editingKey:""},o._editableObjectDoubleClick=o._editableObjectDoubleClick.bind(Object(Dt.a)(o)),o._contentOnChange=o._contentOnChange.bind(Object(Dt.a)(o)),o._onBlurOrEnter=o._onBlurOrEnter.bind(Object(Dt.a)(o)),o}return Object(I.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({content:this.props.nodeModel.content})}},{key:"render",value:function(){var t=this;return Object(y.jsxs)(St.Node,{"data-default-node-name":this.props.nodeModel.getOptions().name,selected:this.props.nodeModel.isSelected(),background:this.props.nodeModel.getOptions().color,children:[Object(y.jsxs)(St.Title,{children:[Object(y.jsx)("div",{className:"editable-node",ref:function(e){return t.divElement=e},children:Object(y.jsx)("div",{className:"editable-border",children:Object(y.jsx)("div",{className:"editable-header",children:Object(y.jsx)("div",{onDoubleClick:function(){t._editableObjectDoubleClick("name")},children:Object(y.jsx)(Tt,{elementKey:"name",editingKey:this.state.editingKey,beingEdited:this.state.editingSomething,content:this.props.nodeModel.content.name,onChange:this._contentOnChange,onBlurOrEnter:this._onBlurOrEnter})})})})}),Object(y.jsxs)(St.TitleName,{children:[this.props.nodeModel.getOptions().name,":"]}),Object(y.jsx)("div",{className:"editable-node",ref:function(e){return t.divElement=e},children:Object(y.jsx)("div",{className:"editable-border",children:Object(y.jsx)("div",{className:"editable-header",children:Object(y.jsx)("div",{onDoubleClick:function(){t._editableObjectDoubleClick("value")},children:"bool"===this.props.nodeModel.portsOut[0].options.name||"port"===this.props.nodeModel.portsOut[0].options.name?Object(y.jsx)(Bt,{elementKey:"value",options:this.props.nodeModel.selectableOptions,editingKey:this.state.editingKey,beingEdited:this.state.editingSomething,content:this.props.nodeModel.content.value,onChange:this._contentOnChange,onBlurOrEnter:this._onBlurOrEnter}):Object(y.jsx)(Tt,{elementKey:"value",editingKey:this.state.editingKey,beingEdited:this.state.editingSomething,content:this.props.nodeModel.content.value,onChange:this._contentOnChange,onBlurOrEnter:this._onBlurOrEnter})})})})})]}),Object(y.jsxs)(St.Ports,{children:[Object(y.jsx)(St.PortsContainer,{children:_.map(this.props.nodeModel.getInPorts(),this.generatePort)}),Object(y.jsx)(St.PortsContainer,{children:_.map(this.props.nodeModel.getOutPorts(),this.generatePort)})]})]})}}]),n}(s.Component),Lt=function(t){Object(D.a)(n,t);var e=Object(N.a)(n);function n(){return Object(M.a)(this,n),e.call(this,"MyEditable")}return Object(I.a)(n,[{key:"generateModel",value:function(t){return new tt("name","pink","test",["t"],["t"])}},{key:"generateReactWidget",value:function(t){return Object(y.jsx)(Ft,{nodeModel:t.model,engine:this.engine})}}]),n}(X.AbstractReactFactory),Wt=function(){function t(){Object(M.a)(this,t),this.activeModel=void 0,this.diagramEngine=void 0,this.diagramEngine=vt.a(),this.diagramEngine.getLabelFactories().registerFactory(new It),this.diagramEngine.getNodeFactories().registerFactory(new Lt),this.newModel()}return Object(I.a)(t,[{key:"newModel",value:function(){this.activeModel=new mt.DiagramModel,this.diagramEngine.setModel(this.activeModel)}},{key:"getActiveDiagram",value:function(){return this.activeModel}},{key:"getDiagramEngine",value:function(){return this.diagramEngine}}]),t}();function Kt(){var t=new Wt;return Object(y.jsx)(ft,{app:t})}var Ht=n.p+"static/media/flow.43bedc99.svg",Rt=n.p+"static/media/cym_s.cbee123b.svg";function Vt(){return Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{children:"Welcome to MDD4CPS!"}),Object(y.jsx)("img",{src:Ht,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"100%"}}),Object(y.jsx)("img",{src:Rt,alt:"CYM-S",style:{maxHeight:"80vh",maxWidth:"100%"}})]})}var Gt=n.p+"static/media/cym_s_extended.79a380b4.svg";function qt(){return Object(y.jsx)("div",{children:Object(y.jsx)("img",{src:Gt,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"100%"}})})}var Jt=n.p+"static/media/cym_d.8652356e.svg";function Ut(){return Object(y.jsx)("div",{children:Object(y.jsx)("img",{src:Jt,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"90%"}})})}function Yt(){return Object(s.useEffect)((function(){ot.a.highlightAll()}),[]),Object(y.jsx)("div",{children:et.map((function(t){return Object(y.jsxs)("div",{className:"grid-container",style:{display:"grid",gridTemplateColumns:" 1fr 1fr",gridGap:"20px"},children:[Object(y.jsx)("pre",{className:"grid-child ",children:Object(y.jsx)("code",{className:"language-clike",children:JSON.stringify(t,null,"\t")})}),Object(y.jsx)("div",{className:"grid-child",children:Object(y.jsxs)("div",{style:{maxWidth:"400px",border:"solid",fontSize:".9em",color:"black",margin:"60px 0px 25px 0",backgroundColor:"lightgrey"},children:[Object(y.jsx)("div",{style:{width:"100%",borderBottom:"solid 3px",fontSize:"1.2em"},children:t.name}),t.extras.library&&Object(y.jsxs)("div",{style:{width:"100%",borderBottom:"solid 2px"},children:["Library=",t.extras.library]}),t.ins&&t.ins.length>0&&t.ins.map((function(t){return Object(y.jsx)("div",{children:Object(y.jsx)("p",{children:t})},t)})),t.outs&&t.outs.length>0&&t.outs.map((function(t){return Object(y.jsx)("div",{children:Object(y.jsx)("p",{children:t})},t)}))]})})]},t.name)}))})}function Qt(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsxs)("header",{className:"App-header",children:[Object(y.jsxs)(w.c,{children:[Object(y.jsx)(w.a,{path:"/mdd4/",element:Object(y.jsx)(Vt,{})}),Object(y.jsx)(w.a,{path:"/mdd4/models",element:Object(y.jsx)(qt,{})}),Object(y.jsx)(w.a,{path:"/mdd4/state",element:Object(y.jsx)(Ut,{})}),Object(y.jsx)(w.a,{path:"/mdd4/palette",element:Object(y.jsx)(Yt,{})}),Object(y.jsx)(w.a,{path:"/mdd4/editor",element:Object(y.jsx)(Kt,{})})]}),Object(y.jsx)(k,{})]})})}i.a.render(Object(y.jsx)(a.a,{children:Object(y.jsx)(Qt,{})}),document.getElementById("root"))}},[[722,1,2]]]);
//# sourceMappingURL=main.553d264c.chunk.js.map