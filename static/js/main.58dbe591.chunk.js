(this.webpackJsonpmdd4iot=this.webpackJsonpmdd4iot||[]).push([[0],{407:function(t,e,n){},408:function(t,e,n){},417:function(t,e,n){},689:function(t,e,n){},690:function(t,e,n){},694:function(t,e,n){"use strict";n.r(e);var i=n(91),o=n.n(i),r=(n(407),n(408),n(73)),a=n(0),s=n.n(a),c=n(715),l=n(716),d=n(390),u=n.n(d),p=n(393),h=n.n(p),g=n(391),b=n.n(g),j=n(392),O=n.n(j),f=n(717),v=n(394),m=n.n(v),y=n(36),x=Object(y.b)({}),P=n(1);function k(){var t=Object(a.useState)("/"),e=Object(r.a)(t,2),n=e[0],i=e[1],o=x.location.pathname;return n!==o&&i(o),Object(P.jsx)(f.a,{position:"fixed",color:"primary",style:{top:"auto",bottom:0},children:Object(P.jsxs)(c.a,{value:n,onChange:function(t,e){i(e),x.push(e)},showLabels:!0,children:["location.pathname",Object(P.jsx)(l.a,{label:"Home",value:"/",icon:Object(P.jsx)(u.a,{})}),Object(P.jsx)(l.a,{label:"Models",value:"/models",icon:Object(P.jsx)(b.a,{})}),Object(P.jsx)(l.a,{label:"State",value:"/state",icon:Object(P.jsx)(O.a,{})}),Object(P.jsx)(l.a,{label:"Editor",value:"/editor",icon:Object(P.jsx)(h.a,{})}),Object(P.jsx)(l.a,{label:"Palette",value:"/palette",icon:Object(P.jsx)(m.a,{})})]})})}var M=n(27),E=n(240),w=n.n(E),C=(n(417),n(21)),I=n(243),S=n(395),D=function(){var t=Object(a.useRef)(null),e=Object(a.useState)('function test() {}\n\nconsole.log("hello");'),n=Object(r.a)(e,2),i=n[0],o=n[1],c=Object(a.useCallback)((function(t){o(t.slice(0,-1))}),[]);return Object(S.a)(t,c,{disabled:!1,indentation:2}),Object(P.jsx)(I.a,Object(C.a)(Object(C.a)({},I.b),{},{code:i,language:"jsx",children:function(e){var n=e.className,i=e.style,o=e.tokens,r=(e.getLineProps,e.getTokenProps);return Object(P.jsx)("pre",{className:n,style:i,ref:t,children:o.map((function(t,e){return Object(P.jsxs)(s.a.Fragment,{children:[t.filter((function(t){return!t.empty})).map((function(t,e){return Object(P.jsx)("span",Object(C.a)({},r({token:t,key:e})))})),"\n"]},e)}))})}}))};function z(t){var e="";if(0===Object.keys(t).length)return"// Empty Diagram!";var n=[];Object.entries(t.layers[0].models).forEach((function(t){n.push(t[1])}));var i=[],o=[],r=[],a=[],s=[];if(Object.entries(t.layers[1].models).forEach((function(t){var e=t[1];switch(i.push(e),e.extras.type){case"component":e.instance=e.name.toLowerCase()+r.filter((function(t){return t.extras.library===e.extras.library})).length,r.push(e),s.includes(e.extras.library)||s.push(e.extras.library);break;case"controller":a.push(e);break;case"logic":o.push(e)}})),0===i.length)return"// You need at least one Node!";if(0===a.length)return"// You need an Arduino!";if(a.length>1)return"// Only one Arduino allowed!";var c=a[0],l=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach((function(t){e+=t})),e+="\n"},d=function(t){return n.find((function(e){return e.id===t}))},u=function(t,e){return i.find((function(e){return e.id===t})).ports.find((function(t){return t.id===e}))},p=function(t){return i.find((function(e){return e.id===t}))},h=function(t,e){try{var n=t.ports.find((function(t){return t.name===e})).links[0],i=d(n),o=u(i.source,i.sourcePort),r=g(o);return"variable"===r.extras.type?r.content:"component"===r.extras.type?r.instance+"."+o.name:"Unknown extras.type"}catch(a){return"/* Lacking Value */"}},g=function(t){return i.find((function(e){return e.id===t.parentNode}))};l("/* Code generated for ",c.name),l("Analog ports N/"+c.extras.analogPorts),l("Digital ports M/"+c.extras.digitalPorts),l("*/"),l(""),s.forEach((function(t){l("#include <"+t+">"),r.forEach((function(e){e.extras.library===t&&l(e.name+" "+e.instance)})),l("")}));var b=function(t){return String(t.split(" ").slice(-1))},j=null;return c.ports.forEach((function(t){l(t.label,"{"),t.links.forEach((function(t){var e=d(t),n=u(e.target,e.targetPort),i=p(n.parentNode),o=u(e.source,e.sourcePort),r=p(o.parentNode);if("Condition"===i.name){var a,s=h(i,"x"),c=h(i,"y"),O=function(t){try{var e=t.ports.find((function(t){return"True"===t.name})).links[0],n=d(e);return u(n.target,n.targetPort)}catch(i){return{label:"// Lacking Outcome"}}}(i);console.log("here",e,i,n,s,c,O),l("if (",s," "+i.content+" ",c,") {"),l((null===(a=g(O))||void 0===a?void 0:a.instance)+"."+O.label),l("}\n")}else"variable"===i.extras.type?(j=i.content,i.ports.forEach((function(t){t.links.forEach((function(t){var e,n,i=d(t),o=u(i.target,i.targetPort),r=p(o.parentNode);r.instance&&j&&(l(r.instance+"."+(e=b(o.name),n=j,console.log("replacing",e,n),e.split("(").shift()+"("+n+")")),j=null)}))}))):i.instance?l(i.instance+"."+b(n.name)):l(r.instance+"."+b(o.name))})),l("}\n")})),function(t){var e=[],n=0;return t.split("\n").forEach((function(t){t.includes("}")&&n--,e.push("    ".repeat(n)+t),t.includes("{")&&n++})),e.join("\n")}(e)}function N(){var t=Object(a.useState)("Initializing Generator"),e=Object(r.a)(t,2),n=e[0],i=e[1];return Object(a.useEffect)((function(){w.a.highlightAll(),setInterval((function(){try{var t=localStorage.getItem("model");t!==localStorage.getItem("oldModel")&&(localStorage.setItem("oldModel",t||"{}"),i(z(JSON.parse(t||"{}"))),w.a.highlightAll())}catch(e){}}),1500)}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{className:"Code",children:Object(P.jsx)("pre",{children:Object(P.jsx)("code",{className:"language-clike",children:n})})}),Object(P.jsx)(D,{})]})}var T,A,F=n(26),L=n(7),B=n(8),R=n(10),W=n(9),H=n(14);(A||(A={})).Tray=H.default.div(T||(T=Object(F.a)(["\n\t\tmin-width: 200px;\n\t\tbackground: rgb(20, 20, 20);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t"])));var K,G,V=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){return Object(L.a)(this,n),e.apply(this,arguments)}return Object(B.a)(n,[{key:"render",value:function(){return Object(P.jsx)(A.Tray,{children:this.props.children})}}]),n}(a.Component);!function(t){t.Tray=H.default.div(K||(K=Object(F.a)(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tfont-size:0.8em;\n\t\tpadding: 0px 5px;\n\t\tmargin:\t 0px ;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 100px;\n\t\tmargin-bottom: 2px;\n\t\tcursor: pointer;\n\t"])),(function(t){return t.color}))}(G||(G={}));var U,J,Y,q=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){return Object(L.a)(this,n),e.apply(this,arguments)}return Object(B.a)(n,[{key:"render",value:function(){var t=this;return Object(P.jsx)(G.Tray,{color:this.props.color||"red",draggable:!0,onDragStart:function(e){e.dataTransfer.setData("storm-diagram-node",JSON.stringify(t.props.model))},className:"tray-item",children:this.props.name})}}]),n}(a.Component),Q=n(20),X=n(16),Z=n(12),$=n.n(Z),tt=n(18),et=n(242),nt=n(49),it=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(L.a)(this,n),e.call(this,Object(C.a)({type:"default",width:t.width||3,color:t.color||"gray",selectedColor:t.selectedColor||"rgb(0,192,255)",curvyness:50},t))}return Object(B.a)(n,[{key:"calculateControlOffset",value:function(t){return t.getOptions().alignment===tt.PortModelAlignment.RIGHT?[this.options.curvyness||0,0]:t.getOptions().alignment===tt.PortModelAlignment.LEFT?[-(this.options.curvyness||0),0]:t.getOptions().alignment===tt.PortModelAlignment.TOP?[0,-(this.options.curvyness||0)]:[0,this.options.curvyness||0]}},{key:"getSVGPath",value:function(){if(2===this.points.length){var t,e,n=new nt.BezierCurve;if(n.setSource(this.getFirstPoint().getPosition()),n.setTarget(this.getLastPoint().getPosition()),n.setSourceControl(this.getFirstPoint().getPosition().clone()),n.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort)(t=n.getSourceControl()).translate.apply(t,Object(et.a)(this.calculateControlOffset(this.getSourcePort())));if(this.targetPort)(e=n.getTargetControl()).translate.apply(e,Object(et.a)(this.calculateControlOffset(this.getTargetPort())));return n.getSVGCurve()}}},{key:"serialize",value:function(){return Object(C.a)(Object(C.a)({},Object(Q.a)(Object(X.a)(n.prototype),"serialize",this).call(this)),{},{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor})}},{key:"deserialize",value:function(t){Object(Q.a)(Object(X.a)(n.prototype),"deserialize",this).call(this,t),this.options.color=t.data.color,this.options.width=t.data.width,this.options.curvyness=t.data.curvyness,this.options.selectedColor=t.data.selectedColor}},{key:"setWidth",value:function(t){this.options.width=t,this.fireEvent({width:t},"widthChanged")}},{key:"setColor",value:function(t){this.options.color=t,this.fireEvent({color:t},"colorChanged")}}]),n}(tt.LinkModel),ot=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(t,i,o){return Object(L.a)(this,n),i&&(t={in:!!t,name:i,label:o}),t=t,e.call(this,Object(C.a)({label:t.label||t.name,alignment:t.in?tt.PortModelAlignment.LEFT:tt.PortModelAlignment.RIGHT,type:"default"},t))}return Object(B.a)(n,[{key:"deserialize",value:function(t){Object(Q.a)(Object(X.a)(n.prototype),"deserialize",this).call(this,t),this.options.in=t.data.in,this.options.label=t.data.label}},{key:"serialize",value:function(){return Object(C.a)(Object(C.a)({},Object(Q.a)(Object(X.a)(n.prototype),"serialize",this).call(this)),{},{in:this.options.in,label:this.options.label})}},{key:"canLinkToPort",value:function(t){return!0}},{key:"createLinkModel",value:function(){return new it}}]),n}(tt.PortModel),rt=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return Object(L.a)(this,n),"string"===typeof i&&(i={name:i,color:o}),(t=e.call(this,Object(C.a)({type:"default",name:"Untitled",color:"rgb(0,192,255)"},i))).portsIn=void 0,t.portsOut=void 0,t.extras=void 0,t.portsOut=[],t.portsIn=[],t}return Object(B.a)(n,[{key:"doClone",value:function(t,e){e.portsIn=[],e.portsOut=[],Object(Q.a)(Object(X.a)(n.prototype),"doClone",this).call(this,t,e)}},{key:"removePort",value:function(t){Object(Q.a)(Object(X.a)(n.prototype),"removePort",this).call(this,t),t.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(t),1):this.portsOut.splice(this.portsOut.indexOf(t),1)}},{key:"addPort",value:function(t){return Object(Q.a)(Object(X.a)(n.prototype),"addPort",this).call(this,t),t.getOptions().in?-1===this.portsIn.indexOf(t)&&this.portsIn.push(t):-1===this.portsOut.indexOf(t)&&this.portsOut.push(t),t}},{key:"addInPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new ot({in:!0,name:t,label:t,alignment:tt.PortModelAlignment.LEFT});return e||this.portsIn.splice(0,0,n),this.addPort(n)}},{key:"addOutPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new ot({in:!1,name:t,label:t,alignment:tt.PortModelAlignment.RIGHT});return e||this.portsOut.splice(0,0,n),this.addPort(n)}},{key:"addExtras",value:function(t){return this.extras=t,this.extras}},{key:"deserialize",value:function(t){var e=this;Object(Q.a)(Object(X.a)(n.prototype),"deserialize",this).call(this,t),this.options.name=t.data.name,this.options.color=t.data.color,this.portsIn=Z.map(t.data.portsInOrder,(function(t){return e.getPortFromID(t)})),this.portsOut=Z.map(t.data.portsOutOrder,(function(t){return e.getPortFromID(t)})),this.extras=t.data.extras}},{key:"serialize",value:function(){return Object(C.a)(Object(C.a)({},Object(Q.a)(Object(X.a)(n.prototype),"serialize",this).call(this)),{},{name:this.options.name,color:this.options.color,portsInOrder:Z.map(this.portsIn,(function(t){return t.getID()})),portsOutOrder:Z.map(this.portsOut,(function(t){return t.getID()})),extras:this.extras})}},{key:"getInPorts",value:function(){return this.portsIn}},{key:"getOutPorts",value:function(){return this.portsOut}}]),n}(tt.NodeModel),at=n(13),st=n(81);!function(t){t.Container=H.default.div(U||(U=Object(F.a)(["\n\t\theight: 100%;\n\t\tbackground-color: ",";\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\tmin-height: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"])),(function(t){return t.background}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color})),t.Expand=Object(st.css)(J||(J=Object(F.a)(["\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\theight: 100%;\n\t\t}\n\t"])))}(Y||(Y={}));var ct,lt,dt,ut,pt,ht=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){return Object(L.a)(this,n),e.apply(this,arguments)}return Object(B.a)(n,[{key:"render",value:function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(st.Global,{styles:Y.Expand}),Object(P.jsx)(Y.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)",children:this.props.children})]})}}]),n}(a.Component),gt=n(11),bt=n.n(gt),jt=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(t){return Object(L.a)(this,n),e.call(this,{type:"diamond",name:t,alignment:t})}return Object(B.a)(n,[{key:"createLinkModel",value:function(){return new gt.DefaultLinkModel}}]),n}(gt.PortModel),Ot=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){var t;return Object(L.a)(this,n),(t=e.call(this,{type:"diamond"})).addPort(new jt(gt.PortModelAlignment.TOP)),t.addPort(new jt(gt.PortModelAlignment.LEFT)),t.addPort(new jt(gt.PortModelAlignment.BOTTOM)),t.addPort(new jt(gt.PortModelAlignment.RIGHT)),t}return n}(gt.NodeModel),ft=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(L.a)(this,n),(t=e.call(this,Object(C.a)(Object(C.a)({},i),{},{type:"editable-label"}))).value=void 0,t.value=i.value||"",t}return Object(B.a)(n,[{key:"serialize",value:function(){return Object(C.a)(Object(C.a)({},Object(Q.a)(Object(X.a)(n.prototype),"serialize",this).call(this)),{},{value:this.value})}},{key:"deserialize",value:function(t){Object(Q.a)(Object(X.a)(n.prototype),"deserialize",this).call(this,t),this.value=t.data.value}}]),n}(gt.LabelModel),vt=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt.PortModelAlignment.TOP;return Object(L.a)(this,n),e.call(this,{alignment:t,name:t})}return Object(B.a)(n,[{key:"serialize",value:function(){return Z.merge(Object(Q.a)(Object(X.a)(n.prototype),"serialize",this).call(this),{position:this.options.alignment})}}]),n}(gt.PortModel),mt=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"content";return Object(L.a)(this,n),(t=e.call(this,{type:"Editable"})).content=void 0,t.content=i,t.addPort(new vt(gt.PortModelAlignment.LEFT)),t.addPort(new vt(gt.PortModelAlignment.RIGHT)),t}return Object(B.a)(n,[{key:"serialize",value:function(){return $.a.merge(Object(Q.a)(Object(X.a)(n.prototype),"serialize",this).call(this),{content:this.content})}}]),n}(gt.NodeModel),yt=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return Object(L.a)(this,n),"string"===typeof i&&(i={name:i,color:o}),(t=e.call(this,Object(C.a)({type:"MyEditable",name:"Untitled",color:"rgb(0,192,255)",value:"value",content:"value"},i))).portsIn=void 0,t.portsOut=void 0,t.content=void 0,t.extras=void 0,t.content="value",t.portsOut=[],t.portsIn=[],t}return Object(B.a)(n,[{key:"doClone",value:function(t,e){e.portsIn=[],e.portsOut=[],Object(Q.a)(Object(X.a)(n.prototype),"doClone",this).call(this,t,e)}},{key:"removePort",value:function(t){Object(Q.a)(Object(X.a)(n.prototype),"removePort",this).call(this,t),t.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(t),1):this.portsOut.splice(this.portsOut.indexOf(t),1)}},{key:"addPort",value:function(t){return Object(Q.a)(Object(X.a)(n.prototype),"addPort",this).call(this,t),t.getOptions().in?-1===this.portsIn.indexOf(t)&&this.portsIn.push(t):-1===this.portsOut.indexOf(t)&&this.portsOut.push(t),t}},{key:"addInPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new ot({in:!0,name:t,label:t,alignment:tt.PortModelAlignment.LEFT});return e||this.portsIn.splice(0,0,n),this.addPort(n)}},{key:"addOutPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new ot({in:!1,name:t,label:t,alignment:tt.PortModelAlignment.RIGHT});return e||this.portsOut.splice(0,0,n),this.addPort(n)}},{key:"addExtras",value:function(t){return this.extras=t,this.extras}},{key:"deserialize",value:function(t){var e=this;Object(Q.a)(Object(X.a)(n.prototype),"deserialize",this).call(this,t),this.options.name=t.data.name,this.options.color=t.data.color,this.portsIn=Z.map(t.data.portsInOrder,(function(t){return e.getPortFromID(t)})),this.portsOut=Z.map(t.data.portsOutOrder,(function(t){return e.getPortFromID(t)})),this.extras=t.data.extras}},{key:"serialize",value:function(){return Object(C.a)(Object(C.a)({},Object(Q.a)(Object(X.a)(n.prototype),"serialize",this).call(this)),{},{name:this.options.name,color:this.options.color,portsInOrder:Z.map(this.portsIn,(function(t){return t.getID()})),portsOutOrder:Z.map(this.portsOut,(function(t){return t.getID()})),extras:this.extras,content:this.content})}},{key:"getInPorts",value:function(){return this.portsIn}},{key:"getOutPorts",value:function(){return this.portsOut}}]),n}(tt.NodeModel);!function(t){t.Body=H.default.div(ct||(ct=Object(F.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%;\n\t"]))),t.Header=H.default.div(lt||(lt=Object(F.a)(["\n\t\tdisplay: flex;\n\t\tbackground: rgb(30, 30, 30);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial, sans-serif;\n\t\tpadding: 10px;\n\t\talign-items: center;\n\t"]))),t.Content=H.default.div(dt||(dt=Object(F.a)(["\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]))),t.Layer=H.default.div(ut||(ut=Object(F.a)(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"])))}(pt||(pt={}));var xt,Pt,kt="",Mt=[{name:"Arduino Uno",color:"green",extras:{type:"controller",analogPorts:6,digitalPorts:14},ins:[],outs:["setup()","loop()"]},{name:"Arduino Mega",color:"green",extras:{type:"controller",analogPorts:16,digitalPorts:54},ins:[],outs:["setup()","loop()"]},{name:"Condition",extras:{type:"logic"},color:"grey",outs:["True","False"],ins:["trigger","x","y"]},{name:"Loop",extras:{type:"logic"},color:"grey",outs:["True","False"],ins:["startValue","stopValue"]},{name:"Led",color:"red",extras:{type:"component",library:"Setter.h"},ins:["setValue()"],outs:[]},{name:"TemperatureSensor",color:"blue",extras:{type:"component",library:"Getter.h"},ins:[],outs:["getValue()"]},{name:"Button",color:"blue",extras:{type:"component",library:"Getter.h"},ins:["setValue(bool)"],outs:[]},{name:"Servo",color:"orange",extras:{type:"component",library:"Servo.h"},ins:["void detach()","void write(int)","void writeMicroseconds(int)"],outs:["uint8_t attach(int)","uint8_t attach(int, int, int)","int read()","int readMicroseconds()","bool attached()"]},{name:"Stepper",color:"orange",extras:{type:"component",library:"Stepper.h"},ins:["Stepper(int, int, int)","Stepper(int, int, int, int, int)","Stepper(int, int, int, int, int, int)","-","void setSpeed(long whatSpeed)","void step(int number_of_steps)"],outs:["int version(void)"]},{name:"Variable Integer",color:"purple",extras:{type:"variable"},ins:["void setValue(int)"],outs:["int getValue()"]},{name:"Variable Boolean",color:"purple",extras:{type:"variable"},ins:["void setValue(bool)"],outs:["bool getValue()"]},{name:"Constant Integer",color:"purple",extras:{type:"variable"},ins:[],outs:["value"]},{name:"Constant Boolean",color:"purple",extras:{type:"variable"},ins:[],outs:["value"]},{name:"Diamond",color:"white",extras:{type:"testing"},ins:[],outs:[]},{name:"LabelEdit",color:"white",extras:{type:"testing"},ins:[],outs:[]},{name:"NodeEdit",color:"white",extras:{type:"testing"},ins:[],outs:[]}],Et=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){return Object(L.a)(this,n),e.apply(this,arguments)}return Object(B.a)(n,[{key:"componentDidMount",value:function(){var t=this;setInterval((function(){var e=JSON.stringify(t.props.app.getDiagramEngine().getModel().serialize());e!==localStorage.getItem("model")&&localStorage.setItem("model",e)}),1500)}},{key:"render",value:function(){var t=this;return Object(P.jsx)(pt.Body,{children:Object(P.jsxs)(pt.Content,{style:{width:"100%",height:"100%"},children:[Object(P.jsx)(V,{children:Mt.map((function(t){return t.extras.type!==kt?(kt=t.extras.type,Object(P.jsxs)("div",{children:[Object(P.jsxs)("p",{style:{margin:"0px",fontSize:"0.9em"},children:[t.extras.type,":"]}),Object(P.jsx)(q,{model:t,name:t.name,color:t.color})]},t.name)):Object(P.jsx)(q,{model:t,name:t.name,color:t.color},t.name)}))}),Object(P.jsx)(pt.Layer,{onDrop:function(e){var n=JSON.parse(e.dataTransfer.getData("storm-diagram-node"));if(n)if("Diamond"===n.name){var i=new Ot;i.setPosition(t.props.app.getDiagramEngine().getRelativeMousePoint(e)),t.props.app.getDiagramEngine().getModel().addNode(i)}else if("LabelEdit"===n.name){var o=new gt.DefaultNodeModel("Node1","red"),r=o.addOutPort("out");o.setPosition(250,100);var a=new gt.DefaultNodeModel("Node2","green"),s=a.addInPort("in");a.setPosition(800,300);var c=r.link(s);c.addLabel(new ft({value:"Hello, I am label!"})),t.props.app.getDiagramEngine().getModel().addAll(o,r,a,s,c)}else if("NodeEdit"===n.name){var l=new mt("Node1");l.setPosition(100,200),l.setPosition(t.props.app.getDiagramEngine().getRelativeMousePoint(e)),t.props.app.getDiagramEngine().getModel().addNode(l)}else if("variable"===n.extras.type){var d=new yt(n.name,n.color,"value");d.extras=n.extras,n.outs.forEach((function(t){d.addOutPort(t)})),n.ins.forEach((function(t){d.addInPort(t)})),d.setPosition(t.props.app.getDiagramEngine().getRelativeMousePoint(e)),t.props.app.getDiagramEngine().getModel().addNode(d)}else if("logic"===n.extras.type){var u=new yt(n.name,n.color,"value");u.extras=n.extras,n.outs.forEach((function(t){u.addOutPort(t)})),n.ins.forEach((function(t){u.addInPort(t)})),u.setPosition(t.props.app.getDiagramEngine().getRelativeMousePoint(e)),t.props.app.getDiagramEngine().getModel().addNode(u)}else{var p=new rt(n.name,n.color);p.extras=n.extras,n.outs.forEach((function(t){p.addOutPort(t)})),n.ins.forEach((function(t){p.addInPort(t)})),p.setPosition(t.props.app.getDiagramEngine().getRelativeMousePoint(e)),t.props.app.getDiagramEngine().getModel().addNode(p)}t.forceUpdate()},onDragOver:function(t){t.preventDefault()},children:Object(P.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(P.jsx)(ht,{children:Object(P.jsx)(at.CanvasWidget,{engine:this.props.app.getDiagramEngine()})})})})]})})}}]),n}(a.Component),wt=n(396);!function(t){t.Label=H.default.div(xt||(xt=Object(F.a)(["\n\t\tuser-select: none;\n\t\tpointer-events: auto;\n\t"])))}(Pt||(Pt={}));var Ct,It,St=function(t){var e=a.useState(t.model.value),n=Object(r.a)(e,2),i=n[0],o=n[1];return Object(P.jsxs)(Pt.Label,{children:[Object(P.jsx)("input",{value:i,onChange:function(e){var n=e.target.value;o(n),t.model.value=n}}),Object(P.jsx)("button",{onClick:function(){return Object(wt.action)("model eventDidFire")("You clicked the button")},children:"Click me!"})]})},Dt=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){return Object(L.a)(this,n),e.call(this,"editable-label")}return Object(B.a)(n,[{key:"generateModel",value:function(){return new ft}},{key:"generateReactWidget",value:function(t){return Object(P.jsx)(St,{model:t.model})}}]),n}(at.AbstractReactFactory),zt=n(55),Nt=(n(689),n(398)),Tt=n.n(Nt),At=function(t){var e=t.content,n=t.onChange,i=t.onBlurOrEnter;return Object(P.jsx)(Tt.a,{autoFocus:!0,inputStyle:{padding:1,borderStyle:"dotted",borderWidth:1,borderColor:"black"},type:"text",value:e,onChange:n,onBlur:i,onKeyDown:function(t){13===t.keyCode&&i()}})},Ft=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(t){var i;return Object(L.a)(this,n),(i=e.call(this,t)).state={},i}return Object(B.a)(n,[{key:"render",value:function(){return Object(P.jsx)("div",{children:this.props.beingEdited&&this.props.editingKey===this.props.elementKey?Object(P.jsx)(At,{content:this.props.content,onChange:this.props.onChange,onBlurOrEnter:this.props.onBlurOrEnter}):Object(P.jsx)("p",{style:{margin:0,padding:0,fontStyle:this.props.isAbstract?"italic":"normal"},children:this.props.content})})}}]),n}(a.Component),Lt=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(t){var i;return Object(L.a)(this,n),(i=e.call(this,t)).divElement=void 0,i._editableObjectDoubleClick=function(t){i.state.editingSomething||i.setState({editingSomething:!0,editingKey:t})},i._contentOnChange=function(t){i.props.nodeModel.content=t.currentTarget.value,i.setState({content:t.currentTarget.value})},i._onBlurOrEnter=function(){i.setState({editingSomething:!1,editingKey:""})},i.state={content:"",height:0,width:0,editingSomething:!1,editingKey:""},i._editableObjectDoubleClick=i._editableObjectDoubleClick.bind(Object(zt.a)(i)),i._contentOnChange=i._contentOnChange.bind(Object(zt.a)(i)),i._onBlurOrEnter=i._onBlurOrEnter.bind(Object(zt.a)(i)),i}return Object(B.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){var t=this.props.nodeModel.content;this.setState({content:t})}},{key:"componentDidMount",value:function(){var t=this.divElement.clientHeight,e=this.divElement.clientWidth;this.setState({height:t,width:e})}},{key:"componentDidUpdate",value:function(){var t=this.divElement.clientHeight,e=this.divElement.clientWidth;this.state.height===t&&this.state.width===e||this.setState({height:t,width:e})}},{key:"render",value:function(){var t=this;return Object(P.jsxs)("div",{ref:function(e){return t.divElement=e},className:"editable-node",children:[Object(P.jsx)("div",{className:"editable-border",children:Object(P.jsx)("div",{className:"editable-header",children:Object(P.jsx)("div",{onDoubleClick:function(){t._editableObjectDoubleClick("content")},children:Object(P.jsx)(Ft,{elementKey:"content",editingKey:this.state.editingKey,beingEdited:this.state.editingSomething,content:this.props.nodeModel.content,onChange:this._contentOnChange,onBlurOrEnter:this._onBlurOrEnter})})})}),Object(P.jsx)("div",{style:{position:"absolute",zIndex:10,background:"rgba(0,0,250,0.5)",left:-15,top:this.state.height/2-8},children:Object(P.jsx)(gt.PortWidget,{style:{width:15,height:15},port:this.props.nodeModel.getPort(gt.PortModelAlignment.LEFT),engine:this.props.engine})}),Object(P.jsx)("div",{style:{position:"absolute",zIndex:10,background:"rgba(0,0,250,0.5)",left:this.state.width,top:this.state.height/2-8},children:Object(P.jsx)(gt.PortWidget,{style:{width:15,height:15},port:this.props.nodeModel.getPort(gt.PortModelAlignment.RIGHT),engine:this.props.engine})})]})}}]),n}(a.Component),_t=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){return Object(L.a)(this,n),e.call(this,"Editable")}return Object(B.a)(n,[{key:"generateModel",value:function(t){return new mt("Class")}},{key:"generateReactWidget",value:function(t){return Object(P.jsx)(Lt,{nodeModel:t.model,engine:this.engine})}}]),n}(at.AbstractReactFactory);!function(t){t.Port=H.default.div(Ct||(Ct=Object(F.a)(["\n\t\twidth: 16px;\n\t\theight: 16px;\n\t\tz-index: 10;\n\t\tbackground: rgba(0, 0, 0, 0.5);\n\t\tborder-radius: 8px;\n\t\tcursor: pointer;\n\n\t\t&:hover {\n\t\t\tbackground: rgba(0, 0, 0, 1);\n\t\t}\n\t"])))}(It||(It={}));var Bt,Rt,Wt,Ht,Kt,Gt,Vt=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){return Object(L.a)(this,n),e.apply(this,arguments)}return Object(B.a)(n,[{key:"render",value:function(){return Object(P.jsxs)("div",{className:"diamond-node",style:{position:"relative",width:this.props.size,height:this.props.size},children:[Object(P.jsx)("svg",{width:this.props.size,height:this.props.size,dangerouslySetInnerHTML:{__html:'\n          <g id="Layer_1">\n          </g>\n          <g id="Layer_2">\n            <polygon fill="mediumpurple" stroke="'.concat(this.props.node.isSelected()?"white":"#000000",'" stroke-width="3" stroke-miterlimit="10" points="10,')+this.props.size/2+" "+this.props.size/2+",10 "+(this.props.size-10)+","+this.props.size/2+" "+this.props.size/2+","+(this.props.size-10)+' "/>\n          </g>\n        '}}),Object(P.jsx)(gt.PortWidget,{style:{top:this.props.size/2-8,left:-8,position:"absolute"},port:this.props.node.getPort(gt.PortModelAlignment.LEFT),engine:this.props.engine,children:Object(P.jsx)(It.Port,{})}),Object(P.jsx)(gt.PortWidget,{style:{left:this.props.size/2-8,top:-8,position:"absolute"},port:this.props.node.getPort(gt.PortModelAlignment.TOP),engine:this.props.engine,children:Object(P.jsx)(It.Port,{})}),Object(P.jsx)(gt.PortWidget,{style:{left:this.props.size-8,top:this.props.size/2-8,position:"absolute"},port:this.props.node.getPort(gt.PortModelAlignment.RIGHT),engine:this.props.engine,children:Object(P.jsx)(It.Port,{})}),Object(P.jsx)(gt.PortWidget,{style:{left:this.props.size/2-8,top:this.props.size-8,position:"absolute"},port:this.props.node.getPort(gt.PortModelAlignment.BOTTOM),engine:this.props.engine,children:Object(P.jsx)(It.Port,{})})]})}}]),n}(a.Component),Ut=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){return Object(L.a)(this,n),e.call(this,"diamond")}return Object(B.a)(n,[{key:"generateReactWidget",value:function(t){return Object(P.jsx)(Vt,{engine:this.engine,size:50,node:t.model})}},{key:"generateModel",value:function(t){return new Ot}}]),n}(at.AbstractReactFactory),Jt=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(t,i){var o;return Object(L.a)(this,n),(o=e.call(this,t)).cb=void 0,o.cb=i,o}return Object(B.a)(n,[{key:"generateModel",value:function(t){return this.cb(t.initialConfig)}}]),n}(at.AbstractModelFactory);n(690);!function(t){t.Node=H.default.div(Bt||(Bt=Object(F.a)(["\n\t\tbackground-color: ",";\n\t\tborder-radius: 5px;\n\t\tfont-family: sans-serif;\n\t\tcolor: white;\n\t\tborder: solid 2px black;\n\t\toverflow: visible;\n\t\tfont-size: 11px;\n\t\tborder: solid 2px ",";\n\t"])),(function(t){return t.background}),(function(t){return t.selected?"rgb(0,192,255)":"black"})),t.Title=H.default.div(Rt||(Rt=Object(F.a)(["\n\t\tbackground: rgba(0, 0, 0, 0.3);\n\t\tdisplay: flex;\n\t\twhite-space: nowrap;\n\t\tjustify-items: center;\n\t"]))),t.TitleName=H.default.div(Wt||(Wt=Object(F.a)(["\n\t\tflex-grow: 1;\n\t\tpadding: 5px 5px;\n\t"]))),t.Ports=H.default.div(Ht||(Ht=Object(F.a)(["\n\t\tdisplay: flex;\n\t\tbackground-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));\n\t"]))),t.PortsContainer=H.default.div(Kt||(Kt=Object(F.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t&:first-of-type {\n\t\t\tmargin-right: 10px;\n\t\t}\n\n\t\t&:only-child {\n\t\t\tmargin-right: 0px;\n\t\t}\n\t"])))}(Gt||(Gt={}));var Yt=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(t){var i;return Object(L.a)(this,n),(i=e.call(this,t)).divElement=void 0,i.generatePort=function(t){return Object(P.jsx)(gt.DefaultPortLabel,{engine:i.props.engine,port:t},t.getID())},i._editableObjectDoubleClick=function(t){i.state.editingSomething||i.setState({editingSomething:!0,editingKey:t})},i._contentOnChange=function(t){i.props.nodeModel.content=t.currentTarget.value,i.setState({content:t.currentTarget.value})},i._onBlurOrEnter=function(){i.setState({editingSomething:!1,editingKey:""})},i.state={content:"",height:0,width:0,editingSomething:!1,editingKey:""},i._editableObjectDoubleClick=i._editableObjectDoubleClick.bind(Object(zt.a)(i)),i._contentOnChange=i._contentOnChange.bind(Object(zt.a)(i)),i._onBlurOrEnter=i._onBlurOrEnter.bind(Object(zt.a)(i)),i}return Object(B.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){var t=this.props.nodeModel.content;this.setState({content:t})}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var t=this;return Object(P.jsxs)(Gt.Node,{"data-default-node-name":this.props.nodeModel.getOptions().name,selected:this.props.nodeModel.isSelected(),background:this.props.nodeModel.getOptions().color,children:[Object(P.jsxs)(Gt.Title,{children:[Object(P.jsxs)(Gt.TitleName,{children:[this.props.nodeModel.getOptions().name,":"]}),Object(P.jsx)("div",{className:"editable-node",ref:function(e){return t.divElement=e},children:Object(P.jsx)("div",{className:"editable-border",children:Object(P.jsx)("div",{className:"editable-header",children:Object(P.jsx)("div",{onDoubleClick:function(){t._editableObjectDoubleClick("content")},children:Object(P.jsx)(Ft,{elementKey:"content",editingKey:this.state.editingKey,beingEdited:this.state.editingSomething,content:this.props.nodeModel.content,onChange:this._contentOnChange,onBlurOrEnter:this._onBlurOrEnter})})})})})]}),Object(P.jsxs)(Gt.Ports,{children:[Object(P.jsx)(Gt.PortsContainer,{children:_.map(this.props.nodeModel.getInPorts(),this.generatePort)}),Object(P.jsx)(Gt.PortsContainer,{children:_.map(this.props.nodeModel.getOutPorts(),this.generatePort)})]})]})}}]),n}(a.Component),qt=function(t){Object(R.a)(n,t);var e=Object(W.a)(n);function n(){return Object(L.a)(this,n),e.call(this,"MyEditable")}return Object(B.a)(n,[{key:"generateModel",value:function(t){return new yt("name","pink","value")}},{key:"generateReactWidget",value:function(t){return Object(P.jsx)(Yt,{nodeModel:t.model,engine:this.engine})}}]),n}(at.AbstractReactFactory),Qt=function(){function t(){Object(L.a)(this,t),this.activeModel=void 0,this.diagramEngine=void 0,this.diagramEngine=bt.a(),this.diagramEngine.getPortFactories().registerFactory(new Jt("diamond",(function(t){return new jt(gt.PortModelAlignment.LEFT)}))),this.diagramEngine.getLabelFactories().registerFactory(new Dt),this.diagramEngine.getNodeFactories().registerFactory(new _t),this.diagramEngine.getNodeFactories().registerFactory(new Ut),this.diagramEngine.getNodeFactories().registerFactory(new qt),this.newModel()}return Object(B.a)(t,[{key:"newModel",value:function(){this.activeModel=new gt.DiagramModel,this.diagramEngine.setModel(this.activeModel)}},{key:"getActiveDiagram",value:function(){return this.activeModel}},{key:"getDiagramEngine",value:function(){return this.diagramEngine}}]),t}(),Xt=function(){var t=new Qt;return Object(P.jsx)(Et,{app:t})};function Zt(){return Object(P.jsxs)("div",{className:"float-container",children:[Object(P.jsx)("div",{className:"float-child-left",children:Object(P.jsx)(Xt,{})}),Object(P.jsx)("div",{className:"float-child-right",children:Object(P.jsx)(N,{})})]})}function $t(){return Object(P.jsx)("div",{children:Object(P.jsx)("h2",{children:"Welcome to MDD4IoT!"})})}var te=n.p+"static/media/staticCYM.6a3ccd64.png";function ee(){return Object(P.jsx)("div",{children:Object(P.jsx)("img",{src:te,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"100%"}})})}var ne=n.p+"static/media/state.da9f951e.png";function ie(){return Object(P.jsx)("div",{children:Object(P.jsx)("img",{src:ne,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"90%"}})})}function oe(){return Object(P.jsxs)("div",{children:[Object(P.jsx)("h3",{children:"Testing zone for now."}),Object(P.jsx)("div",{style:{width:"80vh",height:"60vh"}})]})}function re(){return Object(P.jsx)("div",{className:"App",children:Object(P.jsxs)("header",{className:"App-header",children:[Object(P.jsxs)(M.b,{history:x,children:[Object(P.jsx)(M.a,{path:"/",exact:!0,component:$t}),Object(P.jsx)(M.a,{path:"/models",exact:!0,component:ee}),Object(P.jsx)(M.a,{path:"/state",exact:!0,component:ie}),Object(P.jsx)(M.a,{path:"/palette",exact:!0,component:oe}),Object(P.jsx)(M.a,{path:"/editor",component:Zt})]}),Object(P.jsx)(k,{})]})})}var ae=n(238);o.a.render(Object(P.jsx)(ae.a,{children:Object(P.jsx)(re,{})}),document.getElementById("root"))}},[[694,1,2]]]);
//# sourceMappingURL=main.58dbe591.chunk.js.map