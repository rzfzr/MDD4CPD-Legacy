(this.webpackJsonpmdd4iot=this.webpackJsonpmdd4iot||[]).push([[0],{276:function(t,e,n){},277:function(t,e,n){},286:function(t,e,n){},516:function(t,e,n){"use strict";n.r(e);var r=n(66),o=n.n(r),a=(n(276),n(277),n(68)),i=n(0),s=n.n(i),c=n(536),l=n(537),u=n(264),d=n.n(u),h=n(267),p=n.n(h),b=n(265),j=n.n(b),f=n(266),g=n.n(f),O=n(538),v=n(268),m=n.n(v),x=n(25),y=Object(x.b)({}),k=n(2);function P(){var t=Object(i.useState)("/"),e=Object(a.a)(t,2),n=e[0],r=e[1],o=y.location.pathname;return n!==o&&r(o),Object(k.jsx)(O.a,{position:"fixed",color:"primary",style:{top:"auto",bottom:0},children:Object(k.jsxs)(c.a,{value:n,onChange:function(t,e){r(e),y.push(e)},showLabels:!0,children:["location.pathname",Object(k.jsx)(l.a,{label:"Home",value:"/",icon:Object(k.jsx)(d.a,{})}),Object(k.jsx)(l.a,{label:"Models",value:"/models",icon:Object(k.jsx)(j.a,{})}),Object(k.jsx)(l.a,{label:"State",value:"/state",icon:Object(k.jsx)(g.a,{})}),Object(k.jsx)(l.a,{label:"Editor",value:"/editor",icon:Object(k.jsx)(p.a,{})}),Object(k.jsx)(l.a,{label:"Palette",value:"/palette",icon:Object(k.jsx)(m.a,{})})]})})}var w=n(15),C=n(157),M=n.n(C),I=(n(286),n(24)),S=n(161),E=n(269),T=function(){var t=Object(i.useRef)(null),e=Object(i.useState)('function test() {}\n\nconsole.log("hello");'),n=Object(a.a)(e,2),r=n[0],o=n[1],c=Object(i.useCallback)((function(t){o(t.slice(0,-1))}),[]);return Object(E.a)(t,c,{disabled:!1,indentation:2}),Object(k.jsx)(S.a,Object(I.a)(Object(I.a)({},S.b),{},{code:r,language:"jsx",children:function(e){var n=e.className,r=e.style,o=e.tokens,a=(e.getLineProps,e.getTokenProps);return Object(k.jsx)("pre",{className:n,style:r,ref:t,children:o.map((function(t,e){return Object(k.jsxs)(s.a.Fragment,{children:[t.filter((function(t){return!t.empty})).map((function(t,e){return Object(k.jsx)("span",Object(I.a)({},a({token:t,key:e})))})),"\n"]},e)}))})}}))};function D(t){var e="";if(0===Object.keys(t).length)return"// Empty Diagram!";var n=[];Object.entries(t.layers[0].models).forEach((function(t){n.push(t[1])}));var r=[],o=[],a=[],i=[],s=[];if(Object.entries(t.layers[1].models).forEach((function(t){var e=t[1];switch(r.push(e),e.extras.type){case"component":e.instance=e.name.toLowerCase(),a.push(e),s.includes(e.extras.library)||s.push(e.extras.library);break;case"controller":i.push(e);break;case"logic":o.push(e)}})),console.log("Generating from model:",t,"Parsed ",r,o,a,i),0===r.length)return"// You need at least one Node!";if(0===i.length)return"// You need an Arduino!";if(i.length>1)return"// Only one Arduino allowed!";var c=i[0],l=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e+=t})),e+="\n"},u=function(t){return n.find((function(e){return e.id===t}))},d=function(t,e){return r.find((function(e){return e.id===t})).ports.find((function(t){return t.id===e}))},h=function(t){return r.find((function(e){return e.id===t}))},p=function(t){return r.find((function(e){return e.id===t.parentNode}))};return l("/* Code generated for ",c.name),l("Analog ports N/"+c.extras.analogPorts),l("Digital ports M/"+c.extras.digitalPorts),l("*/"),l(""),s.forEach((function(t){l("#include <"+t+">"),a.forEach((function(e){e.extras.library===t&&l(e.name+" "+e.instance)})),l("")})),c.ports.forEach((function(t){l(t.label,"{"),t.links.forEach((function(t){var e=u(t),n=d(e.target,e.targetPort),r=h(n.parentNode),o=d(e.source,e.sourcePort),a=h(o.parentNode);if("Condition"===r.name){var i,s,c=function(t){try{var e=t.ports.find((function(t){return"value"===t.name})).links[0],n=u(e);return d(n.source,n.sourcePort)}catch(r){return{name:"/* Lacking Value */"}}}(r),b=function(t){try{var e=t.ports.find((function(t){return"True"===t.name})).links[0],n=u(e);return d(n.target,n.targetPort)}catch(r){return{label:"// Lacking Outcome"}}}(r);l("if (",(null===(i=p(c))||void 0===i?void 0:i.instance)+"."+c.name,n.name.replace("if",""),") {"),l((null===(s=p(b))||void 0===s?void 0:s.instance)+"."+b.label),l("}\n")}else console.log("here",e,r,n),r.instance?l(r.instance+"."+n.name):l(a.instance+"."+o.name)})),l("}\n")})),function(t){var e=[],n=0;return t.split("\n").forEach((function(t){t.includes("}")&&n--,e.push("    ".repeat(n)+t),t.includes("{")&&n++})),e.join("\n")}(e)}function A(){var t=Object(i.useState)("Initializing Generator"),e=Object(a.a)(t,2),n=e[0],r=e[1];return Object(i.useEffect)((function(){M.a.highlightAll(),setInterval((function(){try{var t=localStorage.getItem("model");t!==localStorage.getItem("oldModel")&&(localStorage.setItem("oldModel",t||"{}"),r(D(JSON.parse(t||"{}"))),M.a.highlightAll())}catch(e){console.log(e)}}),1500)}),[]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"Code",children:Object(k.jsx)("pre",{children:Object(k.jsx)("code",{className:"language-clike",children:n})})}),Object(k.jsx)(T,{})]})}var N,L,z=n(39),F=n(22),G=n(23),H=n(29),J=n(28),V=n(13);(L||(L={})).Tray=V.default.div(N||(N=Object(z.a)(["\n\t\tmin-width: 200px;\n\t\tbackground: rgb(20, 20, 20);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t"])));var B,R,W=function(t){Object(H.a)(n,t);var e=Object(J.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){return Object(k.jsx)(L.Tray,{children:this.props.children})}}]),n}(i.Component);!function(t){t.Tray=V.default.div(B||(B=Object(z.a)(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tpadding: 5px;\n\t\tmargin:\t 0px 10px;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 5px;\n\t\tmargin-bottom: 2px;\n\t\tcursor: pointer;\n\t"])),(function(t){return t.color}))}(R||(R={}));var _,U,Y,q=function(t){Object(H.a)(n,t);var e=Object(J.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){var t=this;return Object(k.jsx)(R.Tray,{color:this.props.color||"red",draggable:!0,onDragStart:function(e){e.dataTransfer.setData("storm-diagram-node",JSON.stringify(t.props.model))},className:"tray-item",children:this.props.name})}}]),n}(i.Component),K=n(34),Q=n(19),X=n(7),Z=n(14),$=n(160),tt=n(38),et=function(t){Object(H.a)(n,t);var e=Object(J.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(F.a)(this,n),e.call(this,Object(I.a)({type:"default",width:t.width||3,color:t.color||"gray",selectedColor:t.selectedColor||"rgb(0,192,255)",curvyness:50},t))}return Object(G.a)(n,[{key:"calculateControlOffset",value:function(t){return t.getOptions().alignment===Z.PortModelAlignment.RIGHT?[this.options.curvyness||0,0]:t.getOptions().alignment===Z.PortModelAlignment.LEFT?[-(this.options.curvyness||0),0]:t.getOptions().alignment===Z.PortModelAlignment.TOP?[0,-(this.options.curvyness||0)]:[0,this.options.curvyness||0]}},{key:"getSVGPath",value:function(){if(2===this.points.length){var t,e,n=new tt.BezierCurve;if(n.setSource(this.getFirstPoint().getPosition()),n.setTarget(this.getLastPoint().getPosition()),n.setSourceControl(this.getFirstPoint().getPosition().clone()),n.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort)(t=n.getSourceControl()).translate.apply(t,Object($.a)(this.calculateControlOffset(this.getSourcePort())));if(this.targetPort)(e=n.getTargetControl()).translate.apply(e,Object($.a)(this.calculateControlOffset(this.getTargetPort())));return n.getSVGCurve()}}},{key:"serialize",value:function(){return Object(I.a)(Object(I.a)({},Object(K.a)(Object(Q.a)(n.prototype),"serialize",this).call(this)),{},{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor})}},{key:"deserialize",value:function(t){Object(K.a)(Object(Q.a)(n.prototype),"deserialize",this).call(this,t),this.options.color=t.data.color,this.options.width=t.data.width,this.options.curvyness=t.data.curvyness,this.options.selectedColor=t.data.selectedColor}},{key:"setWidth",value:function(t){this.options.width=t,this.fireEvent({width:t},"widthChanged")}},{key:"setColor",value:function(t){this.options.color=t,this.fireEvent({color:t},"colorChanged")}}]),n}(Z.LinkModel),nt=function(t){Object(H.a)(n,t);var e=Object(J.a)(n);function n(t,r,o){return Object(F.a)(this,n),r&&(t={in:!!t,name:r,label:o}),t=t,e.call(this,Object(I.a)({label:t.label||t.name,alignment:t.in?Z.PortModelAlignment.LEFT:Z.PortModelAlignment.RIGHT,type:"default"},t))}return Object(G.a)(n,[{key:"deserialize",value:function(t){Object(K.a)(Object(Q.a)(n.prototype),"deserialize",this).call(this,t),this.options.in=t.data.in,this.options.label=t.data.label}},{key:"serialize",value:function(){return Object(I.a)(Object(I.a)({},Object(K.a)(Object(Q.a)(n.prototype),"serialize",this).call(this)),{},{in:this.options.in,label:this.options.label})}},{key:"link",value:function(t,e){var n=this.createLinkModel(e);return n.setSourcePort(this),n.setTargetPort(t),n}},{key:"canLinkToPort",value:function(t){return!0}},{key:"createLinkModel",value:function(t){var e=Object(K.a)(Object(Q.a)(n.prototype),"createLinkModel",this).call(this);return!e&&t?t.generateModel({}):e||new et}}]),n}(Z.PortModel),rt=function(t){Object(H.a)(n,t);var e=Object(J.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return Object(F.a)(this,n),"string"===typeof r&&(r={name:r,color:o}),(t=e.call(this,Object(I.a)({type:"default",name:"Untitled",color:"rgb(0,192,255)"},r))).portsIn=void 0,t.portsOut=void 0,t.extras=void 0,t.portsOut=[],t.portsIn=[],t}return Object(G.a)(n,[{key:"doClone",value:function(t,e){e.portsIn=[],e.portsOut=[],Object(K.a)(Object(Q.a)(n.prototype),"doClone",this).call(this,t,e)}},{key:"removePort",value:function(t){Object(K.a)(Object(Q.a)(n.prototype),"removePort",this).call(this,t),t.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(t),1):this.portsOut.splice(this.portsOut.indexOf(t),1)}},{key:"addPort",value:function(t){return Object(K.a)(Object(Q.a)(n.prototype),"addPort",this).call(this,t),t.getOptions().in?-1===this.portsIn.indexOf(t)&&this.portsIn.push(t):-1===this.portsOut.indexOf(t)&&this.portsOut.push(t),t}},{key:"addInPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new nt({in:!0,name:t,label:t,alignment:Z.PortModelAlignment.LEFT});return e||this.portsIn.splice(0,0,n),this.addPort(n)}},{key:"addOutPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new nt({in:!1,name:t,label:t,alignment:Z.PortModelAlignment.RIGHT});return e||this.portsOut.splice(0,0,n),this.addPort(n)}},{key:"addExtras",value:function(t){return this.extras=t,this.extras}},{key:"deserialize",value:function(t){var e=this;Object(K.a)(Object(Q.a)(n.prototype),"deserialize",this).call(this,t),this.options.name=t.data.name,this.options.color=t.data.color,this.portsIn=X.map(t.data.portsInOrder,(function(t){return e.getPortFromID(t)})),this.portsOut=X.map(t.data.portsOutOrder,(function(t){return e.getPortFromID(t)})),this.extras=t.data.extras}},{key:"serialize",value:function(){return Object(I.a)(Object(I.a)({},Object(K.a)(Object(Q.a)(n.prototype),"serialize",this).call(this)),{},{name:this.options.name,color:this.options.color,portsInOrder:X.map(this.portsIn,(function(t){return t.getID()})),portsOutOrder:X.map(this.portsOut,(function(t){return t.getID()})),extras:this.extras})}},{key:"getInPorts",value:function(){return this.portsIn}},{key:"getOutPorts",value:function(){return this.portsOut}}]),n}(Z.NodeModel),ot=n(10),at=n(59);!function(t){t.Container=V.default.div(_||(_=Object(z.a)(["\n\t\theight: 100%;\n\t\tbackground-color: ",";\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\tmin-height: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"])),(function(t){return t.background}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color})),t.Expand=Object(at.css)(U||(U=Object(z.a)(["\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\theight: 100%;\n\t\t}\n\t"])))}(Y||(Y={}));var it,st,ct,lt,ut,dt=function(t){Object(H.a)(n,t);var e=Object(J.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"render",value:function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(at.Global,{styles:Y.Expand}),Object(k.jsx)(Y.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)",children:this.props.children})]})}}]),n}(i.Component);!function(t){t.Body=V.default.div(it||(it=Object(z.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%;\n\t"]))),t.Header=V.default.div(st||(st=Object(z.a)(["\n\t\tdisplay: flex;\n\t\tbackground: rgb(30, 30, 30);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial, sans-serif;\n\t\tpadding: 10px;\n\t\talign-items: center;\n\t"]))),t.Content=V.default.div(ct||(ct=Object(z.a)(["\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]))),t.Layer=V.default.div(lt||(lt=Object(z.a)(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"])))}(ut||(ut={}));var ht=[{name:"Arduino Uno",color:"green",extras:{type:"controller",analogPorts:6,digitalPorts:14},ins:[],outs:["setup()","loop()"]},{name:"Arduino Mega",color:"green",extras:{type:"controller",analogPorts:16,digitalPorts:54},ins:[],outs:["setup()","loop()"]},{name:"Condition",extras:{type:"logic"},color:"grey",outs:["True","False"],ins:["if <= 20","value"]},{name:"Loop",extras:{type:"logic"},color:"grey",outs:["True","False"],ins:["for","value"]},{name:"Led",color:"red",extras:{type:"component",library:"Setter.h"},ins:["setValue()"],outs:[]},{name:"TemperatureSensor",color:"blue",extras:{type:"component",library:"Getter.h"},ins:[],outs:["getValue()"]},{name:"Button",color:"blue",extras:{type:"component",library:"Getter.h"},ins:[],outs:["getValue()"]},{name:"Servo",color:"orange",extras:{type:"component",library:"Servo.h"},ins:["void detach()","void write(int)","void writeMicroseconds(int)"],outs:["uint8_t attach(int)","uint8_t attach(int, int, int)","int read()","int readMicroseconds()","bool attached()"]},{name:"Stepper",color:"orange",extras:{type:"component",library:"Stepper.h"},ins:["Stepper(int, int, int)","Stepper(int, int, int, int, int)","Stepper(int, int, int, int, int, int)","-","void setSpeed(long whatSpeed)","void step(int number_of_steps)"],outs:["int version(void)"]}],pt=function(t){Object(H.a)(n,t);var e=Object(J.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(G.a)(n,[{key:"componentDidMount",value:function(){var t=this;setInterval((function(){var e=JSON.stringify(t.props.app.getDiagramEngine().getModel().serialize());e!==localStorage.getItem("model")&&localStorage.setItem("model",e)}),1500)}},{key:"render",value:function(){var t=this;return Object(k.jsx)(ut.Body,{children:Object(k.jsxs)(ut.Content,{style:{width:"100%",height:"100%"},children:[Object(k.jsx)(W,{children:ht.map((function(t){return Object(k.jsx)(q,{model:t,name:t.name,color:t.color},t.name)}))}),Object(k.jsx)(ut.Layer,{onDrop:function(e){var n=JSON.parse(e.dataTransfer.getData("storm-diagram-node")),r=null;n&&((r=new rt(n.name,n.color)).extras=n.extras,n.outs.forEach((function(t){r.addOutPort(t)})),n.ins.forEach((function(t){r.addInPort(t)})));var o=t.props.app.getDiagramEngine().getRelativeMousePoint(e);r.setPosition(o),t.props.app.getDiagramEngine().getModel().addNode(r),t.forceUpdate()},onDragOver:function(t){t.preventDefault()},children:Object(k.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(k.jsx)(dt,{children:Object(k.jsx)(ot.CanvasWidget,{engine:this.props.app.getDiagramEngine()})})})})]})})}}]),n}(i.Component),bt=n(158),jt=n.n(bt),ft=function(){function t(){Object(F.a)(this,t),this.activeModel=void 0,this.diagramEngine=void 0,this.diagramEngine=jt.a(),this.newModel()}return Object(G.a)(t,[{key:"newModel",value:function(){this.activeModel=new bt.DiagramModel,this.diagramEngine.setModel(this.activeModel)}},{key:"getActiveDiagram",value:function(){return this.activeModel}},{key:"getDiagramEngine",value:function(){return this.diagramEngine}}]),t}(),gt=function(){var t=new ft;return Object(k.jsx)(pt,{app:t})};function Ot(){return Object(k.jsxs)("div",{className:"float-container",children:[Object(k.jsx)("div",{className:"float-child-left",children:Object(k.jsx)(gt,{})}),Object(k.jsx)("div",{className:"float-child-right",children:Object(k.jsx)(A,{})})]})}function vt(){return Object(k.jsx)("div",{children:Object(k.jsx)("h2",{children:"Welcome to MDD4IoT!"})})}var mt=n.p+"static/media/models.d4b41b6f.png";function xt(){return Object(k.jsx)("div",{children:Object(k.jsx)("img",{src:mt,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"100%"}})})}var yt=n.p+"static/media/state.da9f951e.png";function kt(){return Object(k.jsx)("div",{children:Object(k.jsx)("img",{src:yt,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"90%"}})})}function Pt(){return Object(k.jsxs)("div",{children:[Object(k.jsx)("h3",{children:"Caution!"}),Object(k.jsx)("div",{style:{width:"80vh",height:"60vh"}})]})}function wt(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsxs)("header",{className:"App-header",children:[Object(k.jsxs)(w.b,{history:y,children:[Object(k.jsx)(w.a,{path:"/",exact:!0,component:vt}),Object(k.jsx)(w.a,{path:"/models",exact:!0,component:xt}),Object(k.jsx)(w.a,{path:"/state",exact:!0,component:kt}),Object(k.jsx)(w.a,{path:"/palette",exact:!0,component:Pt}),Object(k.jsx)(w.a,{path:"/editor",component:Ot})]}),Object(k.jsx)(P,{})]})})}var Ct=n(155);o.a.render(Object(k.jsx)(Ct.a,{children:Object(k.jsx)(wt,{})}),document.getElementById("root"))}},[[516,1,2]]]);
//# sourceMappingURL=main.12ca59f6.chunk.js.map