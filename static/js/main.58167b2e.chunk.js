(this.webpackJsonpmdd4iot=this.webpackJsonpmdd4iot||[]).push([[0],{274:function(t,e,n){},275:function(t,e,n){},284:function(t,e,n){},514:function(t,e,n){"use strict";n.r(e);var r=n(66),o=n.n(r),i=(n(274),n(275),n(118)),a=n(0),s=n(534),c=n(535),l=n(262),u=n.n(l),d=n(265),h=n.n(d),p=n(263),f=n.n(p),g=n(264),b=n.n(g),j=n(536),O=n(266),v=n.n(O),m=n(24),x=Object(m.b)({}),y=n(3);function k(){var t=Object(a.useState)("/"),e=Object(i.a)(t,2),n=e[0],r=e[1],o=x.location.pathname;return n!==o&&r(o),Object(y.jsx)(j.a,{position:"fixed",color:"primary",style:{top:"auto",bottom:0},children:Object(y.jsxs)(s.a,{value:n,onChange:function(t,e){r(e),x.push(e)},showLabels:!0,children:["location.pathname",Object(y.jsx)(c.a,{label:"Home",value:"/",icon:Object(y.jsx)(u.a,{})}),Object(y.jsx)(c.a,{label:"Models",value:"/models",icon:Object(y.jsx)(f.a,{})}),Object(y.jsx)(c.a,{label:"State",value:"/state",icon:Object(y.jsx)(b.a,{})}),Object(y.jsx)(c.a,{label:"Editor",value:"/editor",icon:Object(y.jsx)(h.a,{})}),Object(y.jsx)(c.a,{label:"Palette",value:"/palette",icon:Object(y.jsx)(v.a,{})})]})})}var P=n(15),w=n(267),C=n.n(w);n(284);function M(t){var e="";if(0===Object.keys(t).length)return"// Empty Diagram!";var n=[];Object.entries(t.layers[0].models).forEach((function(t){n.push(t[1])}));var r=[],o=[],i=[],a=[],s=[];if(Object.entries(t.layers[1].models).forEach((function(t){var e=t[1];switch(r.push(e),e.extras.type){case"component":e.instance=e.name.toLowerCase(),i.push(e),s.includes(e.extras.library)||s.push(e.extras.library);break;case"controller":a.push(e);break;case"logic":o.push(e)}})),console.log("Generating from model:",t,"Parsed ",r,o,i,a),0===r.length)return"// You need at least one Node!";if(0===a.length)return"// You need an Arduino!";if(a.length>1)return"// Only one Arduino allowed!";var c=a[0],l=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e+=t})),e+="\n"},u=function(t){return n.find((function(e){return e.id===t}))},d=function(t,e){return r.find((function(e){return e.id===t})).ports.find((function(t){return t.id===e}))},h=function(t){return r.find((function(e){return e.id===t}))},p=function(t){return r.find((function(e){return e.id===t.parentNode}))};return l("/* Code generated for ",c.name),l("Analog ports N/"+c.extras.analogPorts),l("Digital ports M/"+c.extras.digitalPorts),l("*/"),l(""),s.forEach((function(t){l("#include <"+t+">"),i.forEach((function(e){e.extras.library===t&&l(e.name+" "+e.instance)})),l("")})),c.ports.forEach((function(t){l(t.label,"{\n"),t.links.forEach((function(t){var e=u(t),n=d(e.target,e.targetPort),r=h(n.parentNode),o=d(e.source,e.sourcePort),i=h(o.parentNode);if("Condition"===r.name){var a,s,c=function(t){try{var e=t.ports.find((function(t){return"value"===t.name})).links[0],n=u(e);return d(n.source,n.sourcePort)}catch(r){return{name:"/* Lacking Value */"}}}(r),f=function(t){try{var e=t.ports.find((function(t){return"True"===t.name})).links[0],n=u(e);return d(n.target,n.targetPort)}catch(r){return{label:"// Lacking Outcome"}}}(r);l("if (",(null===(a=p(c))||void 0===a?void 0:a.instance)+"."+c.name,n.name.replace("if",""),") {"),l((null===(s=p(f))||void 0===s?void 0:s.instance)+"."+f.label),l("}\n")}else console.log("here",e,r,n),r.instance?l(r.instance+"."+n.name):l(i.instance+"."+o.name)})),l("}\n")})),function(t){var e=[],n=0;return t.split("\n").forEach((function(t){t.includes("}")&&n--,e.push("    ".repeat(n)+t),t.includes("{")&&n++})),e.join("\n")}(e)}function I(){var t=Object(a.useState)("Initializing Generator"),e=Object(i.a)(t,2),n=e[0],r=e[1];return Object(a.useEffect)((function(){C.a.highlightAll(),setInterval((function(){try{var t=localStorage.getItem("model");t===localStorage.getItem("oldModel")||(localStorage.setItem("oldModel",t||"{}"),r(M(JSON.parse(t||"{}"))))}catch(e){console.log(e)}}),1500)}),[]),Object(y.jsx)("div",{className:"Code",children:Object(y.jsx)("pre",{className:"line-numbers",children:Object(y.jsx)("code",{className:"language-clike",children:n})})})}var E,S,D=n(38),T=n(22),A=n(23),N=n(28),L=n(27),z=n(13);(S||(S={})).Tray=z.default.div(E||(E=Object(D.a)(["\n\t\tmin-width: 200px;\n\t\tbackground: rgb(20, 20, 20);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t"])));var F,G,H=function(t){Object(N.a)(n,t);var e=Object(L.a)(n);function n(){return Object(T.a)(this,n),e.apply(this,arguments)}return Object(A.a)(n,[{key:"render",value:function(){return Object(y.jsx)(S.Tray,{children:this.props.children})}}]),n}(a.Component);!function(t){t.Tray=z.default.div(F||(F=Object(D.a)(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tpadding: 5px;\n\t\tmargin:\t 0px 10px;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 5px;\n\t\tmargin-bottom: 2px;\n\t\tcursor: pointer;\n\t"])),(function(t){return t.color}))}(G||(G={}));var J,V,B,W=function(t){Object(N.a)(n,t);var e=Object(L.a)(n);function n(){return Object(T.a)(this,n),e.apply(this,arguments)}return Object(A.a)(n,[{key:"render",value:function(){var t=this;return Object(y.jsx)(G.Tray,{color:this.props.color||"red",draggable:!0,onDragStart:function(e){e.dataTransfer.setData("storm-diagram-node",JSON.stringify(t.props.model))},className:"tray-item",children:this.props.name})}}]),n}(a.Component),R=n(39),_=n(33),U=n(19),Y=n(7),q=n(14),K=n(159),Q=n(37),X=function(t){Object(N.a)(n,t);var e=Object(L.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(T.a)(this,n),e.call(this,Object(R.a)({type:"default",width:t.width||3,color:t.color||"gray",selectedColor:t.selectedColor||"rgb(0,192,255)",curvyness:50},t))}return Object(A.a)(n,[{key:"calculateControlOffset",value:function(t){return t.getOptions().alignment===q.PortModelAlignment.RIGHT?[this.options.curvyness||0,0]:t.getOptions().alignment===q.PortModelAlignment.LEFT?[-(this.options.curvyness||0),0]:t.getOptions().alignment===q.PortModelAlignment.TOP?[0,-(this.options.curvyness||0)]:[0,this.options.curvyness||0]}},{key:"getSVGPath",value:function(){if(2===this.points.length){var t,e,n=new Q.BezierCurve;if(n.setSource(this.getFirstPoint().getPosition()),n.setTarget(this.getLastPoint().getPosition()),n.setSourceControl(this.getFirstPoint().getPosition().clone()),n.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort)(t=n.getSourceControl()).translate.apply(t,Object(K.a)(this.calculateControlOffset(this.getSourcePort())));if(this.targetPort)(e=n.getTargetControl()).translate.apply(e,Object(K.a)(this.calculateControlOffset(this.getTargetPort())));return n.getSVGCurve()}}},{key:"serialize",value:function(){return Object(R.a)(Object(R.a)({},Object(_.a)(Object(U.a)(n.prototype),"serialize",this).call(this)),{},{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor})}},{key:"deserialize",value:function(t){Object(_.a)(Object(U.a)(n.prototype),"deserialize",this).call(this,t),this.options.color=t.data.color,this.options.width=t.data.width,this.options.curvyness=t.data.curvyness,this.options.selectedColor=t.data.selectedColor}},{key:"setWidth",value:function(t){this.options.width=t,this.fireEvent({width:t},"widthChanged")}},{key:"setColor",value:function(t){this.options.color=t,this.fireEvent({color:t},"colorChanged")}}]),n}(q.LinkModel),Z=function(t){Object(N.a)(n,t);var e=Object(L.a)(n);function n(t,r,o){return Object(T.a)(this,n),r&&(t={in:!!t,name:r,label:o}),t=t,e.call(this,Object(R.a)({label:t.label||t.name,alignment:t.in?q.PortModelAlignment.LEFT:q.PortModelAlignment.RIGHT,type:"default"},t))}return Object(A.a)(n,[{key:"deserialize",value:function(t){Object(_.a)(Object(U.a)(n.prototype),"deserialize",this).call(this,t),this.options.in=t.data.in,this.options.label=t.data.label}},{key:"serialize",value:function(){return Object(R.a)(Object(R.a)({},Object(_.a)(Object(U.a)(n.prototype),"serialize",this).call(this)),{},{in:this.options.in,label:this.options.label})}},{key:"link",value:function(t,e){var n=this.createLinkModel(e);return n.setSourcePort(this),n.setTargetPort(t),n}},{key:"canLinkToPort",value:function(t){return!0}},{key:"createLinkModel",value:function(t){var e=Object(_.a)(Object(U.a)(n.prototype),"createLinkModel",this).call(this);return!e&&t?t.generateModel({}):e||new X}}]),n}(q.PortModel),$=function(t){Object(N.a)(n,t);var e=Object(L.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return Object(T.a)(this,n),"string"===typeof r&&(r={name:r,color:o}),(t=e.call(this,Object(R.a)({type:"default",name:"Untitled",color:"rgb(0,192,255)"},r))).portsIn=void 0,t.portsOut=void 0,t.extras=void 0,t.portsOut=[],t.portsIn=[],t}return Object(A.a)(n,[{key:"doClone",value:function(t,e){e.portsIn=[],e.portsOut=[],Object(_.a)(Object(U.a)(n.prototype),"doClone",this).call(this,t,e)}},{key:"removePort",value:function(t){Object(_.a)(Object(U.a)(n.prototype),"removePort",this).call(this,t),t.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(t),1):this.portsOut.splice(this.portsOut.indexOf(t),1)}},{key:"addPort",value:function(t){return Object(_.a)(Object(U.a)(n.prototype),"addPort",this).call(this,t),t.getOptions().in?-1===this.portsIn.indexOf(t)&&this.portsIn.push(t):-1===this.portsOut.indexOf(t)&&this.portsOut.push(t),t}},{key:"addInPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Z({in:!0,name:t,label:t,alignment:q.PortModelAlignment.LEFT});return e||this.portsIn.splice(0,0,n),this.addPort(n)}},{key:"addOutPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Z({in:!1,name:t,label:t,alignment:q.PortModelAlignment.RIGHT});return e||this.portsOut.splice(0,0,n),this.addPort(n)}},{key:"addExtras",value:function(t){return this.extras=t,this.extras}},{key:"deserialize",value:function(t){var e=this;Object(_.a)(Object(U.a)(n.prototype),"deserialize",this).call(this,t),this.options.name=t.data.name,this.options.color=t.data.color,this.portsIn=Y.map(t.data.portsInOrder,(function(t){return e.getPortFromID(t)})),this.portsOut=Y.map(t.data.portsOutOrder,(function(t){return e.getPortFromID(t)})),this.extras=t.data.extras}},{key:"serialize",value:function(){return Object(R.a)(Object(R.a)({},Object(_.a)(Object(U.a)(n.prototype),"serialize",this).call(this)),{},{name:this.options.name,color:this.options.color,portsInOrder:Y.map(this.portsIn,(function(t){return t.getID()})),portsOutOrder:Y.map(this.portsOut,(function(t){return t.getID()})),extras:this.extras})}},{key:"getInPorts",value:function(){return this.portsIn}},{key:"getOutPorts",value:function(){return this.portsOut}}]),n}(q.NodeModel),tt=n(10),et=n(59);!function(t){t.Container=z.default.div(J||(J=Object(D.a)(["\n\t\theight: 100%;\n\t\tbackground-color: ",";\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\tmin-height: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"])),(function(t){return t.background}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color})),t.Expand=Object(et.css)(V||(V=Object(D.a)(["\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\theight: 100%;\n\t\t}\n\t"])))}(B||(B={}));var nt,rt,ot,it,at,st=function(t){Object(N.a)(n,t);var e=Object(L.a)(n);function n(){return Object(T.a)(this,n),e.apply(this,arguments)}return Object(A.a)(n,[{key:"render",value:function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(et.Global,{styles:B.Expand}),Object(y.jsx)(B.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)",children:this.props.children})]})}}]),n}(a.Component);!function(t){t.Body=z.default.div(nt||(nt=Object(D.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%;\n\t"]))),t.Header=z.default.div(rt||(rt=Object(D.a)(["\n\t\tdisplay: flex;\n\t\tbackground: rgb(30, 30, 30);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial, sans-serif;\n\t\tpadding: 10px;\n\t\talign-items: center;\n\t"]))),t.Content=z.default.div(ot||(ot=Object(D.a)(["\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]))),t.Layer=z.default.div(it||(it=Object(D.a)(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"])))}(at||(at={}));var ct=[{name:"Arduino Uno",color:"green",extras:{type:"controller",analogPorts:6,digitalPorts:14},ins:[],outs:["setup()","loop()"]},{name:"Arduino Mega",color:"green",extras:{type:"controller",analogPorts:16,digitalPorts:54},ins:[],outs:["setup()","loop()"]},{name:"Condition",extras:{type:"logic"},color:"grey",outs:["True","False"],ins:["if <= 20","value"]},{name:"Loop",extras:{type:"logic"},color:"grey",outs:["True","False"],ins:["for","value"]},{name:"Led",color:"red",extras:{type:"component",library:"Setter.h"},ins:["setValue()"],outs:[]},{name:"TemperatureSensor",color:"blue",extras:{type:"component",library:"Getter.h"},ins:[],outs:["getValue()"]},{name:"Button",color:"blue",extras:{type:"component",library:"Getter.h"},ins:[],outs:["getValue()"]},{name:"Servo",color:"orange",extras:{type:"component",library:"Servo.h"},ins:["void detach()","void write(int)","void writeMicroseconds(int)"],outs:["uint8_t attach(int)","uint8_t attach(int, int, int)","int read()","int readMicroseconds()","bool attached()"]},{name:"Stepper",color:"orange",extras:{type:"component",library:"Stepper.h"},ins:["Stepper(int, int, int)","Stepper(int, int, int, int, int)","Stepper(int, int, int, int, int, int)","-","void setSpeed(long whatSpeed)","void step(int number_of_steps)"],outs:["int version(void)"]}],lt=function(t){Object(N.a)(n,t);var e=Object(L.a)(n);function n(){return Object(T.a)(this,n),e.apply(this,arguments)}return Object(A.a)(n,[{key:"componentDidMount",value:function(){var t=this;setInterval((function(){var e=JSON.stringify(t.props.app.getDiagramEngine().getModel().serialize());e!==localStorage.getItem("model")&&localStorage.setItem("model",e)}),1500)}},{key:"render",value:function(){var t=this;return Object(y.jsx)(at.Body,{children:Object(y.jsxs)(at.Content,{style:{width:"100%",height:"100%"},children:[Object(y.jsx)(H,{children:ct.map((function(t){return Object(y.jsx)(W,{model:t,name:t.name,color:t.color},t.name)}))}),Object(y.jsx)(at.Layer,{onDrop:function(e){var n=JSON.parse(e.dataTransfer.getData("storm-diagram-node")),r=null;n&&((r=new $(n.name,n.color)).extras=n.extras,n.outs.forEach((function(t){r.addOutPort(t)})),n.ins.forEach((function(t){r.addInPort(t)})));var o=t.props.app.getDiagramEngine().getRelativeMousePoint(e);r.setPosition(o),t.props.app.getDiagramEngine().getModel().addNode(r),t.forceUpdate()},onDragOver:function(t){t.preventDefault()},children:Object(y.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(y.jsx)(st,{children:Object(y.jsx)(tt.CanvasWidget,{engine:this.props.app.getDiagramEngine()})})})})]})})}}]),n}(a.Component),ut=n(157),dt=n.n(ut),ht=function(){function t(){Object(T.a)(this,t),this.activeModel=void 0,this.diagramEngine=void 0,this.diagramEngine=dt.a(),this.newModel()}return Object(A.a)(t,[{key:"newModel",value:function(){this.activeModel=new ut.DiagramModel,this.diagramEngine.setModel(this.activeModel)}},{key:"getActiveDiagram",value:function(){return this.activeModel}},{key:"getDiagramEngine",value:function(){return this.diagramEngine}}]),t}(),pt=function(){var t=new ht;return Object(y.jsx)(lt,{app:t})};function ft(){return Object(y.jsxs)("div",{className:"float-container",children:[Object(y.jsx)("div",{className:"float-child-left",children:Object(y.jsx)(pt,{})}),Object(y.jsx)("div",{className:"float-child-right",children:Object(y.jsx)(I,{})})]})}function gt(){return Object(y.jsx)("div",{children:Object(y.jsx)("h2",{children:"Welcome to MDD4IoT!"})})}var bt=n.p+"static/media/models.d4b41b6f.png";function jt(){return Object(y.jsx)("div",{children:Object(y.jsx)("img",{src:bt,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"100%"}})})}var Ot=n.p+"static/media/state.da9f951e.png";function vt(){return Object(y.jsx)("div",{children:Object(y.jsx)("img",{src:Ot,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"90%"}})})}function mt(){return Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{children:"Caution!"}),Object(y.jsx)("div",{style:{width:"80vh",height:"60vh"}})]})}function xt(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsxs)("header",{className:"App-header",children:[Object(y.jsxs)(P.b,{history:x,children:[Object(y.jsx)(P.a,{path:"/",exact:!0,component:gt}),Object(y.jsx)(P.a,{path:"/models",exact:!0,component:jt}),Object(y.jsx)(P.a,{path:"/state",exact:!0,component:vt}),Object(y.jsx)(P.a,{path:"/palette",exact:!0,component:mt}),Object(y.jsx)(P.a,{path:"/editor",component:ft})]}),Object(y.jsx)(k,{})]})})}var yt=n(155);o.a.render(Object(y.jsx)(yt.a,{children:Object(y.jsx)(xt,{})}),document.getElementById("root"))}},[[514,1,2]]]);
//# sourceMappingURL=main.58167b2e.chunk.js.map