(this.webpackJsonpmdd4iot=this.webpackJsonpmdd4iot||[]).push([[0],{397:function(e,t,n){},398:function(e,t,n){},682:function(e,t,n){"use strict";n.r(t);var a=n(81),r=n.n(a),c=(n(397),n(83)),o=(n(398),n(0)),i=n(703),l=n(704),s=n(383),u=n.n(s),d=n(384),j=n.n(d),b=n(705),f=n(25),O=Object(f.b)({}),h=n(6);function v(){var e=Object(o.useState)("/"),t=Object(c.a)(e,2),n=t[0],a=t[1],r=O.location.pathname;return n!==r&&a(r),Object(h.jsx)(b.a,{position:"fixed",color:"primary",style:{top:"auto",bottom:0},children:Object(h.jsxs)(i.a,{value:n,onChange:function(e,t){a(t),O.push(t)},showLabels:!0,children:["location.pathname",Object(h.jsx)(l.a,{label:"Home",value:"/",icon:Object(h.jsx)(u.a,{})}),Object(h.jsx)(l.a,{label:"Editor",value:"/editor",icon:Object(h.jsx)(j.a,{})})]})})}var m=n(16),g=Object(o.createContext)({model:{},setModel:function(e){}}),p=n(385),x=n.n(p);n(407);function y(e){return Object(o.useEffect)((function(){x.a.highlightAll()}),[]),Object(h.jsx)("div",{className:"Code",children:Object(h.jsx)("pre",{className:"line-numbers",children:Object(h.jsx)("code",{className:"language-".concat(e.language),children:e.code})})})}var k,P,N=n(46),w=n.n(N),M=n(9),C=n(166),D=n(167),E=n(169),A=n(168),z=n(112),I=n(233),L=n(64),S=function(e){Object(E.a)(n,e);var t=Object(A.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(C.a)(this,n),(e=t.call(this,Object(z.a)(Object(z.a)({},a),{},{type:"editable-label"}))).value=void 0,e.value=a.value||"",e}return Object(D.a)(n,[{key:"serialize",value:function(){return Object(z.a)(Object(z.a)({},Object(I.a)(Object(L.a)(n.prototype),"serialize",this).call(this)),{},{value:this.value})}},{key:"deserialize",value:function(e){Object(I.a)(Object(L.a)(n.prototype),"deserialize",this).call(this,e),this.value=e.data.value}}]),n}(N.LabelModel),F=n(386),T=n(28),R=n(387);(P||(P={})).Label=T.default.div(k||(k=Object(F.a)(["\n\t\tuser-select: none;\n\t\tpointer-events: auto;\n\t"])));var W=function(e){var t=o.useState(e.model.value),n=Object(c.a)(t,2),a=n[0],r=n[1];return Object(h.jsxs)(P.Label,{children:[Object(h.jsx)("input",{value:a,onChange:function(t){var n=t.target.value;r(n),e.model.value=n}}),Object(h.jsx)("button",{onClick:function(){return Object(R.action)("model eventDidFire")("You clicked the button")},children:"Click me!"})]})},B=function(e){Object(E.a)(n,e);var t=Object(A.a)(n);function n(){return Object(C.a)(this,n),t.call(this,"editable-label")}return Object(D.a)(n,[{key:"generateModel",value:function(){return new S}},{key:"generateReactWidget",value:function(e){return Object(h.jsx)(W,{model:e.model})}}]),n}(M.AbstractReactFactory);function J(){var e=Object(o.useContext)(g),t=e.model,n=e.setModel,a=w()();a.getLabelFactories().registerFactory(new B);var r=new N.DiagramModel,c=new N.DefaultNodeModel("Arduino","green"),i=c.addOutPort("setup()");c.addOutPort("loop()"),c.setPosition(50,70);var l=new N.DefaultNodeModel("Condition","grey"),s=l.addInPort("if <= 20"),u=l.addInPort("value"),d=l.addOutPort("True");l.addOutPort("False"),l.setPosition(230,100);var j=new N.DefaultNodeModel("Led","red"),b=j.addInPort("set(bool)");j.setPosition(400,70);var f=new N.DefaultNodeModel("Servo","green");f.addInPort("turn(int)"),f.setPosition(400,170);var O=new N.DefaultNodeModel("TemperatureSensor","Blue"),v=O.addOutPort("getValue()");return O.setPosition(30,170),r.addAll(c,l,i.link(s),d.link(b),v.link(u),j,O,f),console.log("Setting Engine"),a.setModel(r),Object(o.useEffect)((function(){console.log("Rendering Diagram"),r.serialize()!==t&&n(r.serialize())}),[]),Object(h.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(h.jsx)(M.CanvasWidget,{className:"canvas",engine:a})})}function H(e){var t="",n=[];Object.entries(e.layers[0].models).forEach((function(e){n.push(e[1])}));var a=[];Object.entries(e.layers[1].models).forEach((function(e){a.push(e[1])}));var r=a.find((function(e){return"Arduino"===e.name})),c=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];n.forEach((function(e){t+=e})),t+="\n"},o=function(e){return n.find((function(t){return t.id===e}))},i=function(e,t){return a.find((function(t){return t.id===e})).ports.find((function(e){return e.id===t}))};return r.ports.forEach((function(e){c(e.label,"{\n"),e.links.forEach((function(e){var t,n=o(e),r=i(n.target,n.targetPort),l=(t=r.parentNode,a.find((function(e){return e.id===t})));if("Condition"===l.name){var s=function(e){var t=e.ports.find((function(e){return"value"===e.name})).links[0],n=o(t);return i(n.source,n.sourcePort)}(l),u=function(e){var t=e.ports.find((function(e){return"True"===e.name})).links[0],n=o(t);return i(n.target,n.targetPort)}(l);c("if (",s.name,r.name.replace("if",""),") {"),c(u.label),c("}\n")}})),c("}\n")})),function(e){var t=[],n=0;return e.split("\n").forEach((function(e){e.includes("}")&&n--,t.push("    ".repeat(n)+e),e.includes("{")&&n++})),t.join("\n")}(t)}function V(){var e=Object(o.useContext)(g).model;return Object(h.jsxs)("div",{className:"float-container",children:[Object(h.jsx)("div",{className:"float-child-left",children:Object(h.jsx)(J,{})}),Object(h.jsx)("div",{className:"float-child-right",children:0===Object.keys(e).length?null:Object(h.jsx)(y,{code:H(e),language:"clike"})})]})}var Y=n.p+"static/media/master.ed79098a.svg";function q(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Welcome to MDD4IoT!"}),Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:Y,alt:"Architecture Diagram",style:{backgroundColor:"white"}})})]})}function G(){var e=Object(o.useState)({}),t=Object(c.a)(e,2),n=t[0],a=t[1],r=Object(o.useMemo)((function(){return{model:n,setModel:a}}),[n]);return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsxs)(m.b,{history:O,children:[Object(h.jsx)(m.a,{path:"/",exact:!0,component:q}),Object(h.jsx)(g.Provider,{value:r,children:Object(h.jsx)(m.a,{path:"/editor",component:V})})]}),Object(h.jsx)(v,{})]})})}var K=n(230);r.a.render(Object(h.jsx)(K.a,{children:Object(h.jsx)(G,{})}),document.getElementById("root"))}},[[682,1,2]]]);
//# sourceMappingURL=main.e802d39d.chunk.js.map