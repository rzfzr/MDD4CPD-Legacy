(this.webpackJsonpmdd4=this.webpackJsonpmdd4||[]).push([[0],{434:function(t,e,n){},435:function(t,e,n){},466:function(t,e,n){},721:function(t,e,n){},723:function(t,e,n){"use strict";n.r(e);var o=n(99),i=n.n(o),r=(n(434),n(435),n(29)),a=n(0),s=n.n(a),c=n(64),l=n(751),d=n(748),u=n(749),p=n(410),h=n.n(p),b=n(414),g=n.n(b),j=n(411),O=n.n(j),m=n(413),f=n.n(m),v=n(415),x=n.n(v),y=n(412),k=n.n(y),P=n(1);function C(){var t=window.location.pathname,e=Object(a.useState)(t),n=Object(r.a)(e,2),o=n[0],i=n[1];return Object(P.jsx)(l.a,{position:"fixed",color:"primary",style:{top:"auto",bottom:0},children:Object(P.jsxs)(d.a,{value:o,onChange:function(t,e){i(e)},showLabels:!0,children:["location.pathname",Object(P.jsx)(u.a,{component:c.b,label:"Home",to:"/mdd4/",icon:Object(P.jsx)(h.a,{})}),Object(P.jsx)(u.a,{component:c.b,label:"Models",to:"/mdd4/models",icon:Object(P.jsx)(O.a,{})}),Object(P.jsx)(u.a,{component:c.b,label:"Transformations",to:"/mdd4/transformations",icon:Object(P.jsx)(k.a,{})}),Object(P.jsx)(u.a,{component:c.b,label:"Palette",to:"/mdd4/palette",icon:Object(P.jsx)(f.a,{})}),Object(P.jsx)(u.a,{component:c.b,label:"Editor",to:"/mdd4/editor",icon:Object(P.jsx)(g.a,{})}),Object(P.jsx)(u.a,{component:c.b,label:"Settings",to:"/mdd4/settings",icon:Object(P.jsx)(x.a,{})})]})})}var w,E,S=n(9),M=n(38),I=n(49),D=n(19),N=n(20),A=n(28),T=n(27),z=n(12),F=n(417),L=n.n(F),B=n(416);function W(t){return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)("div",{style:{maxWidth:"400px",border:"solid",fontSize:".9em",color:"black",margin:"60px 0px 25px 0",backgroundColor:"lightgrey"},children:[Object(P.jsx)("div",{style:{width:"100%",borderBottom:"solid 3px",fontSize:"1.2em"},children:t.node.name}),t.node.extras.library&&Object(P.jsxs)("div",{style:{width:"100%",borderBottom:"solid 2px"},children:["Library=",t.node.extras.library]}),t.node.ins&&t.node.ins.length>0&&t.node.ins.map((function(t){return Object(P.jsx)("div",{children:Object(P.jsx)("p",{children:t})},t)})),t.node.outs&&t.node.outs.length>0&&t.node.outs.map((function(t){return Object(P.jsx)("div",{children:Object(P.jsx)("p",{children:t})},t)}))]})})}(E||(E={})).Tray=z.default.div(w||(w=Object(M.a)(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tfont-size:0.6em;\n\t\tpadding: 2px 0px;\n\t\tmargin:\t 5px 10px ;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 100px;\n\t\tmargin-bottom: 2px;\n\t\tcursor: pointer;\n\t\tbackground: rgb(20, 20, 20);\n\t"])),(function(t){return t.color}));var H,K,R,V=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var t=this;return Object(P.jsxs)(E.Tray,{color:this.props.node.color||"red",draggable:!0,onDragStart:function(e){e.dataTransfer.setData("storm-diagram-node",JSON.stringify(t.props.node)),e.dataTransfer.setDragImage(new Image,10,10)},className:"tray-item",children:[this.props.node.name,Object(P.jsx)("a",{"data-tip":!0,"data-for":"tip-"+this.props.node.name,children:Object(P.jsx)(L.a,{style:{fontSize:"1rem"}})}),Object(P.jsx)(B.a,{id:"tip-"+this.props.node.name,type:"light",place:"bottom",children:Object(P.jsx)(W,{node:this.props.node})})]})}}]),n}(a.Component),G=n(30),q=n(33),J=n(22),U=n(10),Y=n(17),X=n(53),Q=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(D.a)(this,n),e.call(this,Object(G.a)({type:"default",width:t.width||3,color:t.color||"gray",selectedColor:t.selectedColor||"rgb(0,192,255)",curvyness:50},t))}return Object(N.a)(n,[{key:"calculateControlOffset",value:function(t){return t.getOptions().alignment===Y.PortModelAlignment.RIGHT?[this.options.curvyness||0,0]:t.getOptions().alignment===Y.PortModelAlignment.LEFT?[-(this.options.curvyness||0),0]:t.getOptions().alignment===Y.PortModelAlignment.TOP?[0,-(this.options.curvyness||0)]:[0,this.options.curvyness||0]}},{key:"getSVGPath",value:function(){if(2===this.points.length){var t,e,n=new X.BezierCurve;if(n.setSource(this.getFirstPoint().getPosition()),n.setTarget(this.getLastPoint().getPosition()),n.setSourceControl(this.getFirstPoint().getPosition().clone()),n.setTargetControl(this.getLastPoint().getPosition().clone()),this.sourcePort)(t=n.getSourceControl()).translate.apply(t,Object(I.a)(this.calculateControlOffset(this.getSourcePort())));if(this.targetPort)(e=n.getTargetControl()).translate.apply(e,Object(I.a)(this.calculateControlOffset(this.getTargetPort())));return n.getSVGCurve()}}},{key:"serialize",value:function(){return Object(G.a)(Object(G.a)({},Object(q.a)(Object(J.a)(n.prototype),"serialize",this).call(this)),{},{width:this.options.width,color:this.options.color,curvyness:this.options.curvyness,selectedColor:this.options.selectedColor})}},{key:"deserialize",value:function(t){Object(q.a)(Object(J.a)(n.prototype),"deserialize",this).call(this,t),this.options.color=t.data.color,this.options.width=t.data.width,this.options.curvyness=t.data.curvyness,this.options.selectedColor=t.data.selectedColor}},{key:"setWidth",value:function(t){this.options.width=t,this.fireEvent({width:t},"widthChanged")}},{key:"setColor",value:function(t){this.options.color=t,this.fireEvent({color:t},"colorChanged")}}]),n}(Y.LinkModel),Z=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(t,o,i){return Object(D.a)(this,n),o&&(t={in:!!t,name:o,label:i}),t=t,e.call(this,Object(G.a)({label:t.label||t.name,alignment:t.in?Y.PortModelAlignment.LEFT:Y.PortModelAlignment.RIGHT,type:"default"},t))}return Object(N.a)(n,[{key:"deserialize",value:function(t){Object(q.a)(Object(J.a)(n.prototype),"deserialize",this).call(this,t),this.options.in=t.data.in,this.options.label=t.data.label}},{key:"serialize",value:function(){return Object(G.a)(Object(G.a)({},Object(q.a)(Object(J.a)(n.prototype),"serialize",this).call(this)),{},{in:this.options.in,label:this.options.label})}},{key:"canLinkToPort",value:function(t){return!0}},{key:"createLinkModel",value:function(){return new Q}}]),n}(Y.PortModel),$=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return Object(D.a)(this,n),"string"===typeof o&&(o={name:o,color:i}),(t=e.call(this,Object(G.a)({type:"default",name:"Untitled",color:"rgb(0,192,255)"},o))).portsIn=void 0,t.portsOut=void 0,t.extras=void 0,t.portsOut=[],t.portsIn=[],t}return Object(N.a)(n,[{key:"doClone",value:function(t,e){e.portsIn=[],e.portsOut=[],Object(q.a)(Object(J.a)(n.prototype),"doClone",this).call(this,t,e)}},{key:"removePort",value:function(t){Object(q.a)(Object(J.a)(n.prototype),"removePort",this).call(this,t),t.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(t),1):this.portsOut.splice(this.portsOut.indexOf(t),1)}},{key:"addPort",value:function(t){return Object(q.a)(Object(J.a)(n.prototype),"addPort",this).call(this,t),t.getOptions().in?-1===this.portsIn.indexOf(t)&&this.portsIn.push(t):-1===this.portsOut.indexOf(t)&&this.portsOut.push(t),t}},{key:"addInPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Z({in:!0,name:t,label:t,alignment:Y.PortModelAlignment.LEFT});return e||this.portsIn.splice(0,0,n),this.addPort(n)}},{key:"addOutPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Z({in:!1,name:t,label:t,alignment:Y.PortModelAlignment.RIGHT});return e||this.portsOut.splice(0,0,n),this.addPort(n)}},{key:"addExtras",value:function(t){return this.extras=t,this.extras}},{key:"deserialize",value:function(t){var e=this;Object(q.a)(Object(J.a)(n.prototype),"deserialize",this).call(this,t),this.options.name=t.data.name,this.options.color=t.data.color,this.portsIn=U.map(t.data.portsInOrder,(function(t){return e.getPortFromID(t)})),this.portsOut=U.map(t.data.portsOutOrder,(function(t){return e.getPortFromID(t)})),this.extras=t.data.extras}},{key:"serialize",value:function(){return Object(G.a)(Object(G.a)({},Object(q.a)(Object(J.a)(n.prototype),"serialize",this).call(this)),{},{name:this.options.name,color:this.options.color,portsInOrder:U.map(this.portsIn,(function(t){return t.getID()})),portsOutOrder:U.map(this.portsOut,(function(t){return t.getID()})),extras:this.extras})}},{key:"getInPorts",value:function(){return this.portsIn}},{key:"getOutPorts",value:function(){return this.portsOut}}]),n}(Y.NodeModel),tt=n(14),et=n(63);!function(t){t.Container=z.default.div(H||(H=Object(M.a)(["\n\t\theight: 100%;\n\t\tbackground-color: ",";\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\tmin-height: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"])),(function(t){return t.background}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color})),t.Expand=Object(et.css)(K||(K=Object(M.a)(["\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\theight: 100%;\n\t\t}\n\t"])))}(R||(R={}));var nt=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){return Object(D.a)(this,n),e.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(et.Global,{styles:R.Expand}),Object(P.jsx)(R.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)",children:this.props.children})]})}}]),n}(a.Component),ot=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(t,o,i,r,a){var s,c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];Object(D.a)(this,n),(s=e.call(this,{type:"MyEditable",name:t,color:o})).portsIn=[],s.portsOut=[],s.content=void 0,s.extras=void 0,s.selectableOptions=void 0,s.extras=i,r.forEach((function(t){s.addInPort(t)})),a.forEach((function(t){s.addOutPort(t)}));var l=!!c&&"userName",d="Condition"===t?t:a[0].substring(0,-1!==a[0].indexOf(" ")?a[0].indexOf(" "):a[0].length);switch(d){case"bool":s.content={name:l,value:"true"},s.selectableOptions=["true","false"];break;case"port":s.content={name:l,value:"0"},s.selectableOptions=Array.from(Array(10).keys()).map((function(t){return t.toString()}));break;case"int":s.content={name:l,value:"0"},s.selectableOptions=["something","went wrong"];break;case"Condition":s.content={name:l,value:"=="},s.selectableOptions=["==","!=","<",">","<=",">=","<=>"];break;default:s.content={name:l,value:"value"},s.selectableOptions=["something","went wrong"]}return s}return Object(N.a)(n,[{key:"doClone",value:function(t,e){e.portsIn=[],e.portsOut=[],Object(q.a)(Object(J.a)(n.prototype),"doClone",this).call(this,t,e)}},{key:"removePort",value:function(t){Object(q.a)(Object(J.a)(n.prototype),"removePort",this).call(this,t),t.getOptions().in?this.portsIn.splice(this.portsIn.indexOf(t),1):this.portsOut.splice(this.portsOut.indexOf(t),1)}},{key:"addPort",value:function(t){return Object(q.a)(Object(J.a)(n.prototype),"addPort",this).call(this,t),t.getOptions().in?-1===this.portsIn.indexOf(t)&&this.portsIn.push(t):-1===this.portsOut.indexOf(t)&&this.portsOut.push(t),t}},{key:"addInPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Z({in:!0,name:t,label:t,alignment:Y.PortModelAlignment.LEFT});return e||this.portsIn.splice(0,0,n),this.addPort(n)}},{key:"addOutPort",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Z({in:!1,name:t,label:t,alignment:Y.PortModelAlignment.RIGHT});return e||this.portsOut.splice(0,0,n),this.addPort(n)}},{key:"addExtras",value:function(t){return this.extras=t,this.extras}},{key:"deserialize",value:function(t){var e=this;Object(q.a)(Object(J.a)(n.prototype),"deserialize",this).call(this,t),this.options.name=t.data.name,this.options.color=t.data.color,this.portsIn=U.map(t.data.portsInOrder,(function(t){return e.getPortFromID(t)})),this.portsOut=U.map(t.data.portsOutOrder,(function(t){return e.getPortFromID(t)})),this.extras=t.data.extras,this.content=t.data.content,this.selectableOptions=t.data.selectableOptions}},{key:"serialize",value:function(){return Object(G.a)(Object(G.a)({},Object(q.a)(Object(J.a)(n.prototype),"serialize",this).call(this)),{},{name:this.options.name,color:this.options.color,portsInOrder:U.map(this.portsIn,(function(t){return t.getID()})),portsOutOrder:U.map(this.portsOut,(function(t){return t.getID()})),extras:this.extras,content:this.content,selectableOptions:this.selectableOptions})}},{key:"getInPorts",value:function(){return this.portsIn}},{key:"getOutPorts",value:function(){return this.portsOut}}]),n}(Y.NodeModel),it=[{name:"Arduino Uno",color:"green",extras:{type:"controller",analogPorts:6,digitalPorts:14},ins:[],outs:["setup()","loop()"]},{name:"Arduino Nano",color:"green",extras:{type:"controller",analogPorts:6,digitalPorts:22},ins:[],outs:["setup()","loop()"]},{name:"Arduino Mega",color:"green",extras:{type:"controller",analogPorts:16,digitalPorts:54},ins:[],outs:["setup()","loop()"]},{name:"Arduino Leonardo",color:"green",extras:{type:"controller",analogPorts:12,digitalPorts:20},ins:[],outs:["setup()","loop()"]},{name:"Arduino Flora",color:"green",extras:{type:"controller",analogPorts:4,digitalPorts:8},ins:[],outs:["setup()","loop()"]},{name:"Digital I/O",color:"cyan",extras:{type:"built-in"},ins:["void digitalWrite(int pin, int value)","void pinMode(int pin, int mode)"],outs:["int digitalRead(int pin)"]},{name:"Analog I/O",color:"cyan",extras:{type:"built-in"},ins:["void analoglWrite(int pin, int value)","void pinMode(int pin, int mode)","void analogReference(int type)"],outs:[]},{name:"Time",color:"cyan",extras:{type:"built-in"},ins:["void delay(int ms)","void delayMicroseconds(int us)"],outs:["unsigned long micros()","unsigned long millis()"]},{name:"Math",color:"cyan",extras:{type:"built-in"},ins:["void delay(int ms)"],outs:["int abs(int x)","int constrain(int x, int a, int b)","int map(int value, int fromLow, int fromHigh, int toLow, int toHigh)","any? max(any x, any y)","any? min(any x, any y)","double pow(float base, float exponent)","double sq(any x)","double sqrt(any x)"]},{name:"Trigonometry",color:"cyan",extras:{type:"built-in"},ins:[],outs:["double cos(float rad)","double sin(float rad)","double tan(float rad)"]},{name:"Random Numbers",color:"cyan",extras:{type:"built-in"},ins:["void randomSeed(long seed)"],outs:["long random(? max)","long random(? min, ? max)"]},{name:"Digital Port",color:"white",extras:{type:"port"},ins:[],outs:["port"]},{name:"Analog Port",color:"white",extras:{type:"port"},ins:[],outs:["port"]},{name:"Function",extras:{type:"logic"},color:"grey",outs:["call"],ins:["trigger"]},{name:"Condition",extras:{type:"logic"},color:"grey",outs:["True","False"],ins:["trigger","x","y"]},{name:"Loop",extras:{type:"logic"},color:"grey",outs:["True","False"],ins:["startValue","stopValue"]},{name:"Led",color:"red",extras:{type:"component",library:"Setter.h"},ins:["setValue()"],outs:[]},{name:"Temperature Sensor",color:"blue",extras:{type:"component",library:"Getter.h"},ins:[],outs:["getValue()"]},{name:"TwoWire Interface",color:"blue",extras:{type:"component",library:"Wire.h"},ins:["void begin()","void beginTransmission()","void setClock()","void onReceive()","void onRequest()"],outs:["byte requestFrom()","byte endTransmission()","byte write()","byte available()","byte read()"]},{name:"Button",color:"blue",extras:{type:"component",library:"Getter.h"},ins:["setValue(bool)"],outs:[]},{name:"PWM Servo",color:"orange",extras:{type:"component",library:"Adafruit_PWMServoDriver.h"},ins:["void begin(uint8_t prescale=0)","void sleep()","void wakeup()","void setExtClk(uint8_t prescale)","void setPWMFreq(float freq)","void setOutputMode(bool totempole)","void setPWM(uint8_t num, uint16_t on, uint16_t off)","void setPin(uint8_t num, uint16_t val, bool invert=false)","void writeMicroseconds(uint8_t num, uint16_t Microseconds)","void setOscillatorFrequency(uint32_t freq)"],outs:["uint8_t getPWM(uint8_t num)","uint8_t readPrescale()","uint32_t getOscillatorFrequency()"]},{name:"Servo",color:"orange",extras:{type:"component",library:"Servo.h"},ins:["void detach()","void write(int)","void writeMicroseconds(int)"],outs:["uint8_t attach(int)","uint8_t attach(int, int, int)","int read()","int readMicroseconds()","bool attached()"]},{name:"Stepper",color:"orange",extras:{type:"component",library:"Stepper.h"},ins:["Stepper(int, int, int)","Stepper(int, int, int, int, int)","Stepper(int, int, int, int, int, int)","void setSpeed(long whatSpeed)","void step(int number_of_steps)"],outs:["int version(void)"]},{name:"Variable Integer",color:"pink",extras:{type:"variable"},ins:["void setValue(int)"],outs:["int getValue()"]},{name:"Variable Boolean",color:"pink",extras:{type:"variable"},ins:["void setValue(bool)"],outs:["bool"]},{name:"Constant Integer",color:"pink",extras:{type:"constant"},ins:[],outs:["int"]},{name:"Constant Boolean",color:"pink",extras:{type:"constant"},ins:[],outs:["bool"]}],rt=n(194),at=n.n(rt),st=(n(466),n(262)),ct=n(418),lt=function(){var t=Object(a.useRef)(null),e=Object(a.useState)(""),n=Object(r.a)(e,2),o=n[0],i=n[1],c=Object(a.useCallback)((function(t){i(t.slice(0,-1))}),[]);return Object(ct.a)(t,c,{disabled:!1,indentation:2}),Object(P.jsx)(st.a,Object(G.a)(Object(G.a)({},st.b),{},{code:o,language:"jsx",children:function(e){var n=e.className,o=e.style,i=e.tokens,r=(e.getLineProps,e.getTokenProps);return Object(P.jsx)("pre",{className:n,style:o,ref:t,children:i.map((function(t,e){return Object(P.jsxs)(s.a.Fragment,{children:[t.filter((function(t){return!t.empty})).map((function(t,e){return Object(P.jsx)("span",Object(G.a)({},r({token:t,key:e})))})),"\n"]},e)}))})}}))};function dt(t){var e="";if(0===Object.keys(t).length)return"// Empty Diagram!";var n=[];Object.entries(t.layers[0].models).forEach((function(t){n.push(t[1])}));var o=[],i=[],r=[],a=[],s=[],c=[],l=[],d=[];if(Object.entries(t.layers[1].models).forEach((function(t){var e=t[1];switch(o.push(e),e.extras.type){case"component":e.instance=e.name.toLowerCase().replace(" ","")+r.filter((function(t){return t.extras.library===e.extras.library})).length,r.push(e),s.includes(e.extras.library)||s.push(e.extras.library);break;case"controller":a.push(e);break;case"logic":i.push(e);break;case"variable":break;case"constant":e.content.name=e.content.name.toUpperCase(),c.push(e)}})),0===o.length)return"// You need at least one Node!";if(0===a.length)return"// You need an Arduino!";if(a.length>1)return"// Only one Arduino allowed!";var u=a[0],p=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.forEach((function(t){e+=t})),e+="\n"},h=function(){for(var t="",n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];o.forEach((function(e){t+=e})),e=t+"\n"+e},b=function(t){return n.find((function(e){return e.id===t}))},g=function(t,e){try{return o.find((function(e){return e.id===t})).ports.find((function(t){return t.id===e}))}catch(n){return"// Loose end"}},j=function(t){return o.find((function(e){return e.id===t}))},O=function(t,e){try{var n=t.ports.find((function(t){return t.name===e})).links[0],o=b(n),i=g(o.source,o.sourcePort),r=f(i);return["variable","port"].includes(r.extras.type)?r.content.value:["component"].includes(r.extras.type)?r.instance+"."+i.name:p("Unknown extras.type")}catch(a){return"/* Lacking Value */"}},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"True";try{var n=t.ports.find((function(t){return t.name===e})).links[0],o=b(n);return g(o.target,o.targetPort)}catch(i){return{label:"// Lacking Outcome"}}},f=function(t){return o.find((function(e){return e.id===t.parentNode}))},v=function(t){var e=t.substring(t.indexOf(" ")+1,-1!==t.indexOf("(")?t.indexOf("("):t.length),n=t.substring(t.indexOf("("),t.indexOf(")")-1).split(","),o=e;return n.forEach((function(t){if(!t.includes("=")){var e=String(t.split(" ").slice(-1));o+=e}})),o},x=function t(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];try{"constant"===e.extras.type?o.push(e.content.name):o.push(e.content.value)}catch(r){console.log("error, no parameter?")}e.ports.forEach((function(n){n.links.forEach((function(n){var i=b(n),r=g(i.target,i.targetPort),a=j(r.parentNode);a.id===e.id?a.instance&&p(a.instance+"."+v(r.name.split("(").shift())+"("+o+");"):"built-in"===a.extras.type?p(v(r.name.split("(").shift())+"("+o+");"):a.instance?p(a.instance+"."+v(r.name.split("(").shift())+"("+o+");"):t.apply(void 0,[a].concat(o))}))}))},y=function(t){var e,n=b(t),o=g(n.target,n.targetPort),i=j(o.parentNode),r=g(n.source,n.sourcePort),a=j(r.parentNode);if("built-in"===(null===i||void 0===i||null===(e=i.extras)||void 0===e?void 0:e.type))p(v(o.name)+"()");else if("Function"===(null===i||void 0===i?void 0:i.name))p(i.content.value,"(",");");else if("Condition"===(null===i||void 0===i?void 0:i.name)){var s=O(i,"x"),c=O(i,"y"),u=m(i),h=f(u),y=m(i,"False"),k=f(y);p("if (",s," "+i.content.value+" ",c,") {"),h?x(h):p("/* Lacking code to be executed if conditional is true */"),k&&(p("} else {"),x(k)),p("}\n")}else!function(t,e,n,o){var i,r;["variable","constant"].includes(null===n||void 0===n||null===(i=n.extras)||void 0===i?void 0:i.type)?x(n):["port"].includes(null===n||void 0===n||null===(r=n.extras)||void 0===r?void 0:r.type)?(console.log("found port",n),n.name.includes("Digital")?(console.log("it was digital"),l.push(n.content.value)):(console.log("it was analog"),d.push(n.content.value)),x(n)):(null===n||void 0===n?void 0:n.instance)?p(n.instance+"."+v(o.name)+"()"):p(t.instance+"."+v(e.name)+"()")}(a,r,i,o)};return s.length>0&&(p("// Libraries"),s.forEach((function(t){p("#include <"+t+">")})),p(""),p("// Objects"),s.forEach((function(t){r.forEach((function(e){e.extras.library===t&&p(e.name+" "+e.instance)}))}))),i.filter((function(t){return"Function"===t.name})).length>0&&(p("// Functions"),i.forEach((function(t){"Function"===t.name&&(p("void ",t.content.value,"() {"),t.ports.find((function(t){return"right"===t.alignment})).links.forEach((function(t){y(t)})),p("}"))}))),c.length>0&&(p("// Constants"),c.forEach((function(t){p("#define ".concat(t.content.name," ").concat(t.content.value," //").concat(t.name))})),p("")),p("// Micro-controller's Lifecycle"),u.ports.forEach((function(t){p("void ",t.label,"{"),t.links.forEach((function(t){y(t)})),p("}\n")})),h(""),h("Digital ports ".concat(l.length,"/").concat(u.extras.digitalPorts," ").concat(l.length>0?"(".concat(l,")"):""),"*/"),h("Analog ports ".concat(d.length,"/").concat(u.extras.analogPorts," ").concat(d.length>0?"(".concat(d,")"):""," ")),h("/* Code generated for ",u.name),function(t){var e=[],n=0;return t.split("\n").forEach((function(t){t.includes("}")&&n--,e.push("    ".repeat(n)+t),t.includes("{")&&n++})),e.join("\n")}(e)}function ut(t){var e=t.model,n="Initializing Generator";if("{}"===e||""===e);else try{n=dt(JSON.parse(e))}catch(o){n="Uncaught error, maybe a loose link?",console.log(o)}return Object(a.useEffect)((function(){at.a.highlightAll()}),[t]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{className:"Code",children:Object(P.jsx)("pre",{children:Object(P.jsx)("code",{className:"language-clike",children:n})})}),Object(P.jsx)(lt,{})]})}var pt,ht,bt,gt,jt=n(750),Ot=n(467).default;function mt(t){var e=Object(a.useState)("{}"),n=Object(r.a)(e,2),o=n[0],i=n[1],s=a.useState(!1),c=Object(r.a)(s,2),l=c[0],d=c[1],u=t.app.getDiagramEngine().getModel().serialize(),p=JSON.stringify(u),h=Object(I.a)(new Set(it.map((function(t){return t.extras.type}))));return p!==o&&i(p),Object(P.jsxs)("div",{className:"float-container",children:[Object(P.jsx)("div",{className:"float-child-left",children:Object(P.jsx)(gt.Body,{children:Object(P.jsxs)(gt.Content,{children:[Object(P.jsxs)("div",{children:[Object(P.jsx)(Ot,{speed:1,className:"area",contentClassName:"content",horizontal:!1,style:{height:"88vh"},smoothScrolling:!0,verticalScrollbarStyle:{backgroundColor:"white"},children:h.map((function(t){return Object(P.jsxs)("div",{style:{border:"dashed white 1px",marginBottom:"20px"},children:[Object(P.jsxs)("h6",{style:{margin:"0px 0px 0px 0px"},children:[t+"s",":"]}),it.filter((function(e){return e.extras.type===t})).map((function(t){return Object(P.jsx)(V,{node:t},t.name)}))]},t)}))}),Object(P.jsxs)("div",{style:{marginBottom:"0px"},children:[Object(P.jsx)(jt.a,{variant:"contained",size:"small",onClick:function(){localStorage.setItem("model",JSON.stringify(u)),console.log("Saved")},children:"Save"}),Object(P.jsx)(jt.a,{variant:"contained",size:"small",onClick:function(){t.app.getActiveDiagram().deserializeModel(JSON.parse(localStorage.getItem("model")||"{}"),t.app.getDiagramEngine()),console.log("Loaded"),i(p),setTimeout((function(){d(!l)}),10)},children:"Load"}),Object(P.jsx)(jt.a,{variant:"contained",size:"small",onClick:function(){t.app.getActiveDiagram().deserializeModel(JSON.parse('{"id":"b61bb7d6-efee-4caf-8b8c-be7dfa140acd","offsetX":0,"offsetY":0,"zoom":100,"gridSize":0,"layers":[{"id":"0df10e02-9519-4a32-9c90-cb48681c24cd","type":"diagram-links","isSvg":true,"transformed":true,"models":{}},{"id":"c18e36ab-c0ce-4def-8c51-0c09d00cfe0b","type":"diagram-nodes","isSvg":false,"transformed":true,"models":{}}]}'),t.app.getDiagramEngine()),setTimeout((function(){d(!l)}),10)},children:"Clear"})]})]}),Object(P.jsx)(gt.Layer,{onDrop:function(e){var n=JSON.parse(e.dataTransfer.getData("storm-diagram-node"));if(n){var o={};"variable"===n.extras.type||"constant"===n.extras.type?o=new ot(n.name,n.color,n.extras,n.ins,n.outs):"port"===n.extras.type||"logic"===n.extras.type?o=new ot(n.name,n.color,n.extras,n.ins,n.outs,!1):((o=new $(n.name,n.color)).extras=n.extras,n.outs.forEach((function(t){o.addOutPort(t)})),n.ins.forEach((function(t){o.addInPort(t)}))),o.setPosition(t.app.getDiagramEngine().getRelativeMousePoint(e)),t.app.getDiagramEngine().getModel().addNode(o)}d(!l)},onDragOver:function(t){t.preventDefault()},onClick:function(t){d(!l)},children:Object(P.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(P.jsx)(nt,{children:Object(P.jsx)(tt.CanvasWidget,{engine:t.app.getDiagramEngine()})})})})]})})}),Object(P.jsx)("div",{className:"float-child-right",children:Object(P.jsx)(ut,{model:o})})]})}!function(t){t.Body=z.default.div(pt||(pt=Object(M.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%;\n\t"]))),t.Content=z.default.div(ht||(ht=Object(M.a)(["\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]))),t.Layer=z.default.div(bt||(bt=Object(M.a)(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"])))}(gt||(gt={}));var ft,vt,xt=a.memo(mt),yt=n(86),kt=n.n(yt),Pt=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){var t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(D.a)(this,n),(t=e.call(this,Object(G.a)(Object(G.a)({},o),{},{type:"editable-label"}))).value=void 0,t.value=o.value||"",t}return Object(N.a)(n,[{key:"serialize",value:function(){return Object(G.a)(Object(G.a)({},Object(q.a)(Object(J.a)(n.prototype),"serialize",this).call(this)),{},{value:this.value})}},{key:"deserialize",value:function(t){Object(q.a)(Object(J.a)(n.prototype),"deserialize",this).call(this,t),this.value=t.data.value}}]),n}(yt.LabelModel),Ct=n(419);!function(t){t.Label=z.default.div(ft||(ft=Object(M.a)(["\n\t\tuser-select: none;\n\t\tpointer-events: auto;\n\t"])))}(vt||(vt={}));var wt,Et,St,Mt,It,Dt,Nt=function(t){var e=a.useState(t.model.value),n=Object(r.a)(e,2),o=n[0],i=n[1];return Object(P.jsxs)(vt.Label,{children:[Object(P.jsx)("input",{value:o,onChange:function(e){var n=e.target.value;i(n),t.model.value=n}}),Object(P.jsx)("button",{onClick:function(){return Object(Ct.action)("model eventDidFire")("You clicked the button")},children:"Click me!"})]})},_t=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){return Object(D.a)(this,n),e.call(this,"editable-label")}return Object(N.a)(n,[{key:"generateModel",value:function(){return new Pt}},{key:"generateReactWidget",value:function(t){return Object(P.jsx)(Nt,{model:t.model})}}]),n}(tt.AbstractReactFactory),At=n(103),Tt=(n(721),n(421)),zt=n.n(Tt),Ft=function(t){var e=t.content,n=t.onChange,o=t.onBlurOrEnter;return Object(P.jsx)(zt.a,{autoFocus:!0,inputStyle:{padding:1,borderStyle:"dotted",borderWidth:1,borderColor:"black"},type:"text",value:e,onChange:n,onBlur:o,onKeyDown:function(t){13===t.keyCode&&o()}})},Lt=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(t){var o;return Object(D.a)(this,n),(o=e.call(this,t)).state={},o}return Object(N.a)(n,[{key:"render",value:function(){return Object(P.jsx)("div",{children:this.props.beingEdited&&this.props.editingKey===this.props.elementKey?Object(P.jsx)(Ft,{content:this.props.content,onChange:this.props.onChange,onBlurOrEnter:this.props.onBlurOrEnter}):Object(P.jsx)("p",{style:{margin:0,padding:0,fontStyle:this.props.isAbstract?"italic":"normal"},children:this.props.content})})}}]),n}(a.Component),Bt=function(t){var e=t.content,n=t.onChange,o=t.onBlurOrEnter,i=t.options;return Object(P.jsx)("select",{name:"values",id:"values",value:e,onChange:n,onBlur:o,children:i.map((function(t,e){return Object(P.jsx)("option",{children:t},e)}))})},Wt=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(t){var o;return Object(D.a)(this,n),(o=e.call(this,t)).state={},o}return Object(N.a)(n,[{key:"render",value:function(){return Object(P.jsx)("div",{children:this.props.beingEdited&&this.props.editingKey===this.props.elementKey?Object(P.jsx)(Bt,{content:this.props.content,onChange:this.props.onChange,onBlurOrEnter:this.props.onBlurOrEnter,options:this.props.options}):Object(P.jsx)("p",{style:{margin:0,padding:0,fontStyle:this.props.isAbstract?"italic":"normal"},children:this.props.content})})}}]),n}(a.Component);!function(t){t.Node=z.default.div(wt||(wt=Object(M.a)(["\n\t\tbackground-color: ",";\n\t\tborder-radius: 5px;\n\t\tfont-family: sans-serif;\n\t\tcolor: white;\n\t\tborder: solid 2px black;\n\t\toverflow: visible;\n\t\tfont-size: 11px;\n\t\tborder: solid 2px ",";\n\t"])),(function(t){return t.background}),(function(t){return t.selected?"rgb(0,192,255)":"black"})),t.Title=z.default.div(Et||(Et=Object(M.a)(["\n\t\tbackground: rgba(0, 0, 0, 0.3);\n\t\tdisplay: flex;\n\t\twhite-space: nowrap;\n\t\tjustify-items: center;\n\t"]))),t.TitleName=z.default.div(St||(St=Object(M.a)(["\n\t\tflex-grow: 1;\n\t\tpadding: 5px 5px;\n\t"]))),t.Ports=z.default.div(Mt||(Mt=Object(M.a)(["\n\t\tdisplay: flex;\n\t\tbackground-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2));\n\t"]))),t.PortsContainer=z.default.div(It||(It=Object(M.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t&:first-of-type {\n\t\t\tmargin-right: 10px;\n\t\t}\n\n\t\t&:only-child {\n\t\t\tmargin-right: 0px;\n\t\t}\n\t"])))}(Dt||(Dt={}));var Ht=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(t){var o;return Object(D.a)(this,n),(o=e.call(this,t)).divElement=void 0,o.generatePort=function(t){return Object(P.jsx)(yt.DefaultPortLabel,{engine:o.props.engine,port:t},t.getID())},o._editableObjectDoubleClick=function(t){o.state.editingSomething||o.setState({editingSomething:!0,editingKey:t})},o._contentOnChange=function(t){o.props.nodeModel.content[o.state.editingKey]=t.currentTarget.value,o.setState({content:t.currentTarget.value})},o._onBlurOrEnter=function(){o.setState({editingSomething:!1,editingKey:""})},o.state={content:{name:"",value:""},variableType:"",editingSomething:!1,editingKey:""},o._editableObjectDoubleClick=o._editableObjectDoubleClick.bind(Object(At.a)(o)),o._contentOnChange=o._contentOnChange.bind(Object(At.a)(o)),o._onBlurOrEnter=o._onBlurOrEnter.bind(Object(At.a)(o)),o}return Object(N.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({content:this.props.nodeModel.content})}},{key:"render",value:function(){var t=this;return Object(P.jsxs)(Dt.Node,{"data-default-node-name":this.props.nodeModel.getOptions().name,selected:this.props.nodeModel.isSelected(),background:this.props.nodeModel.getOptions().color,children:[Object(P.jsxs)(Dt.Title,{children:[this.props.nodeModel.content.name&&Object(P.jsx)("div",{className:"editable-node",ref:function(e){return t.divElement=e},children:Object(P.jsx)("div",{className:"editable-border",children:Object(P.jsx)("div",{className:"editable-header",children:Object(P.jsx)("div",{onDoubleClick:function(){t._editableObjectDoubleClick("name")},children:Object(P.jsx)(Lt,{elementKey:"name",editingKey:this.state.editingKey,beingEdited:this.state.editingSomething,content:this.props.nodeModel.content.name,onChange:this._contentOnChange,onBlurOrEnter:this._onBlurOrEnter})})})})}),Object(P.jsxs)(Dt.TitleName,{children:[this.props.nodeModel.getOptions().name,":"]}),Object(P.jsx)("div",{className:"editable-node",ref:function(e){return t.divElement=e},children:Object(P.jsx)("div",{className:"editable-border",children:Object(P.jsx)("div",{className:"editable-header",children:Object(P.jsx)("div",{onDoubleClick:function(){t._editableObjectDoubleClick("value")},children:"bool"===this.props.nodeModel.portsOut[0].options.name||"port"===this.props.nodeModel.portsOut[0].options.name||"Condition"===this.props.nodeModel.getOptions().name?Object(P.jsx)(Wt,{elementKey:"value",options:this.props.nodeModel.selectableOptions,editingKey:this.state.editingKey,beingEdited:this.state.editingSomething,content:this.props.nodeModel.content.value,onChange:this._contentOnChange,onBlurOrEnter:this._onBlurOrEnter}):Object(P.jsx)(Lt,{elementKey:"value",editingKey:this.state.editingKey,beingEdited:this.state.editingSomething,content:this.props.nodeModel.content.value,onChange:this._contentOnChange,onBlurOrEnter:this._onBlurOrEnter})})})})})]}),Object(P.jsxs)(Dt.Ports,{children:[Object(P.jsx)(Dt.PortsContainer,{children:_.map(this.props.nodeModel.getInPorts(),this.generatePort)}),Object(P.jsx)(Dt.PortsContainer,{children:_.map(this.props.nodeModel.getOutPorts(),this.generatePort)})]})]})}}]),n}(a.Component),Kt=function(t){Object(A.a)(n,t);var e=Object(T.a)(n);function n(){return Object(D.a)(this,n),e.call(this,"MyEditable")}return Object(N.a)(n,[{key:"generateModel",value:function(t){return new ot("name","pink","test",["t"],["t"])}},{key:"generateReactWidget",value:function(t){return Object(P.jsx)(Ht,{nodeModel:t.model,engine:this.engine})}}]),n}(tt.AbstractReactFactory),Rt=function(){function t(){Object(D.a)(this,t),this.activeModel=void 0,this.diagramEngine=void 0,this.diagramEngine=kt.a(),this.diagramEngine.getLabelFactories().registerFactory(new _t),this.diagramEngine.getNodeFactories().registerFactory(new Kt),this.newModel()}return Object(N.a)(t,[{key:"newModel",value:function(){this.activeModel=new yt.DiagramModel,this.diagramEngine.setModel(this.activeModel)}},{key:"getActiveDiagram",value:function(){return this.activeModel}},{key:"getDiagramEngine",value:function(){return this.diagramEngine}}]),t}();function Vt(){var t=new Rt;return Object(P.jsx)(xt,{app:t})}var Gt=n.p+"static/media/flow.43bedc99.svg",qt=n.p+"static/media/cym_s.cbee123b.svg";function Jt(){return Object(P.jsxs)("div",{children:[Object(P.jsx)("h2",{children:"Welcome to MDD4CPS!"}),Object(P.jsx)("img",{src:Gt,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"100%"}}),Object(P.jsx)("img",{src:qt,alt:"CYM-S",style:{maxHeight:"80vh",maxWidth:"100%"}})]})}var Ut=n.p+"static/media/cym_s_extended.79a380b4.svg",Yt=n.p+"static/media/cym_d.8652356e.svg";function Xt(){return Object(P.jsxs)("div",{children:[Object(P.jsx)("img",{src:Ut,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"100%"}}),Object(P.jsx)("img",{src:Yt,alt:"Architecture Diagram",style:{maxHeight:"80vh",maxWidth:"90%"}})]})}var Qt=n.p+"static/media/transformations.40b625af.png";function Zt(){return Object(P.jsx)("div",{children:Object(P.jsx)("img",{src:Qt,alt:"Transformations",style:{maxHeight:"80vh",maxWidth:"90%"}})})}function $t(){return Object(a.useEffect)((function(){at.a.highlightAll()}),[]),Object(P.jsx)("div",{children:it.map((function(t){return Object(P.jsxs)("div",{className:"grid-container",style:{display:"grid",gridTemplateColumns:" 1fr 1fr",gridGap:"20px"},children:[Object(P.jsx)("pre",{children:Object(P.jsx)("code",{className:"language-clike",children:JSON.stringify(t,null,"\t")})}),Object(P.jsx)(W,{node:t})]},t.name)}))})}function te(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("h3",{children:"Planned Settings"}),Object(P.jsxs)("ul",{children:[Object(P.jsx)("li",{children:"Show/Hide copy button on code panel"}),Object(P.jsx)("li",{children:"Show/Hide all comments"}),Object(P.jsx)("li",{children:"Show/Hide all warnings"}),Object(P.jsx)("li",{children:"Show/Hide diagram overlay"}),Object(P.jsx)("li",{children:"Show/Hide palette expansion panels"}),Object(P.jsx)("li",{}),Object(P.jsx)("li",{children:"Enable code editing"}),Object(P.jsx)("li",{}),Object(P.jsx)("li",{children:"Enforce typings"}),Object(P.jsx)("li",{children:"Enforce lose ends"}),Object(P.jsx)("li",{children:"Enforce sequencial port usage"}),Object(P.jsx)("li",{children:"Remove link restrictions"}),Object(P.jsx)("li",{}),Object(P.jsx)("li",{children:"Reset all settings on this page"}),Object(P.jsx)("li",{children:"Reset custom palette"}),Object(P.jsx)("li",{children:"Erase all localStorage data"}),Object(P.jsx)("li",{}),Object(P.jsx)("li",{children:"Contact info"})]})]})}function ee(){return Object(P.jsx)("div",{className:"App",children:Object(P.jsxs)("header",{className:"App-header",children:[Object(P.jsxs)(S.c,{children:[Object(P.jsx)(S.a,{path:"/mdd4/",element:Object(P.jsx)(Jt,{})}),Object(P.jsx)(S.a,{path:"/mdd4/models",element:Object(P.jsx)(Xt,{})}),Object(P.jsx)(S.a,{path:"/mdd4/transformations",element:Object(P.jsx)(Zt,{})}),Object(P.jsx)(S.a,{path:"/mdd4/palette",element:Object(P.jsx)($t,{})}),Object(P.jsx)(S.a,{path:"/mdd4/editor",element:Object(P.jsx)(Vt,{})}),Object(P.jsx)(S.a,{path:"/mdd4/settings",element:Object(P.jsx)(te,{})})]}),Object(P.jsx)(C,{})]})})}i.a.render(Object(P.jsx)(c.a,{children:Object(P.jsx)(ee,{})}),document.getElementById("root"))}},[[723,1,2]]]);
//# sourceMappingURL=main.be4f3cb9.chunk.js.map